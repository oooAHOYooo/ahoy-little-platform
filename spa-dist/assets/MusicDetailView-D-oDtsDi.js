import{u as z,z as D,o as F,a as j,c,d as n,e as s,t as l,i as f,n as u,f as p,B as d,F as E,r as H,H as I,m as S,I as Q,q as T,J as R,E as q,K as J,h as B}from"./index-46FOhV9w.js";const K={key:0,class:"music-container"},L={class:"podcast-show-hero"},G=["src","alt"],O={class:"podcast-show-hero-meta"},U={class:"podcast-show-hero-title"},W={key:0,class:"podcast-show-hero-desc"},X={key:1,class:"episode-subtitle"},Y={class:"podcast-show-hero-actions"},Z={key:0,class:"podcasts-section"},ss={class:"podcasts-section-header"},ts={class:"episode-list"},as=["onClick"],es=["src","alt"],os={class:"episode-meta"},is={class:"episode-title"},ls={class:"episode-show"},cs={class:"episode-actions"},ns=["onClick"],rs=["onClick"],ds={key:1,class:"music-container"},vs={__name:"MusicDetailView",setup(us){const P=Q(),i=z(),v=D(),{shareTrack:x}=J(),_=R(),M=q();function m(e){M.open(e)}const t=S(null),r=S([]),h=T(()=>t.value?r.value.filter(e=>e.artist===t.value.artist&&e.id!==t.value.id):[]),k=T(()=>{var e,a;return((e=i.currentTrack)==null?void 0:e.id)===((a=t.value)==null?void 0:a.id)&&i.isPlaying});function $(e){if(!e)return"";const a=Math.floor(e/60),o=Math.floor(e%60);return`${a}:${o.toString().padStart(2,"0")}`}function A(){k.value?i.pause():(i.play(t.value),i.setQueue(r.value,r.value.findIndex(e=>e.id===t.value.id)))}function V(){_.onBookmark(),v.toggle({...t.value,_type:"track"})}function N(){_.light(),x(t.value)}function y(e){i.setQueue(h.value,e)}return F(async()=>{const e=await j("/api/music").catch(()=>({tracks:[]}));r.value=e.tracks||[];const a=P.params.id;t.value=r.value.find(o=>String(o.id)===String(a))||null}),(e,a)=>t.value?(c(),n("div",K,[s("section",L,[s("img",{class:"podcast-show-hero-art",src:t.value.cover_art||"/static/img/default-cover.jpg",alt:t.value.title},null,8,G),s("div",O,[a[3]||(a[3]=s("div",{class:"podcast-show-hero-kicker"},"Track",-1)),s("h1",U,l(t.value.title),1),t.value.artist?(c(),n("p",W,l(t.value.artist),1)):f("",!0),t.value.duration_seconds?(c(),n("p",X,l($(t.value.duration_seconds)),1)):f("",!0),s("div",Y,[s("button",{class:"podcast-cta",onClick:A},[s("i",{class:u(k.value?"fas fa-pause":"fas fa-play")},null,2),p(" "+l(k.value?"Pause":"Play"),1)]),s("button",{class:"podcast-cta secondary",onClick:V},[s("i",{class:u(d(v).isBookmarked(t.value)?"fas fa-bookmark":"far fa-bookmark")},null,2),p(" "+l(d(v).isBookmarked(t.value)?"Saved":"Save"),1)]),s("button",{class:"podcast-cta secondary",onClick:a[0]||(a[0]=o=>m(t.value))},[...a[1]||(a[1]=[s("i",{class:"fas fa-plus"},null,-1),p(" Add to playlist ",-1)])]),s("button",{class:"podcast-cta secondary",onClick:N},[...a[2]||(a[2]=[s("i",{class:"fas fa-share-alt"},null,-1),p(" Share ",-1)])])])])]),h.value.length?(c(),n("section",Z,[s("div",ss,[s("h2",null,"More from "+l(t.value.artist),1)]),s("div",ts,[(c(!0),n(E,null,H(h.value,(o,g)=>{var w,b;return c(),n("article",{key:o.id,class:u(["episode-row",{playing:((w=d(i).currentTrack)==null?void 0:w.id)===o.id}]),onClick:C=>y(g)},[s("img",{class:"episode-art",src:o.cover_art||"/static/img/default-cover.jpg",alt:o.title,loading:"lazy"},null,8,es),s("div",os,[s("div",is,l(o.title),1),s("div",ls,l(o.artist),1)]),s("div",cs,[s("button",{class:"episode-btn",title:"Add to playlist",onClick:B(C=>m(o),["stop"])},[...a[4]||(a[4]=[s("i",{class:"fas fa-plus"},null,-1)])],8,ns),s("button",{class:"episode-btn",onClick:B(C=>y(g),["stop"])},[s("i",{class:u(((b=d(i).currentTrack)==null?void 0:b.id)===o.id&&d(i).isPlaying?"fas fa-pause":"fas fa-play")},null,2)],8,rs)])],10,as)}),128))])])):f("",!0)])):(c(),n("div",ds,[...a[5]||(a[5]=[I('<section class="podcast-show-hero"><div class="podcast-show-hero-art skeleton" style="aspect-ratio:1;width:100%;"></div><div class="podcast-show-hero-meta"><div class="skeleton" style="height:14px;width:40%;margin-bottom:8px;"></div><div class="skeleton" style="height:24px;width:70%;margin-bottom:8px;"></div><div class="skeleton" style="height:14px;width:50%;"></div></div></section>',1)])]))}};export{vs as default};
