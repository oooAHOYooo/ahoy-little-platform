import{_ as K,n as $,m as S,S as A,T as N,o as Q,E as w,b as ee,c as p,d as v,e,G as te,k as a,g as k,F as se,t as f,j as h,i as y,s as I,y as P,q as ne,l as oe,U as O,N as ae,r as le,V as ie,W as re,X as de,Y as ue,Z as ce,B as ge}from"./index-kPv7jc-x.js";const me={class:"settings-page"},pe={class:"settings-container"},ve={class:"settings-content"},fe={class:"settings-section neu-card"},he={class:"settings-profile"},ye={class:"settings-value"},be={class:"settings-links"},Se={key:1,class:"settings-guest"},we={class:"settings-section neu-card"},ke={class:"settings-row setting-toggle-row"},Ce=["aria-pressed"],Ee={class:"settings-row setting-toggle-row"},xe=["aria-pressed"],Ve={class:"settings-grid"},_e={class:"setting-item"},Te={class:"dial-container"},De={class:"dial-value"},Le={class:"settings-section neu-card"},Me={class:"settings-row"},Ae={class:"theme-options"},Ne=["value"],Ie={class:"settings-section neu-card experimental-section"},Pe={class:"experimental-grid"},Oe={class:"downloads-table-wrap"},Be={key:0,class:"downloads-table"},Ye=["href"],Fe={key:1,class:"downloads-table-loading"},Je={key:2,class:"downloads-table-error"},_="ahoySettings",Re={__name:"SettingsView",setup(Xe){const B=ge(),g=ae(),C=$(),T=ce(),Y=S(null),l=O({masterVolume:75}),r=S(A()),d=S(N());function F(){r.value=!r.value,ie(r.value),r.value&&re()}function J(){d.value=!d.value,de(d.value),d.value&&ue()}const o=O({version:"",date:"",download_url:"",name:"",loading:!0,error:""}),D=S("");function R(){const s=new Date;D.value=s.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}let E=!1,x=null,u=null,c=null;function X(){g.isLoggedIn.value?w("/api/user/profile",{credentials:"include"}).then(s=>{var t;(t=s==null?void 0:s.preferences)!=null&&t.audioSettings&&(l.masterVolume=Math.max(0,Math.min(100,s.preferences.audioSettings.masterVolume??75))),V()}).catch(()=>V()):V()}function V(){var s;try{const t=localStorage.getItem(_);if(t){const n=JSON.parse(t);((s=n.audioSettings)==null?void 0:s.masterVolume)!=null&&(l.masterVolume=Math.max(0,Math.min(100,n.audioSettings.masterVolume)))}}catch{}b()}function z(){const s={audioSettings:{...l}};localStorage.setItem(_,JSON.stringify(s)),g.isLoggedIn.value&&w("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({preferences:{audioSettings:l}})}).catch(()=>{}),b(),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Settings saved!",type:"success"}}))}function U(){l.masterVolume=75;const s={audioSettings:{...l}};localStorage.setItem(_,JSON.stringify(s)),g.isLoggedIn.value&&w("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({preferences:{audioSettings:l}})}).catch(()=>{}),b(),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Settings reset to defaults",type:"info"}}))}function b(){var t;const s=l.masterVolume/100;document.querySelectorAll("audio").forEach(n=>{n.volume=s});try{const n=(t=C.getAudioElement)==null?void 0:t.call(C);n&&(n.volume=s)}catch{}}function L(s,t){E=!0,x=t;const n=s.currentTarget;u=m=>j(m,n),c=()=>M(),document.addEventListener("mousemove",u),document.addEventListener("mouseup",c),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("touchend",c)}function j(s,t){if(!E||!t)return;const n=s.touches?s.touches[0].clientX:s.clientX,m=s.touches?s.touches[0].clientY:s.clientY,i=t.getBoundingClientRect(),q=i.left+i.width/2,H=i.top+i.height/2,W=(Math.atan2(m-H,n-q)*(180/Math.PI)+90+360)%360,Z=Math.max(0,Math.min(100,W/1.8));x==="masterVolume"&&(l.masterVolume=Z),b()}function M(){E=!1,x=null,u&&(document.removeEventListener("mousemove",u),document.removeEventListener("touchmove",u)),c&&(document.removeEventListener("mouseup",c),document.removeEventListener("touchend",c)),u=null,c=null}async function G(){await g.logout(),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Signed out",type:"success"}})),B.push("/")}return Q(()=>{r.value=A(),d.value=N(),X(),R(),w("/api/downloads/latest",{credentials:"include"}).then(s=>{o.version=(s==null?void 0:s.version)??"",o.date=(s==null?void 0:s.date)??"",o.download_url=(s==null?void 0:s.download_url)??"",o.name=(s==null?void 0:s.name)??"",o.loading=!1}).catch(()=>{o.error="No macOS release available",o.loading=!1})}),ee(()=>{M()}),(s,t)=>{var m;const n=le("router-link");return p(),v("div",me,[e("div",pe,[t[30]||(t[30]=te('<section class="podcasts-hero settings-page-header" data-v-2609c1e5><div class="podcasts-hero-inner" data-v-2609c1e5><h1 data-v-2609c1e5><i class="fas fa-cog" aria-hidden="true" data-v-2609c1e5></i> Settings </h1><p data-v-2609c1e5>Customize your Ahoy experience.</p></div></section><div class="settings-header desktop-only" data-v-2609c1e5><div class="settings-header-icon" data-v-2609c1e5><i class="fas fa-cog" data-v-2609c1e5></i></div><h1 data-v-2609c1e5>Settings</h1><p data-v-2609c1e5>Customize your Ahoy experience</p></div>',2)),e("div",ve,[e("div",fe,[t[9]||(t[9]=e("h2",null,[e("i",{class:"fas fa-user"}),a(" Account")],-1)),k(g).isLoggedIn.value?(p(),v(se,{key:0},[e("div",he,[t[3]||(t[3]=e("span",{class:"settings-label"},"Logged in as",-1)),e("span",ye,f((m=k(g).user.value)==null?void 0:m.email),1)]),e("div",be,[h(n,{to:"/account",class:"settings-link"},{default:y(()=>[...t[4]||(t[4]=[e("i",{class:"fas fa-user-circle"},null,-1),a(" Account & wallet ",-1)])]),_:1}),h(n,{to:"/my-saves",class:"settings-link"},{default:y(()=>[...t[5]||(t[5]=[e("i",{class:"fas fa-bookmark"},null,-1),a(" Saved ",-1)])]),_:1})]),e("button",{type:"button",class:"neu-btn neu-btn-secondary logout-btn",onClick:G},[...t[6]||(t[6]=[e("i",{class:"fas fa-sign-out-alt"},null,-1),a(" Sign out ",-1)])])],64)):(p(),v("div",Se,[t[8]||(t[8]=e("p",null,"Sign in to manage your preferences.",-1)),h(n,{to:"/login",class:"neu-btn neu-btn-primary"},{default:y(()=>[...t[7]||(t[7]=[a("Sign in",-1)])]),_:1})]))]),e("div",we,[t[16]||(t[16]=e("h2",null,[e("i",{class:"fas fa-volume-up"}),a(" Audio")],-1)),e("div",ke,[t[11]||(t[11]=e("div",{class:"setting-toggle-label"},[e("span",{class:"setting-toggle-title"},"Save chime"),e("span",{class:"setting-toggle-desc"},"Play a short sound when you save a track or show")],-1)),e("button",{type:"button",class:I(["setting-toggle-btn",{on:r.value}]),"aria-pressed":r.value,onClick:F},[...t[10]||(t[10]=[e("span",{class:"setting-toggle-thumb"},null,-1)])],10,Ce)]),e("div",Ee,[t[13]||(t[13]=e("div",{class:"setting-toggle-label"},[e("span",{class:"setting-toggle-title"},"Tap sound"),e("span",{class:"setting-toggle-desc"},"A tiny chime when you tap buttons and links")],-1)),e("button",{type:"button",class:I(["setting-toggle-btn",{on:d.value}]),"aria-pressed":d.value,onClick:J},[...t[12]||(t[12]=[e("span",{class:"setting-toggle-thumb"},null,-1)])],10,xe)]),e("div",Ve,[e("div",_e,[t[15]||(t[15]=e("label",null,"Master Volume",-1)),e("div",Te,[e("div",{ref_key:"dialEl",ref:Y,class:"neu-dial",style:ne({transform:`rotate(${l.masterVolume*1.8-90}deg)`}),onMousedown:t[0]||(t[0]=P(i=>L(i,"masterVolume"),["prevent"])),onTouchstart:t[1]||(t[1]=P(i=>L(i,"masterVolume"),["prevent"]))},[...t[14]||(t[14]=[e("div",{class:"dial-handle"},null,-1)])],36),e("span",De,f(Math.round(l.masterVolume)),1)])])])]),e("div",Le,[t[19]||(t[19]=e("h2",null,[e("i",{class:"fas fa-palette"}),a(" Appearance")],-1)),e("div",Me,[t[18]||(t[18]=e("div",{class:"setting-toggle-label"},[e("span",{class:"setting-toggle-title"},"Theme"),e("span",{class:"setting-toggle-desc"},"Choose your preferred look")],-1)),e("div",Ae,[e("select",{class:"settings-select",value:k(T).currentTheme.value,onChange:t[2]||(t[2]=i=>k(T).setTheme(i.target.value))},[...t[17]||(t[17]=[e("option",{value:"deep-blue"},"Deep Blue",-1),e("option",{value:"after-dark"},"After Dark",-1),e("option",{value:"default"},"Default",-1)])],40,Ne)])])]),e("div",Ie,[t[25]||(t[25]=e("h2",null,[e("i",{class:"fas fa-flask"}),a(" Experimental")],-1)),t[26]||(t[26]=e("p",{class:"experimental-disclaimer"},"These features are still in development and may change or be removed.",-1)),e("div",Pe,[h(n,{to:"/focus",class:"experimental-card neu-card-inset"},{default:y(()=>[...t[20]||(t[20]=[e("div",{class:"experimental-card-icon"},[e("i",{class:"fas fa-headphones"})],-1),e("div",{class:"experimental-card-info"},[e("h3",null,"Focus Mode"),e("p",null,"Ambient audio for deep focus and relaxation")],-1),e("i",{class:"fas fa-chevron-right experimental-card-arrow"},null,-1)])]),_:1}),h(n,{to:"/mp3-player",class:"experimental-card neu-card-inset"},{default:y(()=>[...t[21]||(t[21]=[e("div",{class:"experimental-card-icon"},[e("i",{class:"fas fa-compact-disc"})],-1),e("div",{class:"experimental-card-info"},[e("h3",null,"MP3 Player"),e("p",null,"Import and play MP3s from your computer — Winamp style")],-1),e("i",{class:"fas fa-chevron-right experimental-card-arrow"},null,-1)])]),_:1}),h(n,{to:"/download",class:"experimental-card neu-card-inset"},{default:y(()=>[...t[22]||(t[22]=[e("div",{class:"experimental-card-icon"},[e("i",{class:"fas fa-download"})],-1),e("div",{class:"experimental-card-info"},[e("h3",null,"Download"),e("p",null,"Get Ahoy on web, Android, iOS, or desktop")],-1),e("i",{class:"fas fa-chevron-right experimental-card-arrow"},null,-1)])]),_:1})]),t[27]||(t[27]=e("p",{class:"downloads-table-intro"},[a("Latest macOS desktop build — also at "),e("a",{href:"/downloads",target:"_blank",rel:"noopener"},"app.ahoy.ooo/downloads"),a(".")],-1)),e("div",Oe,[o.version?(p(),v("table",Be,[t[24]||(t[24]=e("thead",null,[e("tr",null,[e("th",null,"Date"),e("th",null,"Version"),e("th",null,"Download")])],-1)),e("tbody",null,[e("tr",null,[e("td",null,f(D.value),1),e("td",null,f(o.version),1),e("td",null,[e("a",{href:o.download_url,target:"_blank",rel:"noopener",class:"download-table-link"},[a(f(o.name||"ZIP")+" ",1),t[23]||(t[23]=e("i",{class:"fas fa-external-link-alt"},null,-1))],8,Ye)])])])])):o.loading?(p(),v("p",Fe,"Loading…")):o.error?(p(),v("p",Je,f(o.error),1)):oe("",!0)])]),e("div",{class:"settings-actions"},[e("button",{type:"button",class:"neu-btn neu-btn-secondary",onClick:U},[...t[28]||(t[28]=[e("i",{class:"fas fa-undo"},null,-1),a(" Reset to Defaults ",-1)])]),e("button",{type:"button",class:"neu-btn neu-btn-primary",onClick:z},[...t[29]||(t[29]=[e("i",{class:"fas fa-save"},null,-1),a(" Save Settings ",-1)])])])])])])}}},je=K(Re,[["__scopeId","data-v-2609c1e5"]]);export{je as default};
