import{_ as it,z as nt,o as dt,a as rt,w as ut,c,d as v,e as t,f as I,l as p,v as f,F as U,g as O,h as y,i as q,t as d,n as i,x as X,r as Z,G as ct,m as r,L as vt,H as pt,s as bt}from"./index-qtThol8a.js";const ft={class:"shows-page"},mt={class:"shows-container"},yt={class:"video-player-wrapper"},kt={class:"embedded-video-player"},ht=["src","poster"],_t=["aria-label","onKeydown"],gt=["src","alt"],Ct={key:1,class:"video-embed-wrap",style:{position:"relative","padding-bottom":"56.25%",height:"0",overflow:"hidden",background:"#000"}},wt=["src"],St={class:"video-info-overlay"},Vt={class:"video-info-content"},$t={class:"video-title"},xt={class:"video-meta"},Bt={class:"video-host"},Lt={key:0,class:"video-type"},Mt={class:"video-description"},Rt={class:"video-actions-bar"},Pt=["aria-pressed","title"],Tt={class:"sr-only"},Et={class:"video-placeholder"},Ft={class:"unified-header shows-subheader"},It={class:"header-content"},Ut={class:"header-title"},qt={key:0,class:"hero-media"},At=["src","alt"],Nt={class:"hero-media-overlay"},Wt={class:"header-search desktop-only"},jt={class:"search-bar"},zt={class:"header-search mobile-only"},Dt={class:"search-bar"},Kt={class:"header-filters"},Ht={class:"filter-tabs"},Gt={class:"header-actions"},Qt={class:"view-options"},Yt={class:"shows-grid-section"},Jt={class:"shows-grid"},Ot=["onClick"],Xt={class:"show-thumbnail"},Zt=["src","alt"],te={class:"show-overlay"},ee=["onClick"],se={class:"show-actions"},oe=["onClick"],le=["aria-pressed","onClick"],ae={class:"sr-only"},ie={class:"show-info"},ne={class:"show-host"},de={class:"shows-list"},re={class:"list-items"},ue=["onClick"],ce={class:"col-thumbnail"},ve=["src","alt"],pe={class:"col-title"},be={class:"col-host"},fe={class:"col-actions"},me=["onClick"],ye=["aria-pressed","onClick"],ke={class:"sr-only"},he={class:"loading-section"},_e={class:"empty-section"},ge={__name:"ShowsView",setup(Ce){const B=pt(),A=bt(),N=nt(),m=r([]),C=r([]),w=r(null),b=r(""),u=r("all"),k=r("grid"),$=r(!0),l=r(null),L=r(!1),x=r(null),W=r(null),M=r(!1),R=r("");function j(){const s=B.query.play;if(!s||!m.value.length)return;const e=m.value.find(a=>String(a.id)===String(s));e&&(l.value=e,z())}function z(){setTimeout(()=>{x.value&&(x.value.load(),x.value.play().catch(()=>{}))},100)}function P(s){return s&&(s.video_url||s.mp4_link||s.trailer_url||s.url)||""}function tt(s){if(!s)return!1;const e=s.toLowerCase();return e.endsWith(".mp4")||e.endsWith(".webm")||e.endsWith(".mov")||e.includes("/mp4")||e.startsWith("blob:")}function D(s){const e=P(s),a=e.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&]+)/);if(a)return`https://www.youtube.com/embed/${a[1]}`;const V=e.match(/vimeo\.com\/(\d+)/);return V?`https://player.vimeo.com/video/${V[1]}`:null}function h(){let s=[...m.value];const e=b.value.trim().toLowerCase();e&&(s=s.filter(a=>(a.title||"").toLowerCase().includes(e)||(a.host||"").toLowerCase().includes(e)||(a.description||"").toLowerCase().includes(e))),u.value==="video_podcast"?s=s.filter(a=>(a.tags||[]).includes("video-podcast")):u.value!=="all"&&(s=s.filter(a=>(a.type||a.category||"")===u.value)),C.value=s}function _(s){u.value=s,h()}function K(){b.value="",h()}function et(){b.value="",u.value="all",h()}function S(s){l.value=s,M.value=!1,R.value="",vt({id:s.id,type:"show",title:s.title,host:s.host,thumbnail:s.thumbnail,url:s.video_url||s.mp4_link||s.trailer_url||s.url}),A.replace({path:"/shows",query:{...B.query,play:s.id}}),z(),setTimeout(()=>{var e;(e=W.value)==null||e.scrollIntoView({behavior:"smooth",block:"start"})},100)}function T(){if(!l.value)return;const s=D(l.value);s&&(R.value=s,M.value=!0)}function st(){l.value&&E(l.value)}function E(s){A.push({name:"show-detail",params:{id:s.id}})}function ot(){}function lt(){L.value=!1}function at(){if(m.value.length){const s=m.value[Math.floor(Math.random()*m.value.length)];S(s)}}function H(s){return{type:"show",_type:"show",id:s.id,title:s.title,thumbnail:s.thumbnail,artwork:s.thumbnail}}function n(s){return s?N.isBookmarked(H(s)):!1}function F(s){s&&N.toggle(H(s))}return dt(async()=>{$.value=!0;try{const e=(await rt("/api/shows").catch(()=>({shows:[]}))).shows||[];m.value=e,C.value=[...e],e.length&&(w.value=e[Math.floor(Math.random()*e.length)]),h(),j()}finally{$.value=!1}}),ut(()=>B.query.play,()=>{j()}),(s,e)=>{var a,V,G,Q,Y,J;return c(),v("div",ft,[t("div",mt,[e[36]||(e[36]=t("section",{class:"podcasts-hero shows-page-hero"},[t("div",{class:"podcasts-hero-inner"},[t("h1",null,[t("i",{class:"fas fa-video","aria-hidden":"true"}),I(" Videos")]),t("p",null,"Music videos, skate parts, short films, episodes, and more")])],-1)),t("section",{ref_key:"playerSectionRef",ref:W,class:"embedded-video-section"},[t("div",yt,[p(t("div",kt,[l.value&&tt(P(l.value))?(c(),v("video",{key:0,ref_key:"videoEl",ref:x,src:P(l.value),poster:l.value.thumbnail||"",controls:"",class:"embedded-video",playsinline:"",onLoadedmetadata:ot,onPlay:e[0]||(e[0]=o=>L.value=!0),onPause:e[1]||(e[1]=o=>L.value=!1),onEnded:lt}," Your browser does not support the video tag. ",40,ht)):l.value&&D(l.value)?(c(),v(U,{key:1},[M.value?(c(),v("div",Ct,[t("iframe",{src:R.value,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",border:"0"},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,wt)])):(c(),v("div",{key:0,class:"video-embed-poster",role:"button",tabindex:"0","aria-label":"Play "+(((a=l.value)==null?void 0:a.title)||"video"),onClick:T,onKeydown:[O(y(T,["prevent"]),["enter"]),O(y(T,["prevent"]),["space"])]},[t("img",{src:l.value.thumbnail||"",alt:((V=l.value)==null?void 0:V.title)||"",class:"video-embed-poster-img"},null,8,gt),e[14]||(e[14]=t("div",{class:"video-embed-poster-play"},[t("i",{class:"fas fa-play"})],-1))],40,_t))],64)):q("",!0),t("div",St,[t("div",Vt,[t("h2",$t,d(((G=l.value)==null?void 0:G.title)||"Untitled"),1),t("div",xt,[t("span",Bt,d(((Q=l.value)==null?void 0:Q.host)||""),1),(Y=l.value)!=null&&Y.type?(c(),v("span",Lt,d(String(l.value.type||"").replace(/_/g," ")),1)):q("",!0)]),t("p",Mt,d(((J=l.value)==null?void 0:J.description)||""),1)]),t("div",Rt,[t("button",{type:"button",class:"action-btn view-solo-btn",title:"View Solo",onClick:st},[...e[15]||(e[15]=[t("i",{class:"fas fa-external-link-alt"},null,-1),t("span",{class:"sr-only"},"View Solo",-1)])]),t("button",{type:"button",class:i(["action-btn bookmark-btn",{bookmarked:n(l.value)}]),"aria-pressed":n(l.value),title:n(l.value)?"Remove bookmark":"Bookmark",onClick:e[2]||(e[2]=o=>F(l.value))},[t("i",{class:i(n(l.value)?"fas fa-bookmark":"far fa-bookmark")},null,2),t("span",Tt,d(n(l.value)?"Remove bookmark":"Bookmark"),1)],10,Pt)])])],512),[[f,l.value]]),p(t("div",Et,[...e[16]||(e[16]=[t("div",{class:"placeholder-content"},[t("i",{class:"fas fa-play-circle"}),t("h3",null,"Select a video to play"),t("p",null,"Click on any video below to start watching")],-1)])],512),[[f,!l.value]])])],512),t("section",Ft,[t("div",It,[t("div",Ut,[w.value?(c(),v("div",qt,[t("img",{src:w.value.thumbnail||"/static/img/default-cover.jpg",alt:w.value.title,class:"hero-thumbnail image-placeholder"},null,8,At),t("div",Nt,[t("button",{type:"button",class:"hero-play-btn",onClick:e[3]||(e[3]=o=>S(w.value))},[...e[17]||(e[17]=[t("i",{class:"fas fa-play"},null,-1)])])])])):q("",!0),e[18]||(e[18]=t("div",{class:"title-text"},[t("h1",null,"Videos"),t("p",null,"Music videos, skate parts, short films, episodes, and more")],-1))]),t("div",Wt,[t("div",jt,[e[20]||(e[20]=t("i",{class:"fas fa-search"},null,-1)),p(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>b.value=o),type:"text",placeholder:"Search shows, hosts, or descriptions...",class:"search-input",onInput:h},null,544),[[X,b.value]]),p(t("button",{type:"button",class:"search-clear",onClick:K},[...e[19]||(e[19]=[t("i",{class:"fas fa-times"},null,-1)])],512),[[f,b.value]])])]),t("div",zt,[t("div",Dt,[e[22]||(e[22]=t("i",{class:"fas fa-search"},null,-1)),p(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>b.value=o),type:"text",placeholder:"Search shows...",class:"search-input",onInput:h},null,544),[[X,b.value]]),p(t("button",{type:"button",class:"search-clear",onClick:K},[...e[21]||(e[21]=[t("i",{class:"fas fa-times"},null,-1)])],512),[[f,b.value]])])]),t("div",Kt,[t("div",Ht,[t("button",{type:"button",class:i(["filter-tab",{active:u.value==="all"}]),onClick:e[6]||(e[6]=o=>_("all"))}," All Videos ",2),t("button",{type:"button",class:i(["filter-tab",{active:u.value==="video_podcast"}]),onClick:e[7]||(e[7]=o=>_("video_podcast"))}," Video Podcast ",2),t("button",{type:"button",class:i(["filter-tab",{active:u.value==="episode"}]),onClick:e[8]||(e[8]=o=>_("episode"))}," Episodes ",2),t("button",{type:"button",class:i(["filter-tab",{active:u.value==="clip"}]),onClick:e[9]||(e[9]=o=>_("clip"))}," Clips ",2),t("button",{type:"button",class:i(["filter-tab",{active:u.value==="music_video"}]),onClick:e[10]||(e[10]=o=>_("music_video"))}," Music Videos ",2),t("button",{type:"button",class:i(["filter-tab",{active:u.value==="broadcast"}]),onClick:e[11]||(e[11]=o=>_("broadcast"))}," Live Broadcasts ",2)])]),t("div",Gt,[t("div",Qt,[t("button",{type:"button",class:i(["view-btn",{active:k.value==="grid"}]),onClick:e[12]||(e[12]=o=>k.value="grid")},[...e[23]||(e[23]=[t("i",{class:"fas fa-th"},null,-1)])],2),t("button",{type:"button",class:i(["view-btn",{active:k.value==="list"}]),onClick:e[13]||(e[13]=o=>k.value="list")},[...e[24]||(e[24]=[t("i",{class:"fas fa-list"},null,-1)])],2)]),t("button",{type:"button",class:"btn btn-primary btn-large",onClick:at},[...e[25]||(e[25]=[t("i",{class:"fas fa-play"},null,-1),I(" Watch Random Show ",-1)])])])])]),t("section",Yt,[e[31]||(e[31]=t("div",{class:"section-header"},[t("h2",null,[t("i",{class:"fas fa-th"}),I(" All Videos")])],-1)),p(t("div",Jt,[(c(!0),v(U,null,Z(C.value,o=>(c(),v("div",{key:o.id,class:i(["show-card",{"now-playing":l.value&&l.value.id===o.id}]),onClick:g=>S(o)},[t("div",Xt,[t("img",{src:o.thumbnail||"/static/img/default-cover.jpg",alt:o.title,loading:"lazy",decoding:"async",class:"image-placeholder"},null,8,Zt),t("div",te,[t("button",{type:"button",class:"play-btn",onClick:y(g=>S(o),["stop"])},[...e[26]||(e[26]=[t("i",{class:"fas fa-play"},null,-1)])],8,ee),t("div",se,[t("button",{type:"button",class:"action-btn view-solo-mini-btn",title:"View Solo",onClick:y(g=>E(o),["stop"])},[...e[27]||(e[27]=[t("i",{class:"fas fa-external-link-alt"},null,-1)])],8,oe),t("button",{type:"button",class:i(["action-btn bm-btn",{bookmarked:n(o)}]),"aria-pressed":n(o),title:"Bookmark",onClick:y(g=>F(o),["stop"])},[t("i",{class:i(n(o)?"fas fa-bookmark":"far fa-bookmark")},null,2),t("span",ae,d(n(o)?"Remove bookmark":"Add bookmark"),1)],10,le)])])]),t("div",ie,[t("h4",null,d(o.title),1),t("p",ne,d(o.host),1)])],10,Ot))),128))],512),[[f,k.value==="grid"]]),p(t("div",de,[e[30]||(e[30]=ct('<div class="list-header" data-v-25dbc046><span class="col-thumbnail" data-v-25dbc046>Thumbnail</span><span class="col-title" data-v-25dbc046>Title</span><span class="col-host" data-v-25dbc046>Host</span><span class="col-actions" data-v-25dbc046>Actions</span></div>',1)),t("div",re,[(c(!0),v(U,null,Z(C.value,o=>(c(),v("div",{key:o.id,class:i(["list-item",{"now-playing":l.value&&l.value.id===o.id}]),onClick:g=>S(o)},[t("div",ce,[t("img",{src:o.thumbnail||"/static/img/default-cover.jpg",alt:o.title,loading:"lazy",decoding:"async",class:"image-placeholder"},null,8,ve),e[28]||(e[28]=t("div",{class:"play-overlay"},[t("i",{class:"fas fa-play"})],-1))]),t("div",pe,[t("h4",null,d(o.title),1),t("p",null,d((o.description||"").substring(0,100))+d((o.description||"").length>100?"...":""),1)]),t("span",be,d(o.host),1),t("div",fe,[t("button",{type:"button",class:"action-btn view-solo-mini-btn",title:"View Solo",onClick:y(g=>E(o),["stop"])},[...e[29]||(e[29]=[t("i",{class:"fas fa-external-link-alt"},null,-1),t("span",{class:"sr-only"},"View Solo",-1)])],8,me),t("button",{type:"button",class:i(["action-btn bm-btn",{bookmarked:n(o)}]),"aria-pressed":n(o),title:"Bookmark",onClick:y(g=>F(o),["stop"])},[t("i",{class:i(n(o)?"fas fa-bookmark":"far fa-bookmark")},null,2),t("span",ke,d(n(o)?"Remove bookmark":"Add bookmark"),1)],10,ye)])],10,ue))),128))])],512),[[f,k.value==="list"]])]),p(t("section",he,[...e[32]||(e[32]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading videos...",-1)])],512),[[f,$.value]]),p(t("section",_e,[t("div",{class:"empty-content"},[e[33]||(e[33]=t("i",{class:"fas fa-play-circle"},null,-1)),e[34]||(e[34]=t("h3",null,"No videos found",-1)),e[35]||(e[35]=t("p",null,"Try adjusting your search or filters",-1)),t("button",{type:"button",class:"btn btn-primary",onClick:et},"Clear Filters")])],512),[[f,!$.value&&C.value.length===0]])])])}}},Se=it(ge,[["__scopeId","data-v-25dbc046"]]);export{Se as default};
