import{u as C,z as S,o as B,a as $,c as i,d as l,e as s,t as c,i as n,f as y,B as r,n as v,F as N,r as P,G as V,H as z,m as M,q as D,h as E}from"./index-B9CI7FIP.js";const F={key:0,class:"podcast-show-page"},L={class:"podcast-show-hero"},T=["src","alt"],j={class:"podcast-show-hero-meta"},q={class:"podcast-show-hero-title"},Q={key:0,class:"podcast-show-hero-desc"},G={class:"podcast-show-hero-actions"},H={class:"podcasts-section",style:{"margin-top":"16px"}},R={class:"podcasts-section-header"},A={class:"queue-count-badge"},I={class:"episode-list"},J=["onClick"],K=["src","alt"],O={class:"episode-meta"},U={class:"episode-title"},W={class:"episode-subtitle"},X={key:0,class:"episode-time"},Y={key:1,class:"episode-dot"},Z={key:2,class:"episode-time"},ss={key:0,class:"episode-desc"},ts={class:"episode-actions"},es=["onClick"],os={key:0,class:"podcasts-section",style:{"margin-top":"16px"}},as={key:1,class:"podcast-show-page"},cs={__name:"PodcastDetailView",setup(is){const g=z(),u=C(),h=S(),a=M(null),d=D(()=>a.value?(a.value.episodes||[]).map(e=>({...e,id:e.id||e.key||`${a.value.slug}-${e.title}`,artist:a.value.title,cover_art:e.cover_art||e.artwork||a.value.artwork,audio_url:e.audio_url||e.url||""})):[]);function f(e){if(!e)return"";const o=Math.floor(e/60),t=Math.floor(e%60);return`${o}:${t.toString().padStart(2,"0")}`}function w(e,o){return e?e.length>o?e.slice(0,o)+"...":e:""}function b(){d.value.length&&u.setQueue(d.value,0)}function _(e){u.setQueue(d.value,e)}return B(async()=>{const e=g.params.slug,t=(await $("/api/podcasts").catch(()=>({shows:[]}))).shows||[];a.value=t.find(p=>p.slug===e)||null}),(e,o)=>a.value?(i(),l("div",F,[s("section",L,[s("img",{class:"podcast-show-hero-art",src:a.value.artwork||"/static/img/default-cover.jpg",alt:a.value.title},null,8,T),s("div",j,[o[2]||(o[2]=s("div",{class:"podcast-show-hero-kicker"},"Podcast",-1)),s("h1",q,c(a.value.title),1),a.value.description?(i(),l("p",Q,c(a.value.description),1)):n("",!0),s("div",G,[s("button",{class:"podcast-cta",onClick:b},[...o[1]||(o[1]=[s("i",{class:"fas fa-play"},null,-1),y(" Play Latest ",-1)])]),s("button",{class:"podcast-cta secondary",onClick:o[0]||(o[0]=t=>r(h).toggle({...a.value,_type:"podcast"}))},[s("i",{class:v(r(h).isBookmarked(a.value)?"fas fa-bookmark":"far fa-bookmark")},null,2),y(" "+c(r(h).isBookmarked(a.value)?"Saved":"Save"),1)])])])]),s("section",H,[s("div",R,[o[3]||(o[3]=s("h2",null,"Episodes",-1)),s("span",A,c(d.value.length),1)]),s("div",I,[(i(!0),l(N,null,P(d.value,(t,p)=>{var k,m;return i(),l("article",{key:t.id||t.key||p,class:v(["episode-row",{playing:((k=r(u).currentTrack)==null?void 0:k.id)===(t.id||t.key)}]),onClick:x=>_(p)},[s("img",{class:"episode-art",src:t.cover_art||t.artwork||a.value.artwork||"/static/img/default-cover.jpg",alt:t.title,loading:"lazy"},null,8,K),s("div",O,[s("div",U,c(t.title),1),s("div",W,[t.date?(i(),l("span",X,c(t.date),1)):n("",!0),t.date&&t.duration_seconds?(i(),l("span",Y," Â· ")):n("",!0),t.duration_seconds?(i(),l("span",Z,c(f(t.duration_seconds)),1)):n("",!0)]),t.description?(i(),l("div",ss,c(w(t.description,120)),1)):n("",!0)]),s("div",ts,[s("button",{class:"episode-btn",onClick:E(x=>_(p),["stop"])},[s("i",{class:v(((m=r(u).currentTrack)==null?void 0:m.id)===(t.id||t.key)&&r(u).isPlaying?"fas fa-pause":"fas fa-play")},null,2)],8,es)])],10,J)}),128))])]),d.value.length?n("",!0):(i(),l("section",os,[...o[4]||(o[4]=[s("div",{class:"empty-state",style:{"text-align":"center",padding:"40px 20px",color:"rgba(255,255,255,0.5)"}},[s("i",{class:"fas fa-podcast",style:{"font-size":"48px","margin-bottom":"16px",display:"block"}}),s("p",null,"No episodes available yet")],-1)])]))])):(i(),l("div",as,[...o[5]||(o[5]=[V('<section class="podcast-show-hero"><div class="podcast-show-hero-art skeleton" style="aspect-ratio:1;width:100%;"></div><div class="podcast-show-hero-meta"><div class="skeleton" style="height:14px;width:30%;margin-bottom:8px;"></div><div class="skeleton" style="height:24px;width:60%;margin-bottom:8px;"></div><div class="skeleton" style="height:14px;width:80%;"></div></div></section>',1)])]))}};export{cs as default};
