import{_ as z,N as B,o as I,c as a,d as r,e as t,l as d,t as l,x,k as M,F as m,f as w,w as P,v as R,G as O,A as E,E as p,m as u,C as S}from"./index-CtxnXRQ6.js";const L={class:"relative min-h-screen bg-black text-white overflow-hidden font-sans selection:bg-purple-500 selection:text-white"},q={class:"relative z-10 container mx-auto p-6"},H={class:"mb-12 flex justify-between items-center"},J={key:0,class:"text-sm text-purple-300 animate-pulse bg-purple-900/30 px-3 py-1 rounded-full border border-purple-500/30"},G={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-12"},W={class:"glass-card p-6 group hover:bg-white/5 transition duration-300"},K={class:"text-3xl font-bold text-white group-hover:scale-105 transition-transform origin-left"},Q={class:"glass-card p-6 group hover:bg-white/5 transition duration-300"},X={class:"text-3xl font-bold text-white group-hover:scale-105 transition-transform origin-left"},Y={class:"glass-card p-6 group hover:bg-white/5 transition duration-300"},Z={class:"text-3xl font-bold text-white group-hover:scale-105 transition-transform origin-left"},tt={class:"glass-card p-6 group hover:bg-white/5 transition duration-300"},et={class:"text-3xl font-bold text-white group-hover:scale-105 transition-transform origin-left"},st={class:"glass-card p-6 group hover:bg-white/5 transition duration-300"},ot={class:"text-3xl font-bold text-white group-hover:scale-105 transition-transform origin-left"},at={class:"flex space-x-2 mb-8 p-1 bg-white/5 backdrop-blur-md rounded-xl w-fit border border-white/10"},rt={key:0,class:"ml-2 bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded-full"},lt={key:0,class:"space-y-4"},it={class:"flex-1"},nt={class:"font-medium text-white group-hover:text-purple-200 transition-colors"},dt={class:"flex items-center gap-2 mt-1"},pt={class:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-white/5 border border-white/10 text-white/50"},ut={class:"text-xs text-purple-200/40"},ct={key:0,class:"text-purple-200/40 text-center py-20 italic"},ht={key:1,class:"space-y-6"},xt={class:"relative flex gap-4"},bt={class:"glass-card overflow-hidden"},gt={class:"w-full text-left border-collapse"},vt={class:"p-4 text-white/30 font-mono text-sm"},mt={class:"p-4 text-white/90"},wt={class:"p-4 text-white/70"},ft={class:"p-4 text-white/40 text-sm"},_t={class:"p-4"},yt={key:0,class:"text-red-400 font-bold text-xs uppercase tracking-wider bg-red-900/20 px-2 py-1 rounded"},kt={key:1,class:"text-green-400 text-xs uppercase tracking-wider bg-green-900/20 px-2 py-1 rounded"},Ct={class:"p-4"},At={key:0,class:"bg-purple-500/20 border border-purple-500/30 text-purple-200 text-xs px-2 py-1 rounded shadow-[0_0_10px_rgba(168,85,247,0.2)]"},Dt={key:1,class:"text-white/20 text-xs"},$t={class:"p-4"},St=["onClick"],Tt={key:2,class:"space-y-4"},Nt={class:"flex justify-between items-start"},Ut={class:"font-bold text-lg text-white"},jt={class:"text-purple-200/70 mt-2"},Ft={class:"text-xs text-purple-200/30 mt-4 font-mono"},Vt={class:"flex space-x-3"},zt=["onClick"],Bt=["onClick"],It={key:0,class:"text-purple-200/40 text-center py-20 italic"},Mt={key:3,class:"space-y-6"},Pt={class:"glass-card p-8"},Rt={key:0,class:"text-purple-200/50"},Ot={class:"space-y-4"},Et={class:"flex mb-2 items-center justify-between z-10 relative"},Lt={class:"text-xs font-semibold inline-block py-1 px-3 uppercase rounded bg-black/40 text-purple-200 border border-white/10 backdrop-blur-sm"},qt={class:"text-right"},Ht={class:"text-xs font-mono text-purple-200/80"},Jt={class:"overflow-hidden h-3 mb-4 text-xs flex rounded-full bg-white/5 border border-white/5 relative"},Gt={__name:"AdminDashboardView",setup(Wt){const{user:T,isLoggedIn:N}=B(),A=E(),f=u(!1),c=u({}),_=u([]),y=u([]),h=u([]),b=u([]),k=u(""),i=u("activity"),U=o=>({signup:"bg-blue-500",tip:"bg-green-500",purchase:"bg-yellow-500",feedback:"bg-purple-500",claim:"bg-red-500"})[o]||"bg-gray-500",C=o=>o?new Date(o).toLocaleString():"-",j=async()=>{f.value=!0;try{const[o,e,n,g,s]=await Promise.all([p("/api/admin/stats"),p("/api/admin/activity"),p("/api/admin/users"),p("/api/admin/actions"),p("/api/admin/heatmap")]);c.value=o,_.value=e,y.value=n,h.value=g,b.value=s}catch(o){console.error("Failed to fetch admin data",o)}finally{f.value=!1}},F=async()=>{try{const o=await p(`/api/admin/users?q=${k.value}`);y.value=o}catch(o){console.error(o)}},D=async(o,e)=>{if(confirm(`Are you sure you want to ${e} this request?`))try{await p(`/api/admin/actions/claim/${o}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e})});const n=await p("/api/admin/actions");h.value=n}catch(n){alert("Action failed: "+n.message)}},V=async o=>{if(confirm(`Are you sure you want to ${o.disabled?"enable":"disable"} this user?`))try{const e=await p(`/api/admin/users/${o.id}/toggle_status`,{method:"POST"});e.ok&&(o.disabled=e.disabled)}catch(e){alert("Failed to update status: "+e.message)}},$=o=>{if(!b.value.length)return 0;const e=Math.max(...b.value.map(n=>n.count));return o/e*100};return I(()=>{var o;if(!N.value){A.push("/login");return}if(!((o=T.value)!=null&&o.is_admin)){A.push("/");return}j()}),(o,e)=>{var n,g;return a(),r("div",L,[e[20]||(e[20]=t("div",{class:"fixed inset-0 z-0 pointer-events-none"},[t("div",{class:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-purple-900/40 rounded-full blur-[120px] animate-pulse"}),t("div",{class:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-blue-900/30 rounded-full blur-[120px] animate-pulse",style:{"animation-delay":"2s"}}),t("div",{class:"absolute top-[20%] right-[20%] w-[300px] h-[300px] bg-pink-900/20 rounded-full blur-[100px] animate-bounce",style:{"animation-duration":"10s"}})],-1)),t("div",q,[t("header",H,[e[5]||(e[5]=t("div",null,[t("h1",{class:"text-4xl font-bold bg-gradient-to-r from-white via-purple-200 to-purple-400 bg-clip-text text-transparent drop-shadow-sm"}," Admin Dashboard "),t("p",{class:"text-purple-200/60 text-sm mt-1"},"Platform Overview & Management")],-1)),f.value?(a(),r("div",J," Refreshing data... ")):d("",!0)]),t("div",G,[t("div",W,[e[6]||(e[6]=t("h3",{class:"text-purple-200/60 text-xs font-bold uppercase tracking-wider mb-2"},"Users",-1)),t("p",K,l(c.value.users),1),e[7]||(e[7]=t("div",{class:"h-1 w-full bg-gray-700/50 mt-4 rounded-full overflow-hidden"},[t("div",{class:"h-full bg-purple-500 w-[70%]"})],-1))]),t("div",Q,[e[8]||(e[8]=t("h3",{class:"text-purple-200/60 text-xs font-bold uppercase tracking-wider mb-2"},"Total Tips",-1)),t("p",X,"$"+l((n=c.value.tip_total)==null?void 0:n.toFixed(2)),1),e[9]||(e[9]=t("div",{class:"h-1 w-full bg-gray-700/50 mt-4 rounded-full overflow-hidden"},[t("div",{class:"h-full bg-green-500 w-[45%]"})],-1))]),t("div",Y,[e[10]||(e[10]=t("h3",{class:"text-purple-200/60 text-xs font-bold uppercase tracking-wider mb-2"},"Tips Count",-1)),t("p",Z,l(c.value.tips),1),e[11]||(e[11]=t("div",{class:"h-1 w-full bg-gray-700/50 mt-4 rounded-full overflow-hidden"},[t("div",{class:"h-full bg-blue-500 w-[30%]"})],-1))]),t("div",tt,[e[12]||(e[12]=t("h3",{class:"text-purple-200/60 text-xs font-bold uppercase tracking-wider mb-2"},"Revenue",-1)),t("p",et,"$"+l((g=c.value.revenue)==null?void 0:g.toFixed(2)),1),e[13]||(e[13]=t("div",{class:"h-1 w-full bg-gray-700/50 mt-4 rounded-full overflow-hidden"},[t("div",{class:"h-full bg-yellow-500 w-[60%]"})],-1))]),t("div",st,[e[14]||(e[14]=t("h3",{class:"text-purple-200/60 text-xs font-bold uppercase tracking-wider mb-2"},"Purchases",-1)),t("p",ot,l(c.value.purchases),1),e[15]||(e[15]=t("div",{class:"h-1 w-full bg-gray-700/50 mt-4 rounded-full overflow-hidden"},[t("div",{class:"h-full bg-red-500 w-[25%]"})],-1))])]),t("div",at,[t("button",{onClick:e[0]||(e[0]=s=>i.value="activity"),class:x(["px-6 py-2 rounded-lg text-sm font-medium transition-all duration-300",i.value==="activity"?"bg-purple-600 text-white shadow-lg shadow-purple-900/50":"text-purple-200/60 hover:text-white hover:bg-white/5"])}," Activity Feed ",2),t("button",{onClick:e[1]||(e[1]=s=>i.value="users"),class:x(["px-6 py-2 rounded-lg text-sm font-medium transition-all duration-300",i.value==="users"?"bg-purple-600 text-white shadow-lg shadow-purple-900/50":"text-purple-200/60 hover:text-white hover:bg-white/5"])}," Users ",2),t("button",{onClick:e[2]||(e[2]=s=>i.value="actions"),class:x(["px-6 py-2 rounded-lg text-sm font-medium transition-all duration-300",i.value==="actions"?"bg-purple-600 text-white shadow-lg shadow-purple-900/50":"text-purple-200/60 hover:text-white hover:bg-white/5"])},[e[16]||(e[16]=M(" Action Items ",-1)),h.value.length?(a(),r("span",rt,l(h.value.length),1)):d("",!0)],2),t("button",{onClick:e[3]||(e[3]=s=>i.value="analytics"),class:x(["px-6 py-2 rounded-lg text-sm font-medium transition-all duration-300",i.value==="analytics"?"bg-purple-600 text-white shadow-lg shadow-purple-900/50":"text-purple-200/60 hover:text-white hover:bg-white/5"])}," Analytics ",2)]),i.value==="activity"?(a(),r("div",lt,[(a(!0),r(m,null,w(_.value,(s,v)=>(a(),r("div",{key:v,class:"glass-card item-card p-4 flex items-center group"},[t("div",{class:x(["w-1.5 h-12 rounded-full mr-5 shadow-[0_0_10px_rgba(0,0,0,0.5)]",U(s.type)])},null,2),t("div",it,[t("p",nt,l(s.text),1),t("div",dt,[t("span",pt,l(s.type.toUpperCase()),1),t("p",ut,l(C(s.date)),1)])])]))),128)),_.value.length===0?(a(),r("div",ct,"No recent activity detected in the ether.")):d("",!0)])):d("",!0),i.value==="users"?(a(),r("div",ht,[t("div",xt,[P(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>k.value=s),onInput:F,placeholder:"Search users...",class:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-purple-200/20 focus:outline-none focus:border-purple-500/50 focus:bg-white/10 transition-all"},null,544),[[R,k.value]]),e[17]||(e[17]=O('<a href="/api/admin/users/export" target="_blank" class="bg-gray-800 hover:bg-gray-700 text-white px-6 py-3 rounded-xl border border-white/10 transition flex items-center whitespace-nowrap" data-v-635abed4><span class="mr-2" data-v-635abed4>⬇️</span> CSV </a><div class="absolute right-[120px] top-3.5 text-purple-200/20 pointer-events-none" data-v-635abed4><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-635abed4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" data-v-635abed4></path></svg></div>',2))]),t("div",bt,[t("table",gt,[e[18]||(e[18]=t("thead",null,[t("tr",{class:"text-purple-200/40 border-b border-white/5"},[t("th",{class:"p-4 font-medium text-xs uppercase tracking-wider"},"ID"),t("th",{class:"p-4 font-medium text-xs uppercase tracking-wider"},"Email"),t("th",{class:"p-4 font-medium text-xs uppercase tracking-wider"},"Username"),t("th",{class:"p-4 font-medium text-xs uppercase tracking-wider"},"Joined"),t("th",{class:"p-4 font-medium text-xs uppercase tracking-wider"},"Status"),t("th",{class:"p-4 font-medium text-xs uppercase tracking-wider"},"Role"),t("th",{class:"p-4 font-medium text-xs uppercase tracking-wider"},"Actions")])],-1)),t("tbody",null,[(a(!0),r(m,null,w(y.value,s=>(a(),r("tr",{key:s.id,class:"border-b border-white/5 hover:bg-white/5 transition-colors"},[t("td",vt,l(s.id),1),t("td",mt,l(s.email),1),t("td",wt,l(s.username||"-"),1),t("td",ft,l(C(s.created_at)),1),t("td",_t,[s.disabled?(a(),r("span",yt,"Banned")):(a(),r("span",kt,"Active"))]),t("td",Ct,[s.is_admin?(a(),r("span",At,"Admin")):(a(),r("span",Dt,"User"))]),t("td",$t,[s.is_admin?d("",!0):(a(),r("button",{key:0,onClick:v=>V(s),class:x(["px-3 py-1 rounded text-xs font-bold border transition-all",s.disabled?"bg-green-500/20 border-green-500/50 text-green-200 hover:bg-green-500/40":"bg-red-500/20 border-red-500/50 text-red-200 hover:bg-red-500/40"])},l(s.disabled?"Unban":"Ban"),11,St))])]))),128))])])])])):d("",!0),i.value==="actions"?(a(),r("div",Tt,[(a(!0),r(m,null,w(h.value,s=>(a(),r("div",{key:s.id,class:"glass-card p-6 border-l-4 border-l-purple-500"},[t("div",Nt,[t("div",null,[t("h3",Ut,l(s.title),1),t("p",jt,l(s.description),1),t("p",Ft,"ID: "+l(s.id)+" • Created: "+l(C(s.created_at)),1)]),t("div",Vt,[t("button",{onClick:v=>D(s.id,"approve"),class:"bg-green-500/20 hover:bg-green-500/40 border border-green-500/50 text-green-100 px-6 py-2 rounded-lg text-sm transition-all hover:scale-105"}," Approve ",8,zt),t("button",{onClick:v=>D(s.id,"reject"),class:"bg-red-500/20 hover:bg-red-500/40 border border-red-500/50 text-red-100 px-6 py-2 rounded-lg text-sm transition-all hover:scale-105"}," Reject ",8,Bt)])])]))),128)),h.value.length===0?(a(),r("div",It,"No pending actions. The ether is calm.")):d("",!0)])):d("",!0),i.value==="analytics"?(a(),r("div",Mt,[t("div",Pt,[e[19]||(e[19]=t("h3",{class:"text-xl font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-purple-200 to-white"},"Traffic Heatmap",-1)),b.value.length===0?(a(),r("div",Rt,"No data yet. Browse the app to generate data!")):d("",!0),t("div",Ot,[(a(!0),r(m,null,w(b.value,s=>(a(),r("div",{key:s.path,class:"relative group"},[t("div",Et,[t("div",null,[t("span",Lt,l(s.path||"/"),1)]),t("div",qt,[t("span",Ht,l(s.count)+" views ",1)])]),t("div",Jt,[t("div",{style:S({width:$(s.count)+"%"}),class:"absolute inset-0 bg-purple-500/20 blur-md"},null,4),t("div",{style:S({width:$(s.count)+"%"}),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-gradient-to-r from-purple-600 to-pink-500 relative z-10 transition-all duration-1000 ease-out"},null,4)])]))),128))])])])):d("",!0)])])}}},Qt=z(Gt,[["__scopeId","data-v-635abed4"]]);export{Qt as default};
