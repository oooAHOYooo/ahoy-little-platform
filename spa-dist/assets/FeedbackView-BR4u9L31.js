import{_ as v,c as d,d as u,e,k as i,y as k,w as m,C as y,v as g,s as h,t as p,m as c,U as w,E as S}from"./index-DcQ9GdWE.js";const F={class:"feedback-page"},x={class:"feedback-container"},C={class:"feedback-content"},E={key:0,class:"neu-card"},_={class:"form-group"},T={class:"form-group"},V={class:"feedback-footer"},B=["disabled"],M={key:1,class:"neu-card feedback-success"},P={class:"claim-code-card"},A={class:"claim-code"},N={__name:"FeedbackView",setup(U){const l=c(!1),o=c(!1),n=c(""),a=w({type:"general",message:""});async function f(){if(a.message.trim()){o.value=!0;try{const t=await S("/api/feedback/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(t.success)n.value=t.claim_code,l.value=!0,window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Feedback submitted! Thank you.",type:"success"}}));else throw new Error(t.error||"Submission failed")}catch(t){console.error("Feedback error:",t),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Failed to submit feedback. Please try again.",type:"error"}}))}finally{o.value=!1}}}function b(){l.value=!1,a.message="",a.type="general",n.value=""}return(t,s)=>(d(),u("div",F,[e("div",x,[s[13]||(s[13]=e("section",{class:"podcasts-hero feedback-header"},[e("div",{class:"podcasts-hero-inner"},[e("h1",null,[e("i",{class:"fas fa-comment","aria-hidden":"true"}),i(" Feedback ")]),e("p",null,"Help us improve Ahoy for the upcoming Poetry Event!")])],-1)),e("div",C,[l.value?(d(),u("div",M,[s[10]||(s[10]=e("div",{class:"success-icon"},[e("i",{class:"fas fa-check-circle"})],-1)),s[11]||(s[11]=e("h2",null,"Thank you!",-1)),s[12]||(s[12]=e("p",null,"Your feedback helps us make Ahoy better.",-1)),e("div",P,[s[7]||(s[7]=e("p",{class:"claim-label"},"Sticker Claim Code",-1)),e("div",A,p(n.value),1),s[8]||(s[8]=e("p",{class:"claim-instructions"}," Show this code at the merch table during the Poetry Event to claim your sticker! ",-1))]),e("button",{class:"neu-btn neu-btn-secondary",onClick:b},[...s[9]||(s[9]=[e("i",{class:"fas fa-plus"},null,-1),i(" Send more feedback ",-1)])])])):(d(),u("div",E,[s[6]||(s[6]=e("h2",null,[e("i",{class:"fas fa-edit"}),i(" Share your thoughts")],-1)),e("form",{onSubmit:k(f,["prevent"])},[e("div",_,[s[3]||(s[3]=e("label",{for:"feedback-type"},"What's this about?",-1)),m(e("select",{id:"feedback-type","onUpdate:modelValue":s[0]||(s[0]=r=>a.type=r),class:"neu-select"},[...s[2]||(s[2]=[e("option",{value:"general"},"General Feedback",-1),e("option",{value:"bug"},"Report a Bug",-1),e("option",{value:"feature"},"Feature Request",-1),e("option",{value:"artist"},"Artist Suggestion",-1)])],512),[[y,a.type]])]),e("div",T,[s[4]||(s[4]=e("label",{for:"feedback-message"},"Message",-1)),m(e("textarea",{id:"feedback-message","onUpdate:modelValue":s[1]||(s[1]=r=>a.message=r),placeholder:"Tell us what's on your mind... (max 2000 chars)",maxlength:"2000",class:"neu-textarea",required:""},null,512),[[g,a.message]])]),e("div",V,[s[5]||(s[5]=e("p",{class:"reward-hint"},[e("i",{class:"fas fa-sparkles"}),i(" Submit feedback to get a sticker claim code! ")],-1)),e("button",{type:"submit",class:"neu-btn neu-btn-primary submit-btn",disabled:o.value},[e("i",{class:h(["fas",o.value?"fa-spinner fa-spin":"fa-paper-plane"])},null,2),i(" "+p(o.value?"Sending...":"Submit Feedback"),1)],8,B)])],32)]))])])]))}},D=v(N,[["__scopeId","data-v-c05067a1"]]);export{D as default};
