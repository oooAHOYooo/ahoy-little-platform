import{u as N,o as $,a as l,c as r,b as s,t as c,d as k,n as u,f as _,i as d,F as D,r as F,p as j,g as S,q as z,m as b,s as Q,v as R,x as q}from"./index-BdyQCXb8.js";import{a as A}from"./useApi-BCqoWMHl.js";import{u as E}from"./useBookmarks-Bk63fjhg.js";const H={key:0,class:"music-container"},I={class:"podcast-show-hero"},L=["src","alt"],G={class:"podcast-show-hero-meta"},J={class:"podcast-show-hero-title"},K={key:0,class:"podcast-show-hero-desc"},O={key:1,class:"episode-subtitle"},U={class:"podcast-show-hero-actions"},W={key:0,class:"podcasts-section"},X={class:"podcasts-section-header"},Y={class:"episode-list"},Z=["onClick"],ss=["src","alt"],as={class:"episode-meta"},ts={class:"episode-title"},es={class:"episode-show"},os={class:"episode-actions"},is=["onClick"],cs={key:1,class:"music-container"},us={__name:"MusicDetailView",setup(ls){const C=z(),i=N(),h=E(),{shareTrack:T}=R(),m=Q(),a=S(null),n=S([]),p=b(()=>a.value?n.value.filter(t=>t.artist===a.value.artist&&t.id!==a.value.id):[]),v=b(()=>{var t,e;return((t=i.currentTrack)==null?void 0:t.id)===((e=a.value)==null?void 0:e.id)&&i.isPlaying});function x(t){if(!t)return"";const e=Math.floor(t/60),o=Math.floor(t%60);return`${e}:${o.toString().padStart(2,"0")}`}function B(){v.value?i.pause():(i.play(a.value),i.setQueue(n.value,n.value.findIndex(t=>t.id===a.value.id)))}function M(){m.onBookmark(),h.toggle({...a.value,_type:"track"})}function P(){m.light(),T(a.value)}function f(t){i.setQueue(p.value,t)}return $(async()=>{const t=await A("/api/music").catch(()=>({tracks:[]}));n.value=t.tracks||[];const e=C.params.id;a.value=n.value.find(o=>String(o.id)===String(e))||null}),(t,e)=>a.value?(l(),r("div",H,[s("section",I,[s("img",{class:"podcast-show-hero-art",src:a.value.cover_art||"/static/img/default-cover.jpg",alt:a.value.title},null,8,L),s("div",G,[e[1]||(e[1]=s("div",{class:"podcast-show-hero-kicker"},"Track",-1)),s("h1",J,c(a.value.title),1),a.value.artist?(l(),r("p",K,c(a.value.artist),1)):k("",!0),a.value.duration_seconds?(l(),r("p",O,c(x(a.value.duration_seconds)),1)):k("",!0),s("div",U,[s("button",{class:"podcast-cta",onClick:B},[s("i",{class:u(v.value?"fas fa-pause":"fas fa-play")},null,2),_(" "+c(v.value?"Pause":"Play"),1)]),s("button",{class:"podcast-cta secondary",onClick:M},[s("i",{class:u(d(h).isBookmarked(a.value)?"fas fa-bookmark":"far fa-bookmark")},null,2),_(" "+c(d(h).isBookmarked(a.value)?"Saved":"Save"),1)]),s("button",{class:"podcast-cta secondary",onClick:P},[...e[0]||(e[0]=[s("i",{class:"fas fa-share-alt"},null,-1),_(" Share ",-1)])])])])]),p.value.length?(l(),r("section",W,[s("div",X,[s("h2",null,"More from "+c(a.value.artist),1)]),s("div",Y,[(l(!0),r(D,null,F(p.value,(o,y)=>{var g,w;return l(),r("article",{key:o.id,class:u(["episode-row",{playing:((g=d(i).currentTrack)==null?void 0:g.id)===o.id}]),onClick:V=>f(y)},[s("img",{class:"episode-art",src:o.cover_art||"/static/img/default-cover.jpg",alt:o.title,loading:"lazy"},null,8,ss),s("div",as,[s("div",ts,c(o.title),1),s("div",es,c(o.artist),1)]),s("div",os,[s("button",{class:"episode-btn",onClick:q(V=>f(y),["stop"])},[s("i",{class:u(((w=d(i).currentTrack)==null?void 0:w.id)===o.id&&d(i).isPlaying?"fas fa-pause":"fas fa-play")},null,2)],8,is)])],10,Z)}),128))])])):k("",!0)])):(l(),r("div",cs,[...e[2]||(e[2]=[j('<section class="podcast-show-hero"><div class="podcast-show-hero-art skeleton" style="aspect-ratio:1;width:100%;"></div><div class="podcast-show-hero-meta"><div class="skeleton" style="height:14px;width:40%;margin-bottom:8px;"></div><div class="skeleton" style="height:24px;width:70%;margin-bottom:8px;"></div><div class="skeleton" style="height:14px;width:50%;"></div></div></section>',1)])]))}};export{us as default};
