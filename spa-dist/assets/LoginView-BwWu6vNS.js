import{_ as k,m as p,w as x,c as o,d as l,e as s,n as _,h as C,l as m,x as y,i as c,t as g,P as V,j as E,k as L,f as U,B as i,I as q,p as A,L as B,s as I}from"./index-Qvb-IFK5.js";const N={class:"auth-page"},S={class:"auth-card"},D={class:"auth-tabs"},M={key:0,class:"auth-field"},T={class:"auth-field"},$={for:"email"},z=["type","placeholder","autocomplete"],P={class:"auth-field"},R=["placeholder"],j={key:1,class:"auth-hint"},F={key:2,class:"auth-forgot"},G={key:3,class:"auth-error"},W=["disabled"],H={key:0,class:"fas fa-spinner fa-spin"},J={key:1},K={__name:"LoginView",setup(O){const f=I(),h=q(),n=B(),t=p(h.query.signup?"signup":"login");x(()=>h.query.signup,u=>{u&&(t.value="signup")});const r=p(""),d=p(""),v=p("");async function w(){let u;t.value==="login"?u=await n.login(r.value,d.value):u=await n.signup(r.value,d.value,v.value),u.success&&(window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:t.value==="login"?"Welcome back!":"Account created!",type:"success"}})),f.push("/"))}return(u,e)=>{const b=A("router-link");return o(),l("div",N,[s("div",S,[e[9]||(e[9]=s("div",{class:"auth-logo"},[s("i",{class:"fas fa-anchor",style:{"font-size":"36px",color:"var(--accent-primary,#6ddcff)"}}),s("h1",null,"Ahoy")],-1)),s("div",D,[s("button",{class:_({active:t.value==="login"}),onClick:e[0]||(e[0]=a=>t.value="login")},"Log In",2),s("button",{class:_({active:t.value==="signup"}),onClick:e[1]||(e[1]=a=>t.value="signup")},"Sign Up",2)]),s("form",{onSubmit:C(w,["prevent"]),class:"auth-form"},[t.value==="signup"?(o(),l("div",M,[e[6]||(e[6]=s("label",{for:"username"},"Username",-1)),m(s("input",{id:"username","onUpdate:modelValue":e[2]||(e[2]=a=>v.value=a),type:"text",placeholder:"your name",autocomplete:"username"},null,512),[[y,v.value]])])):c("",!0),s("div",T,[s("label",$,g(t.value==="login"?"Email or username":"Email"),1),m(s("input",{id:"email","onUpdate:modelValue":e[3]||(e[3]=a=>r.value=a),type:t.value==="login"?"text":"email",placeholder:t.value==="login"?"e.g. alexadmin":"you@example.com",autocomplete:t.value==="login"?"username":"email",required:""},null,8,z),[[V,r.value]])]),s("div",P,[e[7]||(e[7]=s("label",{for:"password"},"Password",-1)),m(s("input",{id:"password","onUpdate:modelValue":e[4]||(e[4]=a=>d.value=a),type:"password",placeholder:t.value==="login"?"e.g. alexadmin":"••••••••",autocomplete:"current-password",required:""},null,8,R),[[y,d.value]])]),t.value==="login"?(o(),l("p",j,"Test account: alexadmin / alexadmin")):c("",!0),t.value==="login"?(o(),l("p",F,[E(b,{to:"/auth/forgot"},{default:L(()=>[...e[8]||(e[8]=[U("Forgot password?",-1)])]),_:1})])):c("",!0),i(n).error.value?(o(),l("div",G,g(i(n).error.value),1)):c("",!0),s("button",{type:"submit",class:"auth-submit",disabled:i(n).loading.value},[i(n).loading.value?(o(),l("i",H)):(o(),l("span",J,g(t.value==="login"?"Log In":"Create Account"),1))],8,W)],32),s("button",{class:"auth-skip",onClick:e[5]||(e[5]=a=>i(f).push("/"))}," Continue as Guest ")])])}}},X=k(K,[["__scopeId","data-v-321bad58"]]);export{X as default};
