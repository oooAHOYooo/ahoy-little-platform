import{_ as Z,z as tt,o as st,a as et,w as ot,c as p,d as b,e as t,l as u,v as f,i as F,t as d,n as i,x as z,f as D,F as H,r as Q,H as lt,m as c,I as at,s as it,h as V}from"./index-DGqWHNLv.js";const nt={class:"shows-page"},dt={class:"shows-container"},rt={class:"embedded-video-section"},ut={class:"video-player-wrapper"},ct={class:"embedded-video-player"},vt=["src","poster"],pt={key:1,class:"video-embed-wrap",style:{position:"relative","padding-bottom":"56.25%",height:"0",overflow:"hidden",background:"#000"}},bt=["src"],ft={class:"video-info-overlay"},mt={class:"video-info-content"},yt={class:"video-title"},kt={class:"video-meta"},ht={class:"video-host"},_t={key:0,class:"video-type"},gt={class:"video-description"},wt={class:"video-actions-bar"},Ct=["aria-pressed","title"],St={class:"sr-only"},Vt={class:"video-placeholder"},$t={class:"unified-header shows-subheader"},xt={class:"header-content"},Bt={class:"header-title"},Mt={key:0,class:"hero-media"},Lt=["src","alt"],Rt={class:"hero-media-overlay"},Tt={class:"header-search desktop-only"},Ft={class:"search-bar"},Et={class:"header-search mobile-only"},It={class:"search-bar"},Pt={class:"header-filters"},Ut={class:"filter-tabs"},qt={class:"header-actions"},At={class:"view-options"},Nt={class:"shows-grid-section"},Wt={class:"shows-grid"},jt=["onClick"],zt={class:"show-thumbnail"},Dt=["src","alt"],Ht={class:"show-overlay"},Qt=["onClick"],Yt={class:"show-actions"},Gt=["onClick"],Jt=["aria-pressed","onClick"],Kt={class:"sr-only"},Ot={class:"show-info"},Xt={class:"show-host"},Zt={class:"shows-list"},ts={class:"list-items"},ss=["onClick"],es={class:"col-thumbnail"},os=["src","alt"],ls={class:"col-title"},as={class:"col-host"},is={class:"col-actions"},ns=["onClick"],ds=["aria-pressed","onClick"],rs={class:"sr-only"},us={class:"loading-section"},cs={class:"empty-section"},vs={__name:"ShowsView",setup(ps){const B=at(),E=it(),I=tt(),m=c([]),g=c([]),w=c(null),v=c(""),r=c("all"),y=c("grid"),$=c(!0),l=c(null),M=c(!1),x=c(null);function P(){const o=B.query.play;if(!o||!m.value.length)return;const s=m.value.find(a=>String(a.id)===String(o));s&&(l.value=s,U())}function U(){setTimeout(()=>{x.value&&(x.value.load(),x.value.play().catch(()=>{}))},100)}function L(o){return o&&(o.video_url||o.mp4_link||o.trailer_url||o.url)||""}function Y(o){if(!o)return!1;const s=o.toLowerCase();return s.endsWith(".mp4")||s.endsWith(".webm")||s.endsWith(".mov")||s.includes("/mp4")||s.startsWith("blob:")}function q(o){const s=L(o),a=s.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&]+)/);if(a)return`https://www.youtube.com/embed/${a[1]}`;const S=s.match(/vimeo\.com\/(\d+)/);return S?`https://player.vimeo.com/video/${S[1]}`:null}function k(){let o=[...m.value];const s=v.value.trim().toLowerCase();s&&(o=o.filter(a=>(a.title||"").toLowerCase().includes(s)||(a.host||"").toLowerCase().includes(s)||(a.description||"").toLowerCase().includes(s))),r.value==="video_podcast"?o=o.filter(a=>(a.tags||[]).includes("video-podcast")):r.value!=="all"&&(o=o.filter(a=>(a.type||a.category||"")===r.value)),g.value=o}function h(o){r.value=o,k()}function A(){v.value="",k()}function G(){v.value="",r.value="all",k()}function C(o){l.value=o,E.replace({path:"/shows",query:{...B.query,play:o.id}}),U(),window.scrollTo({top:0,behavior:"smooth"})}function J(){l.value&&R(l.value)}function R(o){E.push({name:"show-detail",params:{id:o.id}})}function K(){}function O(){M.value=!1}function X(){if(m.value.length){const o=m.value[Math.floor(Math.random()*m.value.length)];C(o)}}function N(o){return{type:"show",_type:"show",id:o.id,title:o.title,thumbnail:o.thumbnail,artwork:o.thumbnail}}function n(o){return o?I.isBookmarked(N(o)):!1}function T(o){o&&I.toggle(N(o))}return st(async()=>{$.value=!0;try{const s=(await et("/api/shows").catch(()=>({shows:[]}))).shows||[];m.value=s,g.value=[...s],s.length&&(w.value=s[Math.floor(Math.random()*s.length)]),k(),P()}finally{$.value=!1}}),ot(()=>B.query.play,()=>{P()}),(o,s)=>{var a,S,W,j;return p(),b("div",nt,[t("div",dt,[t("section",rt,[t("div",ut,[u(t("div",ct,[l.value&&Y(L(l.value))?(p(),b("video",{key:0,ref_key:"videoEl",ref:x,src:L(l.value),poster:l.value.thumbnail||"",controls:"",class:"embedded-video",onLoadedmetadata:K,onPlay:s[0]||(s[0]=e=>M.value=!0),onPause:s[1]||(s[1]=e=>M.value=!1),onEnded:O}," Your browser does not support the video tag. ",40,vt)):l.value&&q(l.value)?(p(),b("div",pt,[t("iframe",{src:q(l.value),style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",border:"0"},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,bt)])):F("",!0),t("div",ft,[t("div",mt,[t("h2",yt,d(((a=l.value)==null?void 0:a.title)||"Untitled"),1),t("div",kt,[t("span",ht,d(((S=l.value)==null?void 0:S.host)||""),1),(W=l.value)!=null&&W.type?(p(),b("span",_t,d(String(l.value.type||"").replace(/_/g," ")),1)):F("",!0)]),t("p",gt,d(((j=l.value)==null?void 0:j.description)||""),1)]),t("div",wt,[t("button",{type:"button",class:"action-btn view-solo-btn",title:"View Solo",onClick:J},[...s[14]||(s[14]=[t("i",{class:"fas fa-external-link-alt"},null,-1),t("span",{class:"sr-only"},"View Solo",-1)])]),t("button",{type:"button",class:i(["action-btn bookmark-btn",{bookmarked:n(l.value)}]),"aria-pressed":n(l.value),title:n(l.value)?"Remove bookmark":"Bookmark",onClick:s[2]||(s[2]=e=>T(l.value))},[t("i",{class:i(n(l.value)?"fas fa-bookmark":"far fa-bookmark")},null,2),t("span",St,d(n(l.value)?"Remove bookmark":"Bookmark"),1)],10,Ct)])])],512),[[f,l.value]]),u(t("div",Vt,[...s[15]||(s[15]=[t("div",{class:"placeholder-content"},[t("i",{class:"fas fa-play-circle"}),t("h3",null,"Select a video to play"),t("p",null,"Click on any video below to start watching")],-1)])],512),[[f,!l.value]])])]),t("section",$t,[t("div",xt,[t("div",Bt,[w.value?(p(),b("div",Mt,[t("img",{src:w.value.thumbnail||"/static/img/default-cover.jpg",alt:w.value.title,class:"hero-thumbnail image-placeholder"},null,8,Lt),t("div",Rt,[t("button",{type:"button",class:"hero-play-btn",onClick:s[3]||(s[3]=e=>C(w.value))},[...s[16]||(s[16]=[t("i",{class:"fas fa-play"},null,-1)])])])])):F("",!0),s[17]||(s[17]=t("div",{class:"title-text"},[t("h1",null,"Videos"),t("p",null,"Music videos, skate parts, short films, episodes, and more")],-1))]),t("div",Tt,[t("div",Ft,[s[19]||(s[19]=t("i",{class:"fas fa-search"},null,-1)),u(t("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>v.value=e),type:"text",placeholder:"Search shows, hosts, or descriptions...",class:"search-input",onInput:k},null,544),[[z,v.value]]),u(t("button",{type:"button",class:"search-clear",onClick:A},[...s[18]||(s[18]=[t("i",{class:"fas fa-times"},null,-1)])],512),[[f,v.value]])])]),t("div",Et,[t("div",It,[s[21]||(s[21]=t("i",{class:"fas fa-search"},null,-1)),u(t("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>v.value=e),type:"text",placeholder:"Search shows...",class:"search-input",onInput:k},null,544),[[z,v.value]]),u(t("button",{type:"button",class:"search-clear",onClick:A},[...s[20]||(s[20]=[t("i",{class:"fas fa-times"},null,-1)])],512),[[f,v.value]])])]),t("div",Pt,[t("div",Ut,[t("button",{type:"button",class:i(["filter-tab",{active:r.value==="all"}]),onClick:s[6]||(s[6]=e=>h("all"))}," All Videos ",2),t("button",{type:"button",class:i(["filter-tab",{active:r.value==="video_podcast"}]),onClick:s[7]||(s[7]=e=>h("video_podcast"))}," Video Podcast ",2),t("button",{type:"button",class:i(["filter-tab",{active:r.value==="episode"}]),onClick:s[8]||(s[8]=e=>h("episode"))}," Episodes ",2),t("button",{type:"button",class:i(["filter-tab",{active:r.value==="clip"}]),onClick:s[9]||(s[9]=e=>h("clip"))}," Clips ",2),t("button",{type:"button",class:i(["filter-tab",{active:r.value==="music_video"}]),onClick:s[10]||(s[10]=e=>h("music_video"))}," Music Videos ",2),t("button",{type:"button",class:i(["filter-tab",{active:r.value==="broadcast"}]),onClick:s[11]||(s[11]=e=>h("broadcast"))}," Live Broadcasts ",2)])]),t("div",qt,[t("div",At,[t("button",{type:"button",class:i(["view-btn",{active:y.value==="grid"}]),onClick:s[12]||(s[12]=e=>y.value="grid")},[...s[22]||(s[22]=[t("i",{class:"fas fa-th"},null,-1)])],2),t("button",{type:"button",class:i(["view-btn",{active:y.value==="list"}]),onClick:s[13]||(s[13]=e=>y.value="list")},[...s[23]||(s[23]=[t("i",{class:"fas fa-list"},null,-1)])],2)]),t("button",{type:"button",class:"btn btn-primary btn-large",onClick:X},[...s[24]||(s[24]=[t("i",{class:"fas fa-play"},null,-1),D(" Watch Random Show ",-1)])])])])]),t("section",Nt,[s[30]||(s[30]=t("div",{class:"section-header"},[t("h2",null,[t("i",{class:"fas fa-th"}),D(" All Videos")])],-1)),u(t("div",Wt,[(p(!0),b(H,null,Q(g.value,e=>(p(),b("div",{key:e.id,class:i(["show-card",{"now-playing":l.value&&l.value.id===e.id}]),onClick:_=>C(e)},[t("div",zt,[t("img",{src:e.thumbnail||"/static/img/default-cover.jpg",alt:e.title,loading:"lazy",decoding:"async",class:"image-placeholder"},null,8,Dt),t("div",Ht,[t("button",{type:"button",class:"play-btn",onClick:V(_=>C(e),["stop"])},[...s[25]||(s[25]=[t("i",{class:"fas fa-play"},null,-1)])],8,Qt),t("div",Yt,[t("button",{type:"button",class:"action-btn view-solo-mini-btn",title:"View Solo",onClick:V(_=>R(e),["stop"])},[...s[26]||(s[26]=[t("i",{class:"fas fa-external-link-alt"},null,-1)])],8,Gt),t("button",{type:"button",class:i(["action-btn bm-btn",{bookmarked:n(e)}]),"aria-pressed":n(e),title:"Bookmark",onClick:V(_=>T(e),["stop"])},[t("i",{class:i(n(e)?"fas fa-bookmark":"far fa-bookmark")},null,2),t("span",Kt,d(n(e)?"Remove bookmark":"Add bookmark"),1)],10,Jt)])])]),t("div",Ot,[t("h4",null,d(e.title),1),t("p",Xt,d(e.host),1)])],10,jt))),128))],512),[[f,y.value==="grid"]]),u(t("div",Zt,[s[29]||(s[29]=lt('<div class="list-header" data-v-0d5b737c><span class="col-thumbnail" data-v-0d5b737c>Thumbnail</span><span class="col-title" data-v-0d5b737c>Title</span><span class="col-host" data-v-0d5b737c>Host</span><span class="col-actions" data-v-0d5b737c>Actions</span></div>',1)),t("div",ts,[(p(!0),b(H,null,Q(g.value,e=>(p(),b("div",{key:e.id,class:i(["list-item",{"now-playing":l.value&&l.value.id===e.id}]),onClick:_=>C(e)},[t("div",es,[t("img",{src:e.thumbnail||"/static/img/default-cover.jpg",alt:e.title,loading:"lazy",decoding:"async",class:"image-placeholder"},null,8,os),s[27]||(s[27]=t("div",{class:"play-overlay"},[t("i",{class:"fas fa-play"})],-1))]),t("div",ls,[t("h4",null,d(e.title),1),t("p",null,d((e.description||"").substring(0,100))+d((e.description||"").length>100?"...":""),1)]),t("span",as,d(e.host),1),t("div",is,[t("button",{type:"button",class:"action-btn view-solo-mini-btn",title:"View Solo",onClick:V(_=>R(e),["stop"])},[...s[28]||(s[28]=[t("i",{class:"fas fa-external-link-alt"},null,-1),t("span",{class:"sr-only"},"View Solo",-1)])],8,ns),t("button",{type:"button",class:i(["action-btn bm-btn",{bookmarked:n(e)}]),"aria-pressed":n(e),title:"Bookmark",onClick:V(_=>T(e),["stop"])},[t("i",{class:i(n(e)?"fas fa-bookmark":"far fa-bookmark")},null,2),t("span",rs,d(n(e)?"Remove bookmark":"Add bookmark"),1)],10,ds)])],10,ss))),128))])],512),[[f,y.value==="list"]])]),u(t("section",us,[...s[31]||(s[31]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading videos...",-1)])],512),[[f,$.value]]),u(t("section",cs,[t("div",{class:"empty-content"},[s[32]||(s[32]=t("i",{class:"fas fa-play-circle"},null,-1)),s[33]||(s[33]=t("h3",null,"No videos found",-1)),s[34]||(s[34]=t("p",null,"Try adjusting your search or filters",-1)),t("button",{type:"button",class:"btn btn-primary",onClick:G},"Clear Filters")])],512),[[f,!$.value&&g.value.length===0]])])])}}},fs=Z(vs,[["__scopeId","data-v-0d5b737c"]]);export{fs as default};
