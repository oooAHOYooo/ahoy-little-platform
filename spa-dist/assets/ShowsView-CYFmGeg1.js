import{_ as ce,u as de,o as ve,a as pe,b as fe,p as X,c as l,d as i,e,k as M,j as me,i as ye,F as C,x as Y,y as f,l as P,t as u,s as m,q as he,f as R,T as be,w as J,z as Z,m as n,A as ke,H as _e,B as ge,L as we}from"./index-rnNZzN5L.js";const Ce={class:"shows-page videos-page"},Se={class:"shows-container"},Ve={class:"video-player-wrapper liquid-glass-wrap"},xe={key:"player",class:"embedded-video-player modern-glass-player"},Be=["src","poster"],Le=["aria-label","onKeydown"],$e=["src","alt"],Ie={key:1,class:"video-embed-wrap",style:{position:"relative","padding-bottom":"56.25%",height:"0",overflow:"hidden",background:"#000"}},qe=["src"],Me={class:"video-info-overlay liquid-glass-overlay"},Pe={class:"video-info-content"},Re={class:"video-title"},Ee={class:"video-meta"},Fe={class:"video-host"},Te={key:0,class:"video-type"},Ne={class:"video-description"},We={class:"video-actions-bar"},Ue=["aria-pressed","title"],ze={class:"sr-only"},je={class:"cinematic-backdrop"},De=["src","alt"],Ke={class:"carousel-content liquid-glass-plate"},Ae={class:"carousel-host"},He={class:"carousel-description"},Oe={class:"carousel-actions"},Ge=["onClick"],Qe={key:0,class:"carousel-indicators"},Xe=["onClick","aria-label"],Ye={class:"shows-grid-section"},Je={class:"shows-grid shows-grid-16x9"},Ze=["onClick"],et={class:"show-thumbnail"},tt=["src","alt"],st={class:"show-overlay video-card-overlay"},ot=["onClick"],at=["aria-pressed","onClick"],lt={class:"sr-only"},it=["onClick"],nt={class:"show-info"},rt={class:"show-host"},ut={class:"loading-section"},ct={class:"empty-section"},dt={__name:"ShowsView",setup(vt){const k=_e(),E=ge(),F=de(),p=n([]),_=n([]),ee=n(null),T=n(""),g=n(!0),o=n(null),S=n(!1),w=n(null),N=n(null),y=n(0);let v=null;const V=n(!1),h=ke(()=>{const s=p.value.filter(t=>t.thumbnail&&t.title);return s.length?s.slice(0,5):p.value.slice(0,5)});function x(){v&&clearInterval(v),v=setInterval(()=>{!V.value&&h.value.length>0&&(y.value=(y.value+1)%h.value.length)},6e3)}function te(){V.value=!0}function se(){V.value=!1}function oe(s){y.value=s,x()}const B=n(!1),L=n("");function W(){const s=k.query.play;if(!s||!p.value.length)return;const t=p.value.find(a=>String(a.id)===String(s));t&&(o.value=t,U())}function U(){setTimeout(()=>{w.value&&(w.value.load(),w.value.play().catch(()=>{}))},100)}function $(s){return s&&(s.video_url||s.mp4_link||s.trailer_url||s.url)||""}function ae(s){if(!s)return!1;const t=s.toLowerCase();return t.endsWith(".mp4")||t.endsWith(".webm")||t.endsWith(".mov")||t.includes("/mp4")||t.startsWith("blob:")}function z(s){const t=$(s),a=t.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&]+)/);if(a)return`https://www.youtube.com/embed/${a[1]}`;const d=t.match(/vimeo\.com\/(\d+)/);return d?`https://player.vimeo.com/video/${d[1]}`:null}function j(){let s=[...p.value];const t=T.value.trim().toLowerCase();t&&(s=s.filter(a=>(a.title||"").toLowerCase().includes(t)||(a.host||"").toLowerCase().includes(t)||(a.description||"").toLowerCase().includes(t))),_.value=s}function le(){T.value="",j()}function I(s){o.value=s,B.value=!1,L.value="",we({id:s.id,type:"show",title:s.title,host:s.host,thumbnail:s.thumbnail,url:s.video_url||s.mp4_link||s.trailer_url||s.url});const t=k.path.startsWith("/videos")?"/videos":"/shows";E.replace({path:t,query:{...k.query,play:s.id}}),U(),setTimeout(()=>{var a;(a=N.value)==null||a.scrollIntoView({behavior:"smooth",block:"start"})},100)}function q(){if(!o.value)return;const s=z(o.value);s&&(L.value=s,B.value=!0)}function ie(){o.value&&D(o.value)}function D(s){E.push({name:"video-detail",params:{id:s.id}})}function ne(){}function re(){S.value=!1}function K(s){return{type:"show",_type:"show",id:s.id,title:s.title,thumbnail:s.thumbnail,artwork:s.thumbnail}}function c(s){return s?F.isBookmarked(K(s)):!1}function A(s){s&&F.toggle(K(s))}return ve(async()=>{g.value=!0;try{const t=(await pe("/api/shows").catch(()=>({shows:[]}))).shows||[];p.value=t,_.value=[...t],t.length&&(ee.value=t[Math.floor(Math.random()*t.length)]),j(),W(),o.value||x()}finally{g.value=!1}}),fe(()=>{v&&clearInterval(v)}),X(o,s=>{s&&v?clearInterval(v):s||x()}),X(()=>k.query.play,()=>{W()}),(s,t)=>(l(),i("div",Ce,[e("div",Se,[t[13]||(t[13]=e("section",{class:"podcasts-hero shows-page-hero"},[e("div",{class:"podcasts-hero-inner"},[e("h1",null,[e("i",{class:"fas fa-video","aria-hidden":"true"}),M(" Videos")]),e("p",null,"Music videos, skate parts, short films, episodes, and more")])],-1)),e("section",{ref_key:"playerSectionRef",ref:N,class:"embedded-video-section"},[e("div",Ve,[me(be,{name:"fade-scale",mode:"out-in"},{default:ye(()=>{var a,d,H,O,G,Q;return[o.value?(l(),i("div",xe,[o.value&&ae($(o.value))?(l(),i("video",{key:0,ref_key:"videoEl",ref:w,src:$(o.value),poster:o.value.thumbnail||"",controls:"",class:"embedded-video",playsinline:"",onLoadedmetadata:ne,onPlay:t[0]||(t[0]=r=>S.value=!0),onPause:t[1]||(t[1]=r=>S.value=!1),onEnded:re}," Your browser does not support the video tag. ",40,Be)):o.value&&z(o.value)?(l(),i(C,{key:1},[B.value?(l(),i("div",Ie,[e("iframe",{src:L.value,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",border:"0"},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,qe)])):(l(),i("div",{key:0,class:"video-embed-poster",role:"button",tabindex:"0","aria-label":"Play "+(((a=o.value)==null?void 0:a.title)||"video"),onClick:q,onKeydown:[Y(f(q,["prevent"]),["enter"]),Y(f(q,["prevent"]),["space"])]},[e("img",{src:o.value.thumbnail||"",alt:((d=o.value)==null?void 0:d.title)||"",class:"video-embed-poster-img"},null,8,$e),t[3]||(t[3]=e("div",{class:"video-embed-poster-play"},[e("i",{class:"fas fa-play"})],-1))],40,Le))],64)):P("",!0),e("div",Me,[e("div",Pe,[e("h2",Re,u(((H=o.value)==null?void 0:H.title)||"Untitled"),1),e("div",Ee,[e("span",Fe,u(((O=o.value)==null?void 0:O.host)||""),1),(G=o.value)!=null&&G.type?(l(),i("span",Te,u(String(o.value.type||"").replace(/_/g," ")),1)):P("",!0)]),e("p",Ne,u(((Q=o.value)==null?void 0:Q.description)||""),1)]),e("div",We,[e("button",{type:"button",class:"action-btn view-solo-btn",title:"View Solo",onClick:ie},[...t[4]||(t[4]=[e("i",{class:"fas fa-external-link-alt"},null,-1),e("span",{class:"sr-only"},"View Solo",-1)])]),e("button",{type:"button",class:m(["action-btn bookmark-btn",{bookmarked:c(o.value)}]),"aria-pressed":c(o.value),title:c(o.value)?"Remove bookmark":"Bookmark",onClick:t[2]||(t[2]=r=>A(o.value))},[e("i",{class:m(c(o.value)?"fas fa-bookmark":"far fa-bookmark")},null,2),e("span",ze,u(c(o.value)?"Remove bookmark":"Bookmark"),1)],10,Ue)])])])):(l(),i("div",{key:"carousel",class:"featured-carousel-container",onMouseenter:te,onMouseleave:se},[e("div",{class:"carousel-track",style:he({transform:`translateX(-${y.value*100}%)`})},[(l(!0),i(C,null,R(h.value,(r,b)=>(l(),i("div",{key:r.id,class:"carousel-slide"},[e("div",je,[e("img",{src:r.thumbnail||"/static/img/default-cover.jpg",alt:r.title},null,8,De),t[5]||(t[5]=e("div",{class:"glass-overlay"},null,-1))]),e("div",Ke,[t[7]||(t[7]=e("span",{class:"trending-badge"},[e("i",{class:"fas fa-fire"}),M(" Featured Play")],-1)),e("h2",null,u(r.title),1),e("p",Ae,u(r.host),1),e("p",He,u(r.description||"Experience our curated selection. Hit play to transition seamlessly into the video display."),1),e("div",Oe,[e("button",{onClick:ue=>I(r),class:"btn-glass-play"},[...t[6]||(t[6]=[e("i",{class:"fas fa-play"},null,-1),M(" Watch Now ",-1)])],8,Ge)])])]))),128))],4),h.value.length>1?(l(),i("div",Qe,[(l(!0),i(C,null,R(h.value,(r,b)=>(l(),i("button",{key:"ind-"+b,class:m(["indicator",{active:b===y.value}]),onClick:f(ue=>oe(b),["stop"]),"aria-label":"Go to slide "+(b+1)},null,10,Xe))),128))])):P("",!0)],32))]}),_:1})])],512),e("section",Ye,[e("div",Je,[(l(!0),i(C,null,R(_.value,a=>(l(),i("div",{key:a.id,class:m(["show-card",{"now-playing":o.value&&o.value.id===a.id}]),onClick:d=>I(a)},[e("div",et,[e("img",{src:a.thumbnail||"/static/img/default-cover.jpg",alt:a.title,loading:"lazy",decoding:"async",class:"image-placeholder"},null,8,tt),e("div",st,[e("button",{type:"button",class:"show-overlay-open action-btn open-btn",title:"Open",onClick:f(d=>D(a),["stop"])}," Open ",8,ot),e("button",{type:"button",class:m(["show-overlay-save action-btn bm-btn",{bookmarked:c(a)}]),"aria-pressed":c(a),title:"Bookmark",onClick:f(d=>A(a),["stop"])},[e("i",{class:m(c(a)?"fas fa-bookmark":"far fa-bookmark")},null,2),e("span",lt,u(c(a)?"Remove bookmark":"Add bookmark"),1)],10,at),e("button",{type:"button",class:"play-btn",onClick:f(d=>I(a),["stop"])},[...t[8]||(t[8]=[e("i",{class:"fas fa-play"},null,-1)])],8,it)])]),e("div",nt,[e("h4",null,u(a.title),1),e("p",rt,u(a.host),1)])],10,Ze))),128))])]),J(e("section",ut,[...t[9]||(t[9]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading videos...",-1)])],512),[[Z,g.value]]),J(e("section",ct,[e("div",{class:"empty-content"},[t[10]||(t[10]=e("i",{class:"fas fa-play-circle"},null,-1)),t[11]||(t[11]=e("h3",null,"No videos found",-1)),t[12]||(t[12]=e("p",null,"Try a different search or check back later.",-1)),e("button",{type:"button",class:"btn btn-primary",onClick:le},"Clear search")])],512),[[Z,!g.value&&_.value.length===0]])])]))}},ft=ce(dt,[["__scopeId","data-v-5722eb53"]]);export{ft as default};
