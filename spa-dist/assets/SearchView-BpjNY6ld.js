import{_ as F,w as S,c as i,d as l,e,l as x,x as V,i as u,F as h,r as v,t as r,a as _,m as C,q as $,p as b,y as p,k as f}from"./index-DuL8nq5a.js";function j(){function L(o,m,d,k,g){const a=(g||"").trim().toLowerCase();if(!a)return{tracks:[],artists:[],shows:[],podcasts:[]};const w=(o||[]).filter(s=>(s.title||"").toLowerCase().includes(a)||(s.artist||"").toLowerCase().includes(a)),n=(m||[]).filter(s=>(s.name||"").toLowerCase().includes(a)),t=(d||[]).filter(s=>(s.title||"").toLowerCase().includes(a)||(s.host||"").toLowerCase().includes(a)),c=(k||[]).filter(s=>(s.title||"").toLowerCase().includes(a)||(s.host||"").toLowerCase().includes(a));return{tracks:w.slice(0,20),artists:n.slice(0,15),shows:t.slice(0,15),podcasts:c.slice(0,15)}}return{runSearch:L}}const B={class:"search-page"},q={class:"unified-header search-header"},N={class:"header-content"},T={class:"search-input-wrap"},A={key:0,class:"search-loading"},D={key:1,class:"search-results"},P={key:0,class:"search-hint"},E={key:0,class:"search-section"},I={class:"search-list"},M=["src","alt"],U={class:"search-item-info"},z={class:"search-item-title"},G={class:"search-item-meta"},H={key:1,class:"search-section"},J={class:"search-list"},K=["src","alt"],O={class:"search-item-info"},Q={class:"search-item-title"},R={key:2,class:"search-section"},W={class:"search-list"},X=["src","alt"],Y={class:"search-item-info"},Z={class:"search-item-title"},ss={class:"search-item-meta"},ts={key:3,class:"search-section"},es={class:"search-list"},as=["src","alt"],is={class:"search-item-info"},os={class:"search-item-title"},ls={key:4,class:"search-no-results"},cs={__name:"SearchView",setup(L){const o=C(""),m=C({tracks:[],artists:[],shows:[]}),d=C(!0),{runSearch:k}=j();async function g(){d.value=!0;try{const[n,t,c,s]=await Promise.all([_("/api/music").catch(()=>({tracks:[]})),_("/api/artists").catch(()=>({artists:[]})),_("/api/shows").catch(()=>({shows:[]})),_("/api/podcasts").catch(()=>({shows:[]}))]);m.value={tracks:n.tracks||[],artists:t.artists||[],shows:c.shows||[],podcasts:s.shows||[]}}finally{d.value=!1}}const a=$(()=>{const{tracks:n,artists:t,shows:c,podcasts:s}=m.value;return k(n,t,c,s,o.value)}),w=$(()=>a.value.tracks.length+a.value.artists.length+a.value.shows.length+a.value.podcasts.length>0);return S(o,()=>{},{immediate:!0}),g(),(n,t)=>{const c=b("router-link");return i(),l("div",B,[e("div",q,[e("div",N,[e("div",T,[t[7]||(t[7]=e("i",{class:"fas fa-search"},null,-1)),x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.value=s),type:"search",placeholder:"Search music, artists, shows, podcasts...",class:"search-input",autofocus:"",autocomplete:"off"},null,512),[[V,o.value]]),o.value?(i(),l("button",{key:0,type:"button",class:"search-clear","aria-label":"Clear",onClick:t[1]||(t[1]=s=>o.value="")},[...t[6]||(t[6]=[e("i",{class:"fas fa-times"},null,-1)])])):u("",!0)])])]),d.value?(i(),l("div",A,[...t[8]||(t[8]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"Loading catalog...",-1)])])):(i(),l("div",D,[o.value.trim()?(i(),l(h,{key:1},[a.value.tracks.length?(i(),l("section",E,[t[9]||(t[9]=e("h2",{class:"search-section-title"},"Tracks",-1)),e("div",I,[(i(!0),l(h,null,v(a.value.tracks,s=>(i(),p(c,{key:s.id,to:`/music/${s.id}`,class:"search-item",onClick:t[2]||(t[2]=y=>o.value="")},{default:f(()=>[e("img",{src:s.cover_art||s.thumbnail||"/static/img/default-cover.jpg",alt:s.title,class:"search-item-art"},null,8,M),e("div",U,[e("span",z,r(s.title),1),e("span",G,r(s.artist),1)])]),_:2},1032,["to"]))),128))])])):u("",!0),a.value.artists.length?(i(),l("section",H,[t[10]||(t[10]=e("h2",{class:"search-section-title"},"Artists",-1)),e("div",J,[(i(!0),l(h,null,v(a.value.artists,s=>(i(),p(c,{key:s.id,to:`/artists/${s.slug||s.id}`,class:"search-item",onClick:t[3]||(t[3]=y=>o.value="")},{default:f(()=>[e("img",{src:s.image||s.cover_art||"/static/img/default-cover.jpg",alt:s.name,class:"search-item-art"},null,8,K),e("div",O,[e("span",Q,r(s.name),1)])]),_:2},1032,["to"]))),128))])])):u("",!0),a.value.shows.length?(i(),l("section",R,[t[11]||(t[11]=e("h2",{class:"search-section-title"},"Videos",-1)),e("div",W,[(i(!0),l(h,null,v(a.value.shows,s=>(i(),p(c,{key:s.id,to:`/shows/${s.id}`,class:"search-item",onClick:t[4]||(t[4]=y=>o.value="")},{default:f(()=>[e("img",{src:s.thumbnail||s.cover_art||"/static/img/default-cover.jpg",alt:s.title,class:"search-item-art"},null,8,X),e("div",Y,[e("span",Z,r(s.title),1),e("span",ss,r(s.host),1)])]),_:2},1032,["to"]))),128))])])):u("",!0),a.value.podcasts.length?(i(),l("section",ts,[t[12]||(t[12]=e("h2",{class:"search-section-title"},"Podcasts",-1)),e("div",es,[(i(!0),l(h,null,v(a.value.podcasts,s=>(i(),p(c,{key:s.slug,to:`/podcasts/${s.slug}`,class:"search-item",onClick:t[5]||(t[5]=y=>o.value="")},{default:f(()=>[e("img",{src:s.artwork||s.image||"/static/img/default-cover.jpg",alt:s.title,class:"search-item-art"},null,8,as),e("div",is,[e("span",os,r(s.title),1)])]),_:2},1032,["to"]))),128))])])):u("",!0),o.value.trim()&&!w.value?(i(),l("p",ls,'No results for "'+r(o.value)+'"',1)):u("",!0)],64)):(i(),l("p",P,"Type to search across music, artists, videos, and podcasts."))]))])}}},ns=F(cs,[["__scopeId","data-v-7d55e35e"]]);export{ns as default};
