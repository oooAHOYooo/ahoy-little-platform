import{_ as Z,z as tt,o as st,a as et,w as ot,c as p,d as b,e as t,l as u,v as f,i as F,t as d,n as i,x as z,f as D,F as H,r as G,G as lt,m as c,L as at,H as it,s as nt,h as V}from"./index-y87kZUkW.js";const dt={class:"shows-page"},rt={class:"shows-container"},ut={class:"embedded-video-section"},ct={class:"video-player-wrapper"},vt={class:"embedded-video-player"},pt=["src","poster"],bt={key:1,class:"video-embed-wrap",style:{position:"relative","padding-bottom":"56.25%",height:"0",overflow:"hidden",background:"#000"}},ft=["src"],mt={class:"video-info-overlay"},yt={class:"video-info-content"},kt={class:"video-title"},ht={class:"video-meta"},_t={class:"video-host"},gt={key:0,class:"video-type"},Ct={class:"video-description"},wt={class:"video-actions-bar"},St=["aria-pressed","title"],Vt={class:"sr-only"},$t={class:"video-placeholder"},xt={class:"unified-header shows-subheader"},Bt={class:"header-content"},Lt={class:"header-title"},Mt={key:0,class:"hero-media"},Rt=["src","alt"],Tt={class:"hero-media-overlay"},Ft={class:"header-search desktop-only"},Pt={class:"search-bar"},Et={class:"header-search mobile-only"},Ut={class:"search-bar"},qt={class:"header-filters"},At={class:"filter-tabs"},It={class:"header-actions"},Nt={class:"view-options"},Wt={class:"shows-grid-section"},jt={class:"shows-grid"},zt=["onClick"],Dt={class:"show-thumbnail"},Ht=["src","alt"],Gt={class:"show-overlay"},Qt=["onClick"],Yt={class:"show-actions"},Jt=["onClick"],Kt=["aria-pressed","onClick"],Ot={class:"sr-only"},Xt={class:"show-info"},Zt={class:"show-host"},ts={class:"shows-list"},ss={class:"list-items"},es=["onClick"],os={class:"col-thumbnail"},ls=["src","alt"],as={class:"col-title"},is={class:"col-host"},ns={class:"col-actions"},ds=["onClick"],rs=["aria-pressed","onClick"],us={class:"sr-only"},cs={class:"loading-section"},vs={class:"empty-section"},ps={__name:"ShowsView",setup(bs){const B=it(),P=nt(),E=tt(),m=c([]),g=c([]),C=c(null),v=c(""),r=c("all"),y=c("grid"),$=c(!0),l=c(null),L=c(!1),x=c(null);function U(){const e=B.query.play;if(!e||!m.value.length)return;const s=m.value.find(a=>String(a.id)===String(e));s&&(l.value=s,q())}function q(){setTimeout(()=>{x.value&&(x.value.load(),x.value.play().catch(()=>{}))},100)}function M(e){return e&&(e.video_url||e.mp4_link||e.trailer_url||e.url)||""}function Q(e){if(!e)return!1;const s=e.toLowerCase();return s.endsWith(".mp4")||s.endsWith(".webm")||s.endsWith(".mov")||s.includes("/mp4")||s.startsWith("blob:")}function A(e){const s=M(e),a=s.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&]+)/);if(a)return`https://www.youtube.com/embed/${a[1]}`;const S=s.match(/vimeo\.com\/(\d+)/);return S?`https://player.vimeo.com/video/${S[1]}`:null}function k(){let e=[...m.value];const s=v.value.trim().toLowerCase();s&&(e=e.filter(a=>(a.title||"").toLowerCase().includes(s)||(a.host||"").toLowerCase().includes(s)||(a.description||"").toLowerCase().includes(s))),r.value==="video_podcast"?e=e.filter(a=>(a.tags||[]).includes("video-podcast")):r.value!=="all"&&(e=e.filter(a=>(a.type||a.category||"")===r.value)),g.value=e}function h(e){r.value=e,k()}function I(){v.value="",k()}function Y(){v.value="",r.value="all",k()}function w(e){l.value=e,at({id:e.id,type:"show",title:e.title,host:e.host,thumbnail:e.thumbnail,url:e.video_url||e.mp4_link||e.trailer_url||e.url}),P.replace({path:"/shows",query:{...B.query,play:e.id}}),q(),window.scrollTo({top:0,behavior:"smooth"})}function J(){l.value&&R(l.value)}function R(e){P.push({name:"show-detail",params:{id:e.id}})}function K(){}function O(){L.value=!1}function X(){if(m.value.length){const e=m.value[Math.floor(Math.random()*m.value.length)];w(e)}}function N(e){return{type:"show",_type:"show",id:e.id,title:e.title,thumbnail:e.thumbnail,artwork:e.thumbnail}}function n(e){return e?E.isBookmarked(N(e)):!1}function T(e){e&&E.toggle(N(e))}return st(async()=>{$.value=!0;try{const s=(await et("/api/shows").catch(()=>({shows:[]}))).shows||[];m.value=s,g.value=[...s],s.length&&(C.value=s[Math.floor(Math.random()*s.length)]),k(),U()}finally{$.value=!1}}),ot(()=>B.query.play,()=>{U()}),(e,s)=>{var a,S,W,j;return p(),b("div",dt,[t("div",rt,[t("section",ut,[t("div",ct,[u(t("div",vt,[l.value&&Q(M(l.value))?(p(),b("video",{key:0,ref_key:"videoEl",ref:x,src:M(l.value),poster:l.value.thumbnail||"",controls:"",class:"embedded-video",onLoadedmetadata:K,onPlay:s[0]||(s[0]=o=>L.value=!0),onPause:s[1]||(s[1]=o=>L.value=!1),onEnded:O}," Your browser does not support the video tag. ",40,pt)):l.value&&A(l.value)?(p(),b("div",bt,[t("iframe",{src:A(l.value),style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",border:"0"},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,ft)])):F("",!0),t("div",mt,[t("div",yt,[t("h2",kt,d(((a=l.value)==null?void 0:a.title)||"Untitled"),1),t("div",ht,[t("span",_t,d(((S=l.value)==null?void 0:S.host)||""),1),(W=l.value)!=null&&W.type?(p(),b("span",gt,d(String(l.value.type||"").replace(/_/g," ")),1)):F("",!0)]),t("p",Ct,d(((j=l.value)==null?void 0:j.description)||""),1)]),t("div",wt,[t("button",{type:"button",class:"action-btn view-solo-btn",title:"View Solo",onClick:J},[...s[14]||(s[14]=[t("i",{class:"fas fa-external-link-alt"},null,-1),t("span",{class:"sr-only"},"View Solo",-1)])]),t("button",{type:"button",class:i(["action-btn bookmark-btn",{bookmarked:n(l.value)}]),"aria-pressed":n(l.value),title:n(l.value)?"Remove bookmark":"Bookmark",onClick:s[2]||(s[2]=o=>T(l.value))},[t("i",{class:i(n(l.value)?"fas fa-bookmark":"far fa-bookmark")},null,2),t("span",Vt,d(n(l.value)?"Remove bookmark":"Bookmark"),1)],10,St)])])],512),[[f,l.value]]),u(t("div",$t,[...s[15]||(s[15]=[t("div",{class:"placeholder-content"},[t("i",{class:"fas fa-play-circle"}),t("h3",null,"Select a video to play"),t("p",null,"Click on any video below to start watching")],-1)])],512),[[f,!l.value]])])]),t("section",xt,[t("div",Bt,[t("div",Lt,[C.value?(p(),b("div",Mt,[t("img",{src:C.value.thumbnail||"/static/img/default-cover.jpg",alt:C.value.title,class:"hero-thumbnail image-placeholder"},null,8,Rt),t("div",Tt,[t("button",{type:"button",class:"hero-play-btn",onClick:s[3]||(s[3]=o=>w(C.value))},[...s[16]||(s[16]=[t("i",{class:"fas fa-play"},null,-1)])])])])):F("",!0),s[17]||(s[17]=t("div",{class:"title-text"},[t("h1",null,"Videos"),t("p",null,"Music videos, skate parts, short films, episodes, and more")],-1))]),t("div",Ft,[t("div",Pt,[s[19]||(s[19]=t("i",{class:"fas fa-search"},null,-1)),u(t("input",{"onUpdate:modelValue":s[4]||(s[4]=o=>v.value=o),type:"text",placeholder:"Search shows, hosts, or descriptions...",class:"search-input",onInput:k},null,544),[[z,v.value]]),u(t("button",{type:"button",class:"search-clear",onClick:I},[...s[18]||(s[18]=[t("i",{class:"fas fa-times"},null,-1)])],512),[[f,v.value]])])]),t("div",Et,[t("div",Ut,[s[21]||(s[21]=t("i",{class:"fas fa-search"},null,-1)),u(t("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>v.value=o),type:"text",placeholder:"Search shows...",class:"search-input",onInput:k},null,544),[[z,v.value]]),u(t("button",{type:"button",class:"search-clear",onClick:I},[...s[20]||(s[20]=[t("i",{class:"fas fa-times"},null,-1)])],512),[[f,v.value]])])]),t("div",qt,[t("div",At,[t("button",{type:"button",class:i(["filter-tab",{active:r.value==="all"}]),onClick:s[6]||(s[6]=o=>h("all"))}," All Videos ",2),t("button",{type:"button",class:i(["filter-tab",{active:r.value==="video_podcast"}]),onClick:s[7]||(s[7]=o=>h("video_podcast"))}," Video Podcast ",2),t("button",{type:"button",class:i(["filter-tab",{active:r.value==="episode"}]),onClick:s[8]||(s[8]=o=>h("episode"))}," Episodes ",2),t("button",{type:"button",class:i(["filter-tab",{active:r.value==="clip"}]),onClick:s[9]||(s[9]=o=>h("clip"))}," Clips ",2),t("button",{type:"button",class:i(["filter-tab",{active:r.value==="music_video"}]),onClick:s[10]||(s[10]=o=>h("music_video"))}," Music Videos ",2),t("button",{type:"button",class:i(["filter-tab",{active:r.value==="broadcast"}]),onClick:s[11]||(s[11]=o=>h("broadcast"))}," Live Broadcasts ",2)])]),t("div",It,[t("div",Nt,[t("button",{type:"button",class:i(["view-btn",{active:y.value==="grid"}]),onClick:s[12]||(s[12]=o=>y.value="grid")},[...s[22]||(s[22]=[t("i",{class:"fas fa-th"},null,-1)])],2),t("button",{type:"button",class:i(["view-btn",{active:y.value==="list"}]),onClick:s[13]||(s[13]=o=>y.value="list")},[...s[23]||(s[23]=[t("i",{class:"fas fa-list"},null,-1)])],2)]),t("button",{type:"button",class:"btn btn-primary btn-large",onClick:X},[...s[24]||(s[24]=[t("i",{class:"fas fa-play"},null,-1),D(" Watch Random Show ",-1)])])])])]),t("section",Wt,[s[30]||(s[30]=t("div",{class:"section-header"},[t("h2",null,[t("i",{class:"fas fa-th"}),D(" All Videos")])],-1)),u(t("div",jt,[(p(!0),b(H,null,G(g.value,o=>(p(),b("div",{key:o.id,class:i(["show-card",{"now-playing":l.value&&l.value.id===o.id}]),onClick:_=>w(o)},[t("div",Dt,[t("img",{src:o.thumbnail||"/static/img/default-cover.jpg",alt:o.title,loading:"lazy",decoding:"async",class:"image-placeholder"},null,8,Ht),t("div",Gt,[t("button",{type:"button",class:"play-btn",onClick:V(_=>w(o),["stop"])},[...s[25]||(s[25]=[t("i",{class:"fas fa-play"},null,-1)])],8,Qt),t("div",Yt,[t("button",{type:"button",class:"action-btn view-solo-mini-btn",title:"View Solo",onClick:V(_=>R(o),["stop"])},[...s[26]||(s[26]=[t("i",{class:"fas fa-external-link-alt"},null,-1)])],8,Jt),t("button",{type:"button",class:i(["action-btn bm-btn",{bookmarked:n(o)}]),"aria-pressed":n(o),title:"Bookmark",onClick:V(_=>T(o),["stop"])},[t("i",{class:i(n(o)?"fas fa-bookmark":"far fa-bookmark")},null,2),t("span",Ot,d(n(o)?"Remove bookmark":"Add bookmark"),1)],10,Kt)])])]),t("div",Xt,[t("h4",null,d(o.title),1),t("p",Zt,d(o.host),1)])],10,zt))),128))],512),[[f,y.value==="grid"]]),u(t("div",ts,[s[29]||(s[29]=lt('<div class="list-header" data-v-0a1c73d3><span class="col-thumbnail" data-v-0a1c73d3>Thumbnail</span><span class="col-title" data-v-0a1c73d3>Title</span><span class="col-host" data-v-0a1c73d3>Host</span><span class="col-actions" data-v-0a1c73d3>Actions</span></div>',1)),t("div",ss,[(p(!0),b(H,null,G(g.value,o=>(p(),b("div",{key:o.id,class:i(["list-item",{"now-playing":l.value&&l.value.id===o.id}]),onClick:_=>w(o)},[t("div",os,[t("img",{src:o.thumbnail||"/static/img/default-cover.jpg",alt:o.title,loading:"lazy",decoding:"async",class:"image-placeholder"},null,8,ls),s[27]||(s[27]=t("div",{class:"play-overlay"},[t("i",{class:"fas fa-play"})],-1))]),t("div",as,[t("h4",null,d(o.title),1),t("p",null,d((o.description||"").substring(0,100))+d((o.description||"").length>100?"...":""),1)]),t("span",is,d(o.host),1),t("div",ns,[t("button",{type:"button",class:"action-btn view-solo-mini-btn",title:"View Solo",onClick:V(_=>R(o),["stop"])},[...s[28]||(s[28]=[t("i",{class:"fas fa-external-link-alt"},null,-1),t("span",{class:"sr-only"},"View Solo",-1)])],8,ds),t("button",{type:"button",class:i(["action-btn bm-btn",{bookmarked:n(o)}]),"aria-pressed":n(o),title:"Bookmark",onClick:V(_=>T(o),["stop"])},[t("i",{class:i(n(o)?"fas fa-bookmark":"far fa-bookmark")},null,2),t("span",us,d(n(o)?"Remove bookmark":"Add bookmark"),1)],10,rs)])],10,es))),128))])],512),[[f,y.value==="list"]])]),u(t("section",cs,[...s[31]||(s[31]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading videos...",-1)])],512),[[f,$.value]]),u(t("section",vs,[t("div",{class:"empty-content"},[s[32]||(s[32]=t("i",{class:"fas fa-play-circle"},null,-1)),s[33]||(s[33]=t("h3",null,"No videos found",-1)),s[34]||(s[34]=t("p",null,"Try adjusting your search or filters",-1)),t("button",{type:"button",class:"btn btn-primary",onClick:Y},"Clear Filters")])],512),[[f,!$.value&&g.value.length===0]])])])}}},ms=Z(ps,[["__scopeId","data-v-0a1c73d3"]]);export{ms as default};
