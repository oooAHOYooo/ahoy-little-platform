import{_ as B,o as G,b as A,c as n,d as l,e as t,k as J,G as U,t as d,F as _,f as h,l as g,w as j,C as K,g as k,m as u,A as b,s as T}from"./index-R22JesoH.js";const L={class:"focus-container focus-strava"},Y={class:"focus-content"},z={class:"focus-step focus-dial-section"},$={class:"focus-dial-wrap"},q={class:"focus-dial-svg",viewBox:"0 0 220 220","aria-hidden":"true"},H=["stroke-dashoffset"],Q={class:"focus-dial-center"},W={class:"focus-dial-time"},X={class:"focus-dial-label"},Z={class:"focus-presets"},ee=["disabled","onClick"],se={class:"focus-dial-actions"},te={class:"focus-step focus-music-section"},ae=["value"],oe={class:"focus-step focus-activity-section"},ce=["aria-valuenow","aria-valuemax"],ne={class:"focus-activity-count"},C="focus_pomodoros",le=4,F=597,ie={__name:"FocusView",setup(ue){function x(){const s=new Date;return s.getFullYear()+"-"+String(s.getMonth()+1).padStart(2,"0")+"-"+String(s.getDate()).padStart(2,"0")}const r=u(25),o=u(25*60),c=u(!1),i=u(null),S=u([{id:"masters-remastered",name:"Masters Remastered"}]),v=u([]),f=u("masters-remastered"),m=u(0),p=le,y=b(()=>m.value),N=b(()=>{const s=Math.floor(o.value/60),e=o.value%60;return String(s).padStart(2,"0")+":"+String(e).padStart(2,"0")}),R=b(()=>{const s=r.value*60;return F-o.value/s*F});function D(){try{const s=localStorage.getItem(C),e=s?JSON.parse(s):{};m.value=e[x()]||0}catch{m.value=0}}function E(s){c.value||(r.value=s,o.value=s*60)}function w(){if(o.value<=0){c.value=!1,i.value&&clearTimeout(i.value),V();return}o.value--,i.value=setTimeout(w,1e3)}function I(){c.value||(c.value=!0,O(),w())}function M(){c.value=!1,i.value&&(clearTimeout(i.value),i.value=null)}function P(){M(),o.value=r.value*60}function V(){try{const s=localStorage.getItem(C),e=s?JSON.parse(s):{},a=x();e[a]=(e[a]||0)+1,localStorage.setItem(C,JSON.stringify(e)),m.value=e[a]}catch{}o.value=r.value*60,window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Pomodoro done!",type:"success"}}))}function O(){const s=window.backgroundAudioController;if(!s)return;const e=f.value==="masters-remastered"?v.value&&v.value[0]||null:(v.value||[]).find(a=>a.id===f.value);e&&s.play(e)}return G(()=>{o.value=r.value*60,D(),fetch("/static/data/ambient-modes.json").then(s=>s.json()).then(s=>{v.value=s||[],S.value=[{id:"masters-remastered",name:"Masters Remastered"}].concat((v.value||[]).map(e=>({id:e.id,name:e.name})))}).catch(()=>{})}),A(()=>{i.value&&clearTimeout(i.value)}),(s,e)=>(n(),l("div",L,[e[4]||(e[4]=t("section",{class:"podcasts-hero focus-page-header"},[t("div",{class:"podcasts-hero-inner"},[t("h1",null,[t("i",{class:"fas fa-headphones","aria-hidden":"true"}),J(" Focus")]),t("p",null,"Timer · Music · Progress")])],-1)),t("div",Y,[t("section",z,[t("div",$,[(n(),l("svg",q,[e[1]||(e[1]=U('<defs data-v-d8daac4e><linearGradient id="focus-ring-gradient" x1="0%" y1="0%" x2="100%" y2="100%" data-v-d8daac4e><stop offset="0%" stop-color="#FC4C02" data-v-d8daac4e></stop><stop offset="100%" stop-color="#FF6B35" data-v-d8daac4e></stop></linearGradient></defs><circle class="focus-dial-track" cx="110" cy="110" r="95" fill="none" stroke-width="8" data-v-d8daac4e></circle><line x1="110" y1="22" x2="110" y2="30" class="focus-dial-tick" data-v-d8daac4e></line><line x1="198" y1="110" x2="190" y2="110" class="focus-dial-tick" data-v-d8daac4e></line><line x1="110" y1="198" x2="110" y2="190" class="focus-dial-tick" data-v-d8daac4e></line><line x1="22" y1="110" x2="30" y2="110" class="focus-dial-tick" data-v-d8daac4e></line>',6)),t("circle",{class:"focus-dial-ring",cx:"110",cy:"110",r:"95",fill:"none",stroke:"url(#focus-ring-gradient)","stroke-width":"8","stroke-linecap":"round","stroke-dasharray":"597","stroke-dashoffset":R.value,transform:"rotate(-90 110 110)"},null,8,H)])),t("div",Q,[t("span",W,d(N.value),1),t("span",X,d(c.value?"remaining":"set timer"),1)])]),t("div",Z,[(n(),l(_,null,h([15,25,45],a=>t("button",{key:a,type:"button",class:T(["focus-preset-btn",{active:r.value===a}]),disabled:c.value,onClick:re=>E(a)},d(a),11,ee)),64))]),t("div",se,[!c.value&&o.value>0?(n(),l("button",{key:0,type:"button",class:"focus-btn focus-btn-start",onClick:I},"Start")):g("",!0),c.value?(n(),l("button",{key:1,type:"button",class:"focus-btn focus-btn-pause",onClick:M},"Pause")):g("",!0),!c.value&&o.value>0?(n(),l("button",{key:2,type:"button",class:"focus-btn focus-btn-reset",onClick:P},"Reset")):g("",!0)])]),t("section",te,[e[2]||(e[2]=t("span",{class:"focus-step-num"},"2",-1)),j(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),class:"focus-music-select","aria-label":"Choose focus music",onChange:O},[(n(!0),l(_,null,h(S.value,a=>(n(),l("option",{key:a.id,value:a.id},d(a.name),9,ae))),128))],544),[[K,f.value]])]),t("section",oe,[e[3]||(e[3]=t("div",{class:"focus-activity-header"},[t("span",{class:"focus-step-num"},"3"),t("p",{class:"focus-activity-title"},"Today")],-1)),t("div",{class:"focus-activity-rings",role:"progressbar","aria-valuenow":y.value,"aria-valuemax":k(p)},[(n(!0),l(_,null,h(k(p),a=>(n(),l("div",{key:a,class:T(["focus-ring-dot",{filled:a<=y.value}])},null,2))),128))],8,ce),t("p",ne,d(y.value)+" / "+d(k(p))+" pomodoros",1)])])]))}},ve=B(ie,[["__scopeId","data-v-d8daac4e"]]);export{ve as default};
