import{_ as C}from"./ahoy_logo--Z4AShNu.js";import{_ as S,o as A,E as k,c as i,d as c,e as t,g as u,t as p,k as a,j as n,i as e,G as B,N as E,m as _,r as x,B as L}from"./index-kPv7jc-x.js";const N={class:"account-page"},V={key:0,class:"account-card"},F={class:"account-profile"},I={class:"account-name"},T={class:"account-email"},P={class:"account-section"},W={class:"wallet-balance"},j={class:"wallet-amount"},O={class:"account-wallet-actions"},D=["disabled"],G={key:0,class:"fas fa-spinner fa-spin"},J={key:1,class:"fas fa-wallet"},M={class:"account-section"},R={key:1,class:"account-guest"},U={class:"account-section"},Y={class:"account-guest-cta"},$={__name:"AccountView",setup(q){const v=L(),l=E(),f=_(null),d=_(!1);A(async()=>{if(l.isLoggedIn.value)try{const r=await k("/payments/wallet");f.value=r.balance??0}catch{f.value=0}});async function b(){if(!l.isLoggedIn.value){v.push("/login");return}const r=10;d.value=!0;try{const s=await k("/payments/wallet/fund",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:r})});if(s.checkout_url){window.location.href=s.checkout_url;return}window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:s.error||"Could not start checkout",type:"error"}}))}catch(s){window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:s.message||"Failed to add funds",type:"error"}}))}finally{d.value=!1}}async function h(){await l.logout(),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Signed out",type:"success"}})),v.push("/")}return(r,s)=>{var g,y,m,w;const o=x("router-link");return i(),c("div",N,[s[19]||(s[19]=t("section",{class:"podcasts-hero account-page-header"},[t("div",{class:"podcasts-hero-inner account-hero-inner"},[t("img",{src:C,alt:"Ahoy",class:"account-hero-logo"}),t("div",null,[t("h1",null,"Account"),t("p",null,"Wallet & profile")])])],-1)),u(l).isLoggedIn.value?(i(),c("div",V,[t("div",F,[s[0]||(s[0]=t("div",{class:"account-avatar"},[t("i",{class:"fas fa-user-circle"})],-1)),t("div",I,p(((g=u(l).user.value)==null?void 0:g.display_name)||((y=u(l).user.value)==null?void 0:y.username)||((m=u(l).user.value)==null?void 0:m.email)),1),t("div",T,p((w=u(l).user.value)==null?void 0:w.email),1)]),t("section",P,[s[4]||(s[4]=t("h2",{class:"account-section-title"},"Wallet",-1)),t("div",W,[s[1]||(s[1]=t("span",{class:"wallet-label"},"Balance",-1)),t("span",j,"$"+p((f.value??0).toFixed(2)),1)]),s[5]||(s[5]=t("p",{class:"wallet-note"},"Use your wallet for boosts and merch checkout.",-1)),t("div",O,[t("button",{type:"button",class:"account-btn primary",disabled:d.value,onClick:b},[d.value?(i(),c("i",G)):(i(),c("i",J)),s[2]||(s[2]=a(" Add funds ",-1))],8,D),n(o,{to:"/wallet",class:"account-btn secondary"},{default:e(()=>[...s[3]||(s[3]=[a("Transaction history",-1)])]),_:1})])]),t("section",M,[s[9]||(s[9]=t("h2",{class:"account-section-title"},"Links",-1)),n(o,{to:"/tip-artist",class:"account-link"},{default:e(()=>[...s[6]||(s[6]=[t("i",{class:"fas fa-heart"},null,-1),a(" Boost artists ",-1)])]),_:1}),n(o,{to:"/my-saves",class:"account-link"},{default:e(()=>[...s[7]||(s[7]=[t("i",{class:"fas fa-bookmark"},null,-1),a(" Saved ",-1)])]),_:1}),n(o,{to:"/settings",class:"account-link"},{default:e(()=>[...s[8]||(s[8]=[t("i",{class:"fas fa-cog"},null,-1),a(" Settings ",-1)])]),_:1})]),t("button",{type:"button",class:"account-btn logout",onClick:h},[...s[10]||(s[10]=[t("i",{class:"fas fa-sign-out-alt"},null,-1),a(" Sign out ",-1)])])])):(i(),c("div",R,[s[18]||(s[18]=B('<div class="account-guest-profile" data-v-4229141e><div class="account-avatar" data-v-4229141e><i class="fas fa-user-circle" data-v-4229141e></i></div><h2 class="account-guest-title" data-v-4229141e>Profile</h2><p class="account-guest-sub" data-v-4229141e>You&#39;re browsing as a guest. Save to this device and explore — create an account to sync everywhere.</p></div>',1)),t("section",U,[s[15]||(s[15]=t("h2",{class:"account-section-title"},"Features",-1)),n(o,{to:"/my-saves",class:"account-link"},{default:e(()=>[...s[11]||(s[11]=[t("i",{class:"fas fa-bookmark"},null,-1),t("span",null,[t("strong",null,"Saved"),a(" — Bookmarks and recently played")],-1)])]),_:1}),n(o,{to:"/playlists",class:"account-link"},{default:e(()=>[...s[12]||(s[12]=[t("i",{class:"fas fa-list-ul"},null,-1),t("span",null,[t("strong",null,"Playlists"),a(" — Create and manage (sign in to save)")],-1)])]),_:1}),n(o,{to:"/settings",class:"account-link"},{default:e(()=>[...s[13]||(s[13]=[t("i",{class:"fas fa-cog"},null,-1),t("span",null,[t("strong",null,"Settings"),a(" — Audio and preferences")],-1)])]),_:1}),n(o,{to:"/wallet",class:"account-link"},{default:e(()=>[...s[14]||(s[14]=[t("i",{class:"fas fa-wallet"},null,-1),t("span",null,[t("strong",null,"Wallet"),a(" — Add funds for boosts and merch (sign in)")],-1)])]),_:1})]),t("div",Y,[s[17]||(s[17]=t("p",null,"Create a free account to sync your saves across devices and unlock wallet, playlists, and more.",-1)),n(o,{to:"/login?signup=1",class:"account-btn primary"},{default:e(()=>[...s[16]||(s[16]=[a("Create account",-1)])]),_:1})])]))])}}},K=S($,[["__scopeId","data-v-4229141e"]]);export{K as default};
