import{_ as q,z as J,u as G,o as U,b as Y,c as o,d as n,B as C,e,f as _,j as p,k as y,i as D,t as l,n as f,l as M,v as E,F as $,r as B,N as Q,p as W,q as b,m as N,s as X,H as Z,h as R}from"./index-P8NqM49E.js";const ss={key:0,class:"saves-guest-banner"},es={key:1,class:"saves-profile-hero saves-hero--recent"},ts={class:"saves-profile-content saves-hero-content--recent"},as={class:"saves-profile-info"},os={class:"saves-stats"},ns={class:"saves-stat"},ls={class:"saves-stat-number"},rs={key:2,class:"saves-profile-hero"},is={class:"saves-profile-content"},vs={class:"saves-profile-info"},ds={class:"saves-username"},cs={class:"saves-stats"},us={class:"saves-stat"},ps={class:"saves-stat-number"},ys={class:"saves-stat-number"},fs={class:"saves-tabs-glass"},ks={class:"saves-tab-count"},_s={class:"saves-tab-count"},bs={class:"saves-content-glass"},gs={key:0,class:"saves-bookmarks-tab"},hs={class:"saves-filter-pills"},ms=["onClick"],ws={class:"saves-grid"},Cs=["onClick"],$s={class:"saves-card-art"},Bs=["src","alt"],Rs={class:"saves-card-overlay"},Ss=["onClick"],Ps=["onClick"],Ts={class:"saves-type-badge"},Ds={class:"saves-card-info"},Ms={key:0,class:"saves-date"},Es={key:1,class:"saves-empty-glass"},Ns={class:"saves-content-glass saves-content--recent"},Vs={key:0,class:"saves-recent-list"},Ls=["onClick"],xs={class:"saves-recent-art"},As=["src","alt"],js={class:"saves-recent-info"},zs={class:"saves-recent-meta"},Is={class:"saves-recent-type"},Fs={class:"saves-recent-time"},Hs={class:"saves-recent-actions"},Ks=["title","onClick"],Os={key:1,class:"saves-empty-glass"},qs="ahoy.recentlyPlayed.v1",Js={__name:"SavedView",setup(Gs){const S=X(),V=Z(),k=J(),g=G(),m=Q(),c=N("all"),v=N([]),u=b(()=>V.path==="/recently-played"),d=b(()=>Object.values(k.bookmarks.value)),L=b(()=>{var s,r,t;return d.value.length>=3?"My Collection":((s=m.user.value)==null?void 0:s.display_name)||((t=(r=m.user.value)==null?void 0:r.email)==null?void 0:t.split("@")[0])||"Saved"}),x=b(()=>[...new Set(d.value.map(s=>s.type||"track").filter(Boolean))]),A=b(()=>c.value==="all"?d.value:d.value.filter(a=>(a.type||"track")===c.value));function j(a){return a.id??a.slug??`${a.type}:${a.title}`}function z(a){return a.key??`${a.type||"track"}:${a.id}:${a.played_at||0}`}function I(a){return a?new Date(a).toLocaleDateString():""}function F(a){const s=a||"track";return s==="live_tv"?"Live TV":s==="show"?"Video":s==="podcast"||s==="episode"?"Podcast":"Music"}function H(a){if(!a)return"";const s=new Date(a),t=new Date-s,i=Math.floor(t/6e4),P=Math.floor(t/36e5),T=Math.floor(t/864e5);return i<1?"Just now":i<60?`${i}m ago`:P<24?`${P}h ago`:T<7?`${T}d ago`:s.toLocaleDateString()}function h(){try{const a=localStorage.getItem(qs);v.value=a?JSON.parse(a):[]}catch{v.value=[]}}function w(a){var r;const s=a.type||"track";if(s==="show"){S.push({path:"/videos",query:{play:a.id}});return}if(s==="live_tv"){S.push("/live-tv");return}((r=g.currentTrack)==null?void 0:r.id)===a.id&&g.isPlaying?g.pause():g.play(a)}function K(a){k.remove(a),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Removed from bookmarks",type:"success"}}))}function O(a){k.toggle(a),h()}return U(()=>{h(),window.addEventListener("recentlyPlayed:updated",h)}),Y(()=>{window.removeEventListener("recentlyPlayed:updated",h)}),(a,s)=>{const r=W("router-link");return o(),n("div",{class:f(["my-saves-container saved-page",{"saved-page--recent":u.value}])},[C(m).isLoggedIn.value?D("",!0):(o(),n("div",ss,[e("p",null,[s[2]||(s[2]=_("Bookmarks and recently played are stored on this device. ",-1)),p(r,{to:"/login?signup=1"},{default:y(()=>[...s[1]||(s[1]=[_("Create an account",-1)])]),_:1}),s[3]||(s[3]=_(" to sync across devices.",-1))])])),u.value?(o(),n("div",es,[s[7]||(s[7]=e("div",{class:"saves-profile-glow"},null,-1)),e("div",ts,[s[6]||(s[6]=e("div",{class:"saves-avatar-wrapper"},[e("div",{class:"saves-avatar-guest saves-avatar--history"},[e("i",{class:"fas fa-history"})])],-1)),e("div",as,[s[5]||(s[5]=e("h1",{class:"saves-username"},"Recently Played",-1)),e("div",os,[e("div",ns,[e("span",ls,l(v.value.length),1),s[4]||(s[4]=e("span",{class:"saves-stat-label"},"tracks & shows",-1))])])])])])):(o(),n("div",rs,[s[11]||(s[11]=e("div",{class:"saves-profile-glow"},null,-1)),e("div",is,[s[10]||(s[10]=e("div",{class:"saves-avatar-wrapper"},[e("div",{class:"saves-avatar-guest"},[e("i",{class:"fas fa-bookmark"})])],-1)),e("div",vs,[e("h1",ds,l(L.value),1),e("div",cs,[e("div",us,[e("span",ps,l(d.value.length),1),s[8]||(s[8]=e("span",{class:"saves-stat-label"},"Bookmarks",-1))]),p(r,{to:"/recently-played",class:"saves-stat saves-stat-link"},{default:y(()=>[e("span",ys,l(v.value.length),1),s[9]||(s[9]=e("span",{class:"saves-stat-label"},"Recently Played",-1))]),_:1})])])])])),e("div",fs,[p(r,{to:{path:"/my-saves"},class:f(["saves-tab-btn",{active:!u.value}])},{default:y(()=>[s[12]||(s[12]=e("i",{class:"fas fa-bookmark"},null,-1)),s[13]||(s[13]=e("span",null,"Bookmarks",-1)),e("span",ks,l(d.value.length),1)]),_:1},8,["class"]),p(r,{to:{path:"/recently-played"},class:f(["saves-tab-btn",{active:u.value}])},{default:y(()=>[s[14]||(s[14]=e("i",{class:"fas fa-history"},null,-1)),s[15]||(s[15]=e("span",null,"Recently Played",-1)),e("span",_s,l(v.value.length),1)]),_:1},8,["class"])]),M(e("div",bs,[d.value.length?(o(),n("div",gs,[e("div",hs,[e("button",{type:"button",class:f([{active:c.value==="all"},"saves-pill"]),onClick:s[0]||(s[0]=t=>c.value="all")}," All ",2),(o(!0),n($,null,B(x.value,t=>(o(),n("button",{key:t,type:"button",class:f([{active:c.value===t},"saves-pill"]),onClick:i=>c.value=t},l(t==="track"?"Tracks":t==="show"?"Shows":t==="artist"?"Artists":t),11,ms))),128))]),e("div",ws,[(o(!0),n($,null,B(A.value,t=>(o(),n("div",{key:j(t),class:"saves-card",onClick:i=>w(t)},[e("div",$s,[e("img",{src:t.cover_art||t.thumbnail||t.artwork||"/static/img/default-cover.jpg",alt:t.title||t.name,loading:"lazy"},null,8,Bs),e("div",Rs,[e("button",{type:"button",class:"saves-play-btn",onClick:R(i=>w(t),["stop"])},[...s[16]||(s[16]=[e("i",{class:"fas fa-play"},null,-1)])],8,Ss)]),e("button",{type:"button",class:"saves-remove-btn",title:"Remove bookmark",onClick:R(i=>K(t),["stop"])},[...s[17]||(s[17]=[e("i",{class:"fas fa-bookmark"},null,-1)])],8,Ps),e("span",Ts,l(t.type||"track"),1)]),e("div",Ds,[e("h3",null,l(t.title||t.name||"—"),1),e("p",null,l(t.artist||t.host||""),1),t.added_at?(o(),n("span",Ms,l(I(t.added_at)),1)):D("",!0)])],8,Cs))),128))])])):(o(),n("div",Es,[s[19]||(s[19]=e("div",{class:"saves-empty-icon"},[e("i",{class:"fas fa-bookmark"})],-1)),s[20]||(s[20]=e("h3",null,"No bookmarks yet",-1)),s[21]||(s[21]=e("p",null,"Tap the bookmark icon on any track, show, or artist to save it here for easy access.",-1)),p(r,{to:"/videos",class:"saves-cta-btn"},{default:y(()=>[...s[18]||(s[18]=[_("Discover Videos",-1)])]),_:1})]))],512),[[E,!u.value]]),M(e("div",Ns,[v.value.length?(o(),n("div",Vs,[(o(!0),n($,null,B(v.value,t=>(o(),n("div",{key:z(t),class:"saves-recent-item",onClick:i=>w(t)},[e("div",xs,[e("img",{src:t.artwork||t.cover_art||t.thumbnail||"/static/img/default-cover.jpg",alt:t.title||t.name,loading:"lazy"},null,8,As),s[22]||(s[22]=e("div",{class:"saves-recent-play"},[e("i",{class:"fas fa-play"})],-1))]),e("div",js,[e("h3",null,l(t.title||t.name||"—"),1),e("p",null,l(t.artist||t.host||""),1),e("span",zs,[e("span",Is,l(F(t.type)),1),e("span",Fs,l(H(t.played_at)),1)])]),e("div",Hs,[e("button",{type:"button",class:f(["saves-action-btn",{bookmarked:C(k).isBookmarked(t)}]),title:C(k).isBookmarked(t)?"Remove bookmark":"Add bookmark",onClick:R(i=>O(t),["stop"])},[...s[23]||(s[23]=[e("i",{class:"fas fa-bookmark"},null,-1)])],10,Ks)])],8,Ls))),128))])):(o(),n("div",Os,[s[25]||(s[25]=e("div",{class:"saves-empty-icon"},[e("i",{class:"fas fa-history"})],-1)),s[26]||(s[26]=e("h3",null,"No recent plays",-1)),s[27]||(s[27]=e("p",null,"Content you listen to will appear here so you can easily find it again.",-1)),p(r,{to:"/music",class:"saves-cta-btn"},{default:y(()=>[...s[24]||(s[24]=[_("Browse Music",-1)])]),_:1})]))],512),[[E,u.value]])],2)}}},Ys=q(Js,[["__scopeId","data-v-d84096aa"]]);export{Ys as default};
