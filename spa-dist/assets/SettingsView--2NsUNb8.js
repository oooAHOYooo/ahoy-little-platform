import{_ as q,n as K,m as k,S as N,T as I,o as Q,E as x,b as ee,c as p,d as f,e,G as te,k as o,g as v,F as se,t as h,j as y,i as b,x as C,s as P,C as ne,l as ae,U as O,N as oe,r as le,V as ie,W as re,X as de,Y as ue,Z as ce,A as ge}from"./index-Ddfj5B8F.js";const me={class:"settings-page"},pe={class:"settings-container"},fe={class:"settings-content"},ve={class:"settings-section neu-card"},he={class:"settings-profile"},ye={class:"settings-value"},be={class:"settings-links"},Se={key:1,class:"settings-guest"},we={class:"settings-section neu-card"},ke={class:"settings-row setting-toggle-row"},xe=["aria-pressed"],Ce={class:"settings-row setting-toggle-row"},Ee=["aria-pressed"],Ve={class:"settings-grid"},Te={class:"setting-item"},_e={class:"dial-container"},De={class:"dial-value"},Ae={class:"settings-section neu-card"},Le={class:"settings-row"},Me={class:"theme-options",style:{display:"flex",gap:"10px"}},Ne={class:"settings-section neu-card experimental-section"},Ie={class:"experimental-grid"},Pe={class:"downloads-table-wrap"},Oe={key:0,class:"downloads-table"},Ye=["href"],Fe={key:1,class:"downloads-table-loading"},Je={key:2,class:"downloads-table-error"},D="ahoySettings",Re={__name:"SettingsView",setup(Xe){const Y=ge(),g=oe(),E=K(),S=ce(),F=k(null),l=O({masterVolume:75}),r=k(N()),d=k(I());function J(){r.value=!r.value,ie(r.value),r.value&&re()}function R(){d.value=!d.value,de(d.value),d.value&&ue()}const a=O({version:"",date:"",download_url:"",name:"",loading:!0,error:""}),A=k("");function X(){const s=new Date;A.value=s.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}let V=!1,T=null,u=null,c=null;function z(){g.isLoggedIn.value?x("/api/user/profile",{credentials:"include"}).then(s=>{var t;(t=s==null?void 0:s.preferences)!=null&&t.audioSettings&&(l.masterVolume=Math.max(0,Math.min(100,s.preferences.audioSettings.masterVolume??75))),_()}).catch(()=>_()):_()}function _(){var s;try{const t=localStorage.getItem(D);if(t){const n=JSON.parse(t);((s=n.audioSettings)==null?void 0:s.masterVolume)!=null&&(l.masterVolume=Math.max(0,Math.min(100,n.audioSettings.masterVolume)))}}catch{}w()}function B(){const s={audioSettings:{...l}};localStorage.setItem(D,JSON.stringify(s)),g.isLoggedIn.value&&x("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({preferences:{audioSettings:l}})}).catch(()=>{}),w(),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Settings saved!",type:"success"}}))}function U(){l.masterVolume=75;const s={audioSettings:{...l}};localStorage.setItem(D,JSON.stringify(s)),g.isLoggedIn.value&&x("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({preferences:{audioSettings:l}})}).catch(()=>{}),w(),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Settings reset to defaults",type:"info"}}))}function w(){var t;const s=l.masterVolume/100;document.querySelectorAll("audio").forEach(n=>{n.volume=s});try{const n=(t=E.getAudioElement)==null?void 0:t.call(E);n&&(n.volume=s)}catch{}}function L(s,t){V=!0,T=t;const n=s.currentTarget;u=m=>j(m,n),c=()=>M(),document.addEventListener("mousemove",u),document.addEventListener("mouseup",c),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("touchend",c)}function j(s,t){if(!V||!t)return;const n=s.touches?s.touches[0].clientX:s.clientX,m=s.touches?s.touches[0].clientY:s.clientY,i=t.getBoundingClientRect(),$=i.left+i.width/2,H=i.top+i.height/2,W=(Math.atan2(m-H,n-$)*(180/Math.PI)+90+360)%360,Z=Math.max(0,Math.min(100,W/1.8));T==="masterVolume"&&(l.masterVolume=Z),w()}function M(){V=!1,T=null,u&&(document.removeEventListener("mousemove",u),document.removeEventListener("touchmove",u)),c&&(document.removeEventListener("mouseup",c),document.removeEventListener("touchend",c)),u=null,c=null}async function G(){await g.logout(),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Signed out",type:"success"}})),Y.push("/")}return Q(()=>{r.value=N(),d.value=I(),z(),X(),x("/api/downloads/latest",{credentials:"include"}).then(s=>{a.version=(s==null?void 0:s.version)??"",a.date=(s==null?void 0:s.date)??"",a.download_url=(s==null?void 0:s.download_url)??"",a.name=(s==null?void 0:s.name)??"",a.loading=!1}).catch(()=>{a.error="No macOS release available",a.loading=!1})}),ee(()=>{M()}),(s,t)=>{var m;const n=le("router-link");return p(),f("div",me,[e("div",pe,[t[30]||(t[30]=te('<section class="podcasts-hero settings-page-header" data-v-31e00fa1><div class="podcasts-hero-inner" data-v-31e00fa1><h1 data-v-31e00fa1><i class="fas fa-cog" aria-hidden="true" data-v-31e00fa1></i> Settings </h1><p data-v-31e00fa1>Customize your Ahoy experience.</p></div></section><div class="settings-header desktop-only" data-v-31e00fa1><div class="settings-header-icon" data-v-31e00fa1><i class="fas fa-cog" data-v-31e00fa1></i></div><h1 data-v-31e00fa1>Settings</h1><p data-v-31e00fa1>Customize your Ahoy experience</p></div>',2)),e("div",fe,[e("div",ve,[t[10]||(t[10]=e("h2",null,[e("i",{class:"fas fa-user"}),o(" Account")],-1)),v(g).isLoggedIn.value?(p(),f(se,{key:0},[e("div",he,[t[4]||(t[4]=e("span",{class:"settings-label"},"Logged in as",-1)),e("span",ye,h((m=v(g).user.value)==null?void 0:m.email),1)]),e("div",be,[y(n,{to:"/account",class:"settings-link"},{default:b(()=>[...t[5]||(t[5]=[e("i",{class:"fas fa-user-circle"},null,-1),o(" Account & wallet ",-1)])]),_:1}),y(n,{to:"/my-saves",class:"settings-link"},{default:b(()=>[...t[6]||(t[6]=[e("i",{class:"fas fa-bookmark"},null,-1),o(" Saved ",-1)])]),_:1})]),e("button",{type:"button",class:"neu-btn neu-btn-secondary logout-btn",onClick:G},[...t[7]||(t[7]=[e("i",{class:"fas fa-sign-out-alt"},null,-1),o(" Sign out ",-1)])])],64)):(p(),f("div",Se,[t[9]||(t[9]=e("p",null,"Sign in to manage your preferences.",-1)),y(n,{to:"/login",class:"neu-btn neu-btn-primary"},{default:b(()=>[...t[8]||(t[8]=[o("Sign in",-1)])]),_:1})]))]),e("div",we,[t[17]||(t[17]=e("h2",null,[e("i",{class:"fas fa-volume-up"}),o(" Audio")],-1)),e("div",ke,[t[12]||(t[12]=e("div",{class:"setting-toggle-label"},[e("span",{class:"setting-toggle-title"},"Save chime"),e("span",{class:"setting-toggle-desc"},"Play a short sound when you save a track or show")],-1)),e("button",{type:"button",class:C(["setting-toggle-btn",{on:r.value}]),"aria-pressed":r.value,onClick:J},[...t[11]||(t[11]=[e("span",{class:"setting-toggle-thumb"},null,-1)])],10,xe)]),e("div",Ce,[t[14]||(t[14]=e("div",{class:"setting-toggle-label"},[e("span",{class:"setting-toggle-title"},"Tap sound"),e("span",{class:"setting-toggle-desc"},"A tiny chime when you tap buttons and links")],-1)),e("button",{type:"button",class:C(["setting-toggle-btn",{on:d.value}]),"aria-pressed":d.value,onClick:R},[...t[13]||(t[13]=[e("span",{class:"setting-toggle-thumb"},null,-1)])],10,Ee)]),e("div",Ve,[e("div",Te,[t[16]||(t[16]=e("label",null,"Master Volume",-1)),e("div",_e,[e("div",{ref_key:"dialEl",ref:F,class:"neu-dial",style:ne({transform:`rotate(${l.masterVolume*1.8-90}deg)`}),onMousedown:t[0]||(t[0]=P(i=>L(i,"masterVolume"),["prevent"])),onTouchstart:t[1]||(t[1]=P(i=>L(i,"masterVolume"),["prevent"]))},[...t[15]||(t[15]=[e("div",{class:"dial-handle"},null,-1)])],36),e("span",De,h(Math.round(l.masterVolume)),1)])])])]),e("div",Ae,[t[19]||(t[19]=e("h2",null,[e("i",{class:"fas fa-palette"}),o(" Appearance")],-1)),e("div",Le,[t[18]||(t[18]=e("div",{class:"setting-toggle-label"},[e("span",{class:"setting-toggle-title"},"Theme"),e("span",{class:"setting-toggle-desc"},"Choose your preferred look")],-1)),e("div",Me,[e("button",{type:"button",class:C(["neu-btn",v(S).currentTheme.value==="default"?"neu-btn-primary":"neu-btn-secondary"]),onClick:t[2]||(t[2]=i=>v(S).setTheme("default"))}," Default ",2),e("button",{type:"button",class:C(["neu-btn",v(S).currentTheme.value==="after-dark"?"neu-btn-primary":"neu-btn-secondary"]),onClick:t[3]||(t[3]=i=>v(S).setTheme("after-dark"))}," After Dark ",2)])])]),e("div",Ne,[t[25]||(t[25]=e("h2",null,[e("i",{class:"fas fa-flask"}),o(" Experimental")],-1)),t[26]||(t[26]=e("p",{class:"experimental-disclaimer"},"These features are still in development and may change or be removed.",-1)),e("div",Ie,[y(n,{to:"/focus",class:"experimental-card neu-card-inset"},{default:b(()=>[...t[20]||(t[20]=[e("div",{class:"experimental-card-icon"},[e("i",{class:"fas fa-headphones"})],-1),e("div",{class:"experimental-card-info"},[e("h3",null,"Focus Mode"),e("p",null,"Ambient audio for deep focus and relaxation")],-1),e("i",{class:"fas fa-chevron-right experimental-card-arrow"},null,-1)])]),_:1}),y(n,{to:"/mp3-player",class:"experimental-card neu-card-inset"},{default:b(()=>[...t[21]||(t[21]=[e("div",{class:"experimental-card-icon"},[e("i",{class:"fas fa-compact-disc"})],-1),e("div",{class:"experimental-card-info"},[e("h3",null,"MP3 Player"),e("p",null,"Import and play MP3s from your computer — Winamp style")],-1),e("i",{class:"fas fa-chevron-right experimental-card-arrow"},null,-1)])]),_:1}),y(n,{to:"/download",class:"experimental-card neu-card-inset"},{default:b(()=>[...t[22]||(t[22]=[e("div",{class:"experimental-card-icon"},[e("i",{class:"fas fa-download"})],-1),e("div",{class:"experimental-card-info"},[e("h3",null,"Download"),e("p",null,"Get Ahoy on web, Android, iOS, or desktop")],-1),e("i",{class:"fas fa-chevron-right experimental-card-arrow"},null,-1)])]),_:1})]),t[27]||(t[27]=e("p",{class:"downloads-table-intro"},[o("Latest macOS desktop build — also at "),e("a",{href:"/downloads",target:"_blank",rel:"noopener"},"app.ahoy.ooo/downloads"),o(".")],-1)),e("div",Pe,[a.version?(p(),f("table",Oe,[t[24]||(t[24]=e("thead",null,[e("tr",null,[e("th",null,"Date"),e("th",null,"Version"),e("th",null,"Download")])],-1)),e("tbody",null,[e("tr",null,[e("td",null,h(A.value),1),e("td",null,h(a.version),1),e("td",null,[e("a",{href:a.download_url,target:"_blank",rel:"noopener",class:"download-table-link"},[o(h(a.name||"ZIP")+" ",1),t[23]||(t[23]=e("i",{class:"fas fa-external-link-alt"},null,-1))],8,Ye)])])])])):a.loading?(p(),f("p",Fe,"Loading…")):a.error?(p(),f("p",Je,h(a.error),1)):ae("",!0)])]),e("div",{class:"settings-actions"},[e("button",{type:"button",class:"neu-btn neu-btn-secondary",onClick:U},[...t[28]||(t[28]=[e("i",{class:"fas fa-undo"},null,-1),o(" Reset to Defaults ",-1)])]),e("button",{type:"button",class:"neu-btn neu-btn-primary",onClick:B},[...t[29]||(t[29]=[e("i",{class:"fas fa-save"},null,-1),o(" Save Settings ",-1)])])])])])])}}},Ue=q(Re,[["__scopeId","data-v-31e00fa1"]]);export{Ue as default};
