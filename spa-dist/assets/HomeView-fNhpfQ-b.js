import{_ as Ee,u as De,o as Se,a as Y,b as Ve,r as Ne,c as h,d as f,e,F as E,f as D,w as P,g as y,h as se,i as L,t as g,j as G,k as X,l as H,m as p,n as Pe,p as We,q as ze,s as U,v as Be,x as Me,y as q,z as ke,A as Te,B as Fe}from"./index-DcQ9GdWE.js";import{_ as Oe}from"./ahoy_logo--Z4AShNu.js";let _e=null;function Le(){if(!_e&&typeof window<"u"){const c=window.AudioContext||window.webkitAudioContext;c&&(_e=new c)}return _e}function Qe(){if(typeof window>"u")return;const c=Le();if(!c)return;c.state==="suspended"&&c.resume().catch(()=>{});const w=c.currentTime,i=c.createOscillator(),b=c.createGain();i.type="triangle",i.frequency.setValueAtTime(800,w),i.frequency.exponentialRampToValueAtTime(1200,w+.05),b.gain.setValueAtTime(0,w),b.gain.linearRampToValueAtTime(.05,w+.01),b.gain.exponentialRampToValueAtTime(.001,w+.05),i.connect(b),b.connect(c.destination),i.start(w),i.stop(w+.05)}function qe(){if(typeof window>"u")return;const c=Le();if(!c)return;c.state==="suspended"&&c.resume().catch(()=>{});const w=c.currentTime,i=c.createOscillator(),b=c.createGain();i.type="square",i.frequency.setValueAtTime(400,w),i.frequency.exponentialRampToValueAtTime(600,w+.1),b.gain.setValueAtTime(0,w),b.gain.linearRampToValueAtTime(.08,w+.01),b.gain.exponentialRampToValueAtTime(.001,w+.1),i.connect(b),b.connect(c.destination),i.start(w),i.stop(w+.1)}function Ge(){return{playHoverSound:Qe,playClickSound:qe}}const ae={mounted(c,w){const i={max:15,perspective:1e3,scale:1.05,speed:1e3,...w.value};c.style.transformStyle="preserve-3d",c.style.transform=`perspective(${i.perspective}px)`;const b=I=>{const T=c.getBoundingClientRect(),j=I.clientX-T.left,le=I.clientY-T.top,A=T.width/2,m=T.height/2,C=(le-m)/m*-i.max,S=(j-A)/A*i.max;(i.target?c.querySelectorAll(i.target):[c]).forEach(k=>{k.style.transition="none",k.style.transform=`
                    perspective(${i.perspective}px)
                    rotateX(${C}deg)
                    rotateY(${S}deg)
                    scale3d(${i.scale}, ${i.scale}, ${i.scale})
                 `})},z=()=>{(i.target?c.querySelectorAll(i.target):[c]).forEach(T=>{T.style.transition=`transform ${i.speed}ms cubic-bezier(.03,.98,.52,.99)`,T.style.transform=`
                    perspective(${i.perspective}px)
                    rotateX(0deg)
                    rotateY(0deg)
                    scale3d(1, 1, 1)
                `})};c.addEventListener("mousemove",b),c.addEventListener("mouseleave",z),c._tiltCleanup=()=>{c.removeEventListener("mousemove",b),c.removeEventListener("mouseleave",z)}},unmounted(c){c._tiltCleanup&&c._tiltCleanup()}},Xe={key:0,class:"explore-widgets-container"},Je={class:"explore-widget recent-widget"},Ue={class:"widget-grid"},He={key:0,class:"empty-placeholder"},Ke={class:"card-image"},et=["src","alt"],tt={class:"card-title"},st={class:"explore-widget saves-widget"},at={class:"widget-grid"},lt={key:0,class:"empty-placeholder"},nt={class:"card-image"},it=["src","alt"],ot={class:"card-title"},rt={class:"explore-widget video-widget"},ct={class:"widget-grid"},dt={class:"card-image"},ut=["src","alt"],vt={class:"card-title"},ht={class:"explore-widget podcast-widget"},pt={class:"widget-grid"},mt={class:"card-image"},gt=["src","alt"],ft={class:"card-title"},wt={class:"explore-widget music-widget"},yt={class:"widget-grid"},kt={class:"card-image"},_t=["src","alt"],bt={class:"card-title"},Ct={class:"explore-widget artist-widget"},xt={class:"widget-grid"},$t={class:"card-image circle"},Mt=["src","alt"],Tt={class:"card-title"},St={__name:"ExploreWidgets",setup(c){const w=p(!0),i=p([]),b=p([]),z=p([]),I=p([]),T=p([]),j=p([]),le=De(),{playHoverSound:A,playClickSound:m}=Ge();typeof window<"u"&&window.matchMedia("(hover: hover)").matches;function C(k,n){return!k||k.length===0?[]:[...k].sort(()=>.5-Math.random()).slice(0,n)}function S(){try{const k=localStorage.getItem("ahoy.recentlyPlayed.v1");k&&(j.value=JSON.parse(k).slice(0,6))}catch(k){console.error("Failed to load recently played",k)}}function Z(){const k=Object.values(le.bookmarks.value||{});T.value=k.reverse().slice(0,6)}return Se(async()=>{try{const[k,n,M,a]=await Promise.all([Y("/api/podcasts").catch(()=>({shows:[]})),Y("/api/shows").catch(()=>({shows:[]})),Y("/api/music").catch(()=>({tracks:[],albums:[]})),Y("/api/artists").catch(()=>({artists:[]}))]);i.value=C(k.shows||[],6),b.value=C(n.shows||[],6);const ce=M.tracks||[],ne=new Map,de=[];for(const v of ce)v.album&&v.album!=="Single"&&!ne.has(v.album)?ne.set(v.album,{id:v.album,title:v.album,cover_art:v.cover_art||v.artwork,artist:v.artist,type:"album"}):de.push({id:v.id,title:v.title,cover_art:v.cover_art||v.artwork,artist:v.artist,type:"track"});let V=Array.from(ne.values());if(V.length<3){const v=3-V.length,K=C(de,v);V=[...V,...K]}if(V.length<3){const v=3-V.length,K=new Set(V.map(u=>u.id||u.title)),N=ce.filter(u=>!K.has(u.id)&&!K.has(u.title)),B=C(N,v).map(u=>({id:u.id,title:u.title,cover_art:u.cover_art||u.artwork,artist:u.artist,type:"track"}));V=[...V,...B]}z.value=V.slice(0,6);const ve=(a.artists||[]).map(v=>({...v,slug:v.slug||v.id||(v.name||"").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}));I.value=C(ve,6),S(),Z(),window.addEventListener("recentlyPlayed:updated",v=>{v.detail&&v.detail.recent&&(j.value=v.detail.recent.slice(0,12))}),window.addEventListener("bookmarks:changed",Z)}catch(k){console.error("Error loading explore widgets",k)}finally{w.value=!1}}),Ve(()=>{window.removeEventListener("recentlyPlayed:updated",S),window.removeEventListener("bookmarks:changed",Z)}),(k,n)=>{const M=Ne("router-link");return w.value?H("",!0):(h(),f("section",Xe,[e("div",Je,[n[1]||(n[1]=e("div",{class:"widget-header"},[e("div",{class:"header-icon"},[e("i",{class:"fas fa-history"})]),e("div",{class:"header-text"},[e("h3",null,"Recently Played"),e("p",null,"Jump back in")])],-1)),e("div",Ue,[j.value.length===0?(h(),f("div",He," No history yet ")):(h(!0),f(E,{key:1},D(j.value,a=>P((h(),se(M,{key:a.key||a.id,to:`/${a.type==="show"?"shows":"music"}/${a.id}`,class:"widget-card",onMouseenter:y(A),onClick:y(m)},{default:L(()=>[e("div",Ke,[e("img",{src:a.artwork||a.cover_art||"/static/img/default-cover.jpg",alt:a.title,loading:"lazy"},null,8,et),n[0]||(n[0]=e("div",{class:"play-icon"},[e("i",{class:"fas fa-play"})],-1))]),e("div",tt,g(a.title),1)]),_:2},1032,["to","onMouseenter","onClick"])),[[y(ae),{target:".card-image img",scale:1.1,speed:600,max:10}]])),128))]),n[2]||(n[2]=e("div",{class:"widget-cta cta-indigo",style:{cursor:"default"}}," Your History ",-1))]),e("div",st,[n[4]||(n[4]=e("div",{class:"widget-header"},[e("div",{class:"header-icon"},[e("i",{class:"fas fa-bookmark"})]),e("div",{class:"header-text"},[e("h3",null,"My Saves"),e("p",null,"Your Favorites")])],-1)),e("div",at,[T.value.length===0?(h(),f("div",lt," Nothing### Video Widget Unification - Verified that Videos now appear square (1:1), matching the Podcasts and Music sections. - Verified that the grid items align perfectly across different widgets. ### Backend API Test ")):(h(!0),f(E,{key:1},D(T.value,a=>P((h(),se(M,{key:a.id||a.slug,to:a.type==="artist"?`/artists/${a.slug}`:`/${a.type==="show"?"shows":"music"}/${a.id}`,class:"widget-card",onMouseenter:y(A),onClick:y(m)},{default:L(()=>[e("div",nt,[e("img",{src:a.cover_art||"/static/img/default-cover.jpg",alt:a.title,loading:"lazy"},null,8,it)]),e("div",ot,g(a.title||a.name),1)]),_:2},1032,["to","onMouseenter","onClick"])),[[y(ae),{target:".card-image img",scale:1.1,speed:600,max:10}]])),128))]),G(M,{to:"/profile",class:"widget-cta cta-gold",onClick:y(m)},{default:L(()=>[...n[3]||(n[3]=[X(" View All Saves ",-1)])]),_:1},8,["onClick"])]),e("div",rt,[n[7]||(n[7]=e("div",{class:"widget-header"},[e("div",{class:"header-icon"},[e("i",{class:"fas fa-video"})]),e("div",{class:"header-text"},[e("h3",null,"Videos"),e("p",null,"Watch latest content")])],-1)),e("div",ct,[(h(!0),f(E,null,D(b.value,a=>P((h(),se(M,{key:a.id,to:`/videos?play=${a.id}`,class:"widget-card video-card",onMouseenter:y(A),onClick:y(m)},{default:L(()=>[e("div",dt,[e("img",{src:a.thumbnail||"/static/img/default-cover.jpg",alt:a.title,loading:"lazy"},null,8,ut),n[5]||(n[5]=e("div",{class:"play-icon"},[e("i",{class:"fas fa-play"})],-1))]),e("div",vt,g(a.title),1)]),_:2},1032,["to","onMouseenter","onClick"])),[[y(ae),{target:".card-image img",scale:1.1,speed:600,max:10}]])),128))]),G(M,{to:"/videos",class:"widget-cta cta-red",onClick:y(m)},{default:L(()=>[...n[6]||(n[6]=[X(" Watch Now ",-1)])]),_:1},8,["onClick"])]),e("div",ht,[n[9]||(n[9]=e("div",{class:"widget-header"},[e("div",{class:"header-icon"},[e("i",{class:"fas fa-podcast"})]),e("div",{class:"header-text"},[e("h3",null,"Podcasts"),e("p",null,"Fresh episodes & shows")])],-1)),e("div",pt,[(h(!0),f(E,null,D(i.value,a=>P((h(),se(M,{key:a.slug,to:`/podcasts/${a.slug}`,class:"widget-card",onMouseenter:y(A),onClick:y(m)},{default:L(()=>[e("div",mt,[e("img",{src:a.artwork||"/static/img/default-cover.jpg",alt:a.title,loading:"lazy"},null,8,gt)]),e("div",ft,g(a.title),1)]),_:2},1032,["to","onMouseenter","onClick"])),[[y(ae),{target:".card-image img",scale:1.1,speed:600,max:10}]])),128))]),G(M,{to:"/podcasts",class:"widget-cta cta-purple",onClick:y(m)},{default:L(()=>[...n[8]||(n[8]=[X(" Explore Podcasts ",-1)])]),_:1},8,["onClick"])]),e("div",wt,[n[11]||(n[11]=e("div",{class:"widget-header"},[e("div",{class:"header-icon"},[e("i",{class:"fas fa-music"})]),e("div",{class:"header-text"},[e("h3",null,"Music"),e("p",null,"Albums & Singles")])],-1)),e("div",yt,[(h(!0),f(E,null,D(z.value,a=>P((h(),se(M,{key:a.id||a.title,to:a.type==="album"?{path:"/music",query:{q:a.title}}:`/music/${a.id}`,class:"widget-card",onMouseenter:y(A),onClick:y(m)},{default:L(()=>[e("div",kt,[e("img",{src:a.cover_art||"/static/img/default-cover.jpg",alt:a.title,loading:"lazy"},null,8,_t)]),e("div",bt,g(a.title),1)]),_:2},1032,["to","onMouseenter","onClick"])),[[y(ae),{target:".card-image img",scale:1.1,speed:600,max:10}]])),128))]),G(M,{to:"/music",class:"widget-cta cta-blue",onClick:y(m)},{default:L(()=>[...n[10]||(n[10]=[X(" Music Library ",-1)])]),_:1},8,["onClick"])]),e("div",Ct,[n[13]||(n[13]=e("div",{class:"widget-header"},[e("div",{class:"header-icon"},[e("i",{class:"fas fa-users"})]),e("div",{class:"header-text"},[e("h3",null,"Artists"),e("p",null,"Meet the creators")])],-1)),e("div",xt,[(h(!0),f(E,null,D(I.value,a=>P((h(),se(M,{key:a.slug,to:`/artists/${a.slug}`,class:"widget-card",onMouseenter:y(A),onClick:y(m)},{default:L(()=>[e("div",$t,[e("img",{src:a.image||"/static/img/default-avatar.png",alt:a.name,loading:"lazy"},null,8,Mt)]),e("div",Tt,g(a.name),1)]),_:2},1032,["to","onMouseenter","onClick"])),[[y(ae),{target:".card-image img",scale:1.1,speed:600,max:10}]])),128))]),G(M,{to:"/artists",class:"widget-cta cta-green",onClick:y(m)},{default:L(()=>[...n[12]||(n[12]=[X(" Discover Artists ",-1)])]),_:1},8,["onClick"])])]))}}},Vt=Ee(St,[["__scopeId","data-v-07dd44d1"]]),Nt={class:"home-page"},Lt={class:"podcasts-hero"},At={key:0,class:"search-results-container"},Zt={class:"search-results-header"},Rt={class:"results-count"},Yt={class:"search-actions"},It=["title"],jt={class:"search-results-list"},Et=["href","onClick"],Dt={class:"result-image"},Pt=["src","alt"],Wt={class:"result-type-badge"},zt={class:"result-info"},Bt={class:"result-title"},Ft={class:"result-subtitle"},Ot={class:"live-dashboard"},Qt={class:"dashboard-grid"},qt={class:"dash-preview"},Gt=["src"],Xt={class:"dash-overlay"},Jt={class:"dash-badges"},Ut={class:"channel-badge"},Ht={key:0,class:"channel-nav"},Kt={class:"dash-content"},es={class:"dash-actions"},ts={class:"dashboard-sidebar"},ss={class:"dash-thumb"},as=["src"],ls={class:"dash-info"},ns={class:"radio-next-list"},is={class:"track-title"},os={class:"track-artist"},rs={key:0,class:"tv-channel-strip"},cs={class:"tv-channel-strip-list"},ds=["onClick"],us={class:"tv-channel-strip-meta"},vs={class:"tv-channel-strip-name"},hs={class:"tv-channel-strip-now"},ps={key:0,class:"tv-channel-strip-next"},ms={class:"whats-new-section"},gs={class:"whats-new-container"},fs={class:"whats-new-header"},ws={key:0,href:"/whats-new",class:"view-all-link"},ys={class:"whats-new-loading"},ks={class:"whats-new-updates"},_s=["href"],bs={class:"whats-new-content"},Cs={class:"whats-new-date"},xs={class:"whats-new-empty"},Ts={__name:"HomeView",setup(c){const w=Fe(),i=Pe(),b=["https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExeGlreWRqaHZxc295NHNvZWs4MWJoeTIwdXk1NnNuN2syOTE4Z3JleSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/14hS1ZEmSfKdTW/giphy.gif","https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExdnI2M2VxZmhkeTM1bHVoZmV0NmdmYzVjeWt3eHc1eGZtOWk4N3c0YyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/AS9LIFttYzkc0/giphy.gif","https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExYjB3cjhjNXEwMXhrcTFvYnF4Zm5xamduNm8ycjB4ZnJneDhyb2IzNiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/wSYE7n6pk9dqRXzitR/giphy.gif","https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExMWVkeG1sY3hvYTlwMjl0bWZrbTI3bXlqOGQ2cmYyZXVmZ2RuZWIwcCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/xWC0BCZtkDxE869erD/giphy.gif","https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExdjJ4Mml1ajMzNGh1ODVrN3J3cnVtbjZkeXZnN29wNmQ2aHhncTJ0OCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/l1J9BYe5eZccC4Nck/giphy.gif","https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExOWZnNnhxbjgzM3B1NXdzOWJwZjJnM3hveTJwNnE1bjZrb3ZicXU3bSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/3oGRFs7yHPDlB8JYsg/giphy.gif"],z=p(""),I=p(!1),T=p(50),j=p(50);function le(s){if(!I.value)return;const t=s.currentTarget.getBoundingClientRect(),r=s.clientX-t.left,o=s.clientY-t.top,x=r/t.width*100,d=o/t.height*100;T.value=40+x/100*20,j.value=40+d/100*20}function A(){I.value=!1,T.value=50,j.value=50}const m=p(""),C=p([]),S=p(!1),Z=p(!1),k=p(null);let n={tracks:[],albums:[],shows:[],podcasts:[],artists:[]};const M=Te(()=>S.value?C.value:C.value.slice(0,6));async function a(){try{const[s,t,r,o]=await Promise.all([Y("/api/music").catch(()=>({tracks:[],albums:[]})),Y("/api/shows").catch(()=>({shows:[]})),Y("/api/podcasts").catch(()=>({shows:[]})),Y("/api/artists").catch(()=>({artists:[]}))]);n.tracks=(s.tracks||[]).map(d=>({...d,type:"track"}));const x=new Map;for(const d of s.tracks||[])d.album&&d.album!=="Single"&&!x.has(d.album)&&x.set(d.album,{id:d.album,title:d.album,name:d.album,artist:d.artist,cover_art:d.cover_art||d.artwork,type:"album"});n.albums=Array.from(x.values()),n.shows=(t.shows||[]).map(d=>({...d,type:"video"})),n.podcasts=(r.shows||[]).map(d=>({...d,type:"podcast"})),n.artists=(o.artists||[]).map(d=>({...d,type:"artist"}))}catch(s){console.error("Error loading searchable data",s)}}function ce(s){var o,x,d,$,R,ie,oe,re,l,Q,ye,$e;if(!s||s.trim().length<2){C.value=[],Z.value=!1;return}Z.value=!0;const t=s.toLowerCase().trim(),r=[];for(const _ of n.tracks)((o=_.title)!=null&&o.toLowerCase().includes(t)||(x=_.artist)!=null&&x.toLowerCase().includes(t)||(d=_.album)!=null&&d.toLowerCase().includes(t))&&r.push(_);for(const _ of n.albums)(($=_.title)!=null&&$.toLowerCase().includes(t)||(R=_.artist)!=null&&R.toLowerCase().includes(t))&&r.push(_);for(const _ of n.shows)((ie=_.title)!=null&&ie.toLowerCase().includes(t)||(oe=_.artist)!=null&&oe.toLowerCase().includes(t)||(re=_.host)!=null&&re.toLowerCase().includes(t))&&r.push(_);for(const _ of n.podcasts)((l=_.title)!=null&&l.toLowerCase().includes(t)||(Q=_.host)!=null&&Q.toLowerCase().includes(t)||(ye=_.description)!=null&&ye.toLowerCase().includes(t))&&r.push(_);for(const _ of n.artists)($e=_.name)!=null&&$e.toLowerCase().includes(t)&&r.push(_);C.value=r.slice(0,50)}function ne(){k.value&&clearTimeout(k.value),k.value=setTimeout(()=>{ce(m.value)},300)}function de(){m.value.trim()&&C.value.length>0&&(Z.value=!0,S.value=!0)}function V(){m.value="",C.value=[],S.value=!1,Z.value=!1}function ve(){if(m.value.trim())try{const s=JSON.parse(localStorage.getItem("ahoy.savedSearches")||"[]"),t={query:m.value,timestamp:new Date().toISOString(),resultsCount:C.value.length};s.find(o=>o.query===m.value)||(s.unshift(t),localStorage.setItem("ahoy.savedSearches",JSON.stringify(s.slice(0,20))),alert(`Search saved: "${m.value}"`))}catch(s){console.error("Failed to save search",s)}}function v(s){switch(s.type){case"track":return`/music/${s.id}`;case"album":return`/music?q=${encodeURIComponent(s.title)}`;case"video":return`/videos?play=${s.id}`;case"podcast":return`/podcasts/${s.slug||s.id}`;case"artist":return`/artists/${s.slug||s.id}`;default:return"#"}}function K(s){w.push(v(s)),V()}const N=p([]),B=p(0),u=p(null),F=p(null),ue=p({}),he=p({});let pe=null;const Ae={misc:"Channel 01 — Misc",films:"Channel 02 — Short Films","music-videos":"Channel 03 — Music Videos","live-shows":"Channel 04 — Live Shows"};function be(s,t){return Ae[s.id]||`Channel ${String(t+1).padStart(2,"0")} — ${s.name||"Unknown"}`}function Ce(){var o,x;const s=new Date().getHours(),t={},r={};for(let d=0;d<N.value.length;d++){const $=N.value[d];if((o=$==null?void 0:$.items)!=null&&o.length){const R=s%$.items.length;t[$.id]=$.items[R],r[$.id]=$.items.length>R+1?$.items[R+1]:$.items[0]}}if(ue.value=t,he.value=r,(x=F.value)!=null&&x.id){const d=F.value.id;t[d]&&(u.value=t[d])}}function me(s){var r;if(!N.value.length)return;B.value=(s+N.value.length)%N.value.length;const t=N.value[B.value];F.value={...t,name:be(t,B.value)},ue.value[t.id]?u.value=ue.value[t.id]:(r=t.items)!=null&&r.length?u.value=t.items[0]:u.value={id:"placeholder",title:"No content available",thumbnail:"/static/img/default-cover.jpg",host:t.name}}function xe(s){N.value.length&&me(B.value+(s==="next"?1:-1))}function ge(s){!(s!=null&&s.id)||s.id==="placeholder"||s.id==="error"||w.push({path:"/videos",query:{play:s.id}})}const J=p([]),fe=p([]),ee=p([]),W=p(null),we=Te(()=>{if(!W.value||!i.currentTrack)return!1;const s=String(W.value.id??""),t=String(i.currentTrack.id??"");return s===t&&i.isPlaying});function Ze(){const s=[...J.value];s.sort(()=>.5-Math.random()),fe.value=s.map(t=>({...t,type:"track"})),ee.value=fe.value.slice(0,20)}function Re(){if(we.value){i.pause();return}if(W.value){i.resume();return}const s=fe.value[0]||ee.value[0];s&&(W.value=s,i.setQueue(J.value,J.value.findIndex(t=>t.id===s.id)))}const O=p([]),te=p(!0);function Ye(s){if(!s)return"";try{return new Date(s).toLocaleDateString(void 0,{year:"numeric",month:"short"})}catch{return s}}function Ie(s){if(s.year&&s.month&&s.section){const t=`/whats-new/${s.year}/${s.month}/${s.section}`;return s.slug?`${t}#update-${s.slug}`:t}return s.link?s.link:"/whats-new"}function je(s){var r;const t=(s==null?void 0:s.channels)??((r=s==null?void 0:s.data)==null?void 0:r.channels)??[];return Array.isArray(t)?t.map(o=>({...o,id:(o==null?void 0:o.id)??"misc",name:(o==null?void 0:o.name)??"Channel",items:Array.isArray(o==null?void 0:o.items)?o.items:[]})):[]}return Se(async()=>{z.value=b[Math.floor(Math.random()*b.length)],a();try{let s=null;try{s=await(await fetch("/api/live-tv/channels?_="+Date.now())).json()}catch{s=await Y("/api/live-tv/channels").catch(()=>null)}const t=s?je(s):[];if(N.value=t,t.length){const r=t.find(o=>o.id==="misc")||t[0];B.value=t.findIndex(o=>o.id===r.id),Ce(),me(B.value)}else u.value={id:"placeholder",title:"Loading Live TV...",thumbnail:"/static/img/default-cover.jpg",host:"Ahoy TV"},F.value={id:"misc",name:"Channel 01 — Misc"};pe=setInterval(Ce,60*1e3)}catch{u.value={id:"error",title:"Live TV",thumbnail:"/static/img/default-cover.jpg",host:"Ahoy TV"},F.value={id:"misc",name:"Channel 01 — Misc"}}try{const t=((await Y("/api/music").catch(()=>({tracks:[]}))).tracks||[]).filter(o=>o.audio_url||o.preview_url),r=new Set;J.value=t.filter(o=>r.has(o.id)?!1:(r.add(o.id),!0)),Ze()}catch{}i.currentTrack&&J.value.length&&J.value.some(t=>{var r;return String(t.id)===String((r=i.currentTrack)==null?void 0:r.id)})&&(W.value=i.currentTrack),te.value=!0;try{const t=(await Y("/api/whats-new").catch(()=>({updates:[]}))).updates;if(Array.isArray(t))O.value=t.slice(0,4);else if(t&&typeof t=="object"){const r=[];for(const o of Object.keys(t).sort().reverse())for(const x of Object.keys(t[o]||{}).sort().reverse())for(const d of Object.keys(t[o][x]||{})){const $=(t[o][x][d].items||[]).map(R=>({...R,year:o,month:x,section:d}));r.push(...$)}O.value=r.slice(0,4)}else O.value=[]}catch{O.value=[]}finally{te.value=!1}}),Ve(()=>{pe&&clearInterval(pe)}),We(()=>i.currentTrack,s=>{if(!s)return;J.value.some(r=>String(r.id)===String(s.id))&&(W.value=s)},{deep:!0}),(s,t)=>{var o,x,d,$,R,ie,oe,re;const r=Ne("router-link");return h(),f("div",Nt,[e("section",Lt,[e("div",{class:"podcasts-hero-inner",style:ze({backgroundImage:`url(${z.value})`,backgroundPosition:`${T.value}% ${j.value}%`}),onMouseenter:t[2]||(t[2]=l=>I.value=!0),onMouseleave:A,onMousemove:le},[G(r,{to:"/about",class:"hero-logo-container"},{default:L(()=>[...t[9]||(t[9]=[e("img",{src:Oe,alt:"Ahoy Logo",class:"hero-logo"},null,-1)])]),_:1}),e("div",{class:U(["hero-search-wrapper",{"has-results":Z.value&&C.value.length>0,expanded:S.value}])},[P(e("input",{type:"text",class:"hero-search-input",placeholder:"Search artists, tracks, or shows...","onUpdate:modelValue":t[0]||(t[0]=l=>m.value=l),onInput:ne,onKeydown:Me(de,["enter"])},null,544),[[Be,m.value]]),Z.value&&C.value.length>0?(h(),f("div",At,[e("div",Zt,[e("span",Rt,g(C.value.length)+" "+g(C.value.length===1?"result":"results"),1),e("div",Yt,[e("button",{type:"button",class:U(["search-action-btn",{active:S.value}]),onClick:t[1]||(t[1]=l=>S.value=!S.value),title:S.value?"Collapse":"Expand"},[e("i",{class:U(S.value?"fas fa-compress-alt":"fas fa-expand-alt")},null,2)],10,It),e("button",{type:"button",class:"search-action-btn",onClick:ve,title:"Save Search"},[...t[10]||(t[10]=[e("i",{class:"fas fa-bookmark"},null,-1)])]),e("button",{type:"button",class:"search-action-btn close-btn",onClick:V,title:"Clear"},[...t[11]||(t[11]=[e("i",{class:"fas fa-times"},null,-1)])])])]),e("div",jt,[(h(!0),f(E,null,D(M.value,l=>(h(),f("a",{key:l.id,href:v(l),class:"search-result-item",onClick:q(Q=>K(l),["prevent"])},[e("div",Dt,[e("img",{src:l.image||l.cover_art||l.artwork||l.thumbnail||"/static/img/default-cover.jpg",alt:l.title||l.name,loading:"lazy"},null,8,Pt),e("div",Wt,g(l.type),1)]),e("div",zt,[e("div",Bt,g(l.title||l.name),1),e("div",Ft,g(l.artist||l.host||l.description||""),1)]),t[12]||(t[12]=e("div",{class:"result-arrow"},[e("i",{class:"fas fa-chevron-right"})],-1))],8,Et))),128))])])):H("",!0)],2)],36)]),e("section",Ot,[e("div",Qt,[e("div",{class:"dashboard-main",role:"button",tabindex:"0",onClick:t[7]||(t[7]=l=>u.value&&u.value.id!=="placeholder"&&u.value.id!=="error"?ge(u.value):null),onKeydown:t[8]||(t[8]=Me(q(l=>u.value&&u.value.id!=="placeholder"&&u.value.id!=="error"?ge(u.value):null,["prevent"]),["enter"]))},[e("div",qt,[e("img",{src:((o=u.value)==null?void 0:o.thumbnail)||"/static/img/default-cover.jpg",alt:"Live TV",class:"dash-bg"},null,8,Gt),e("div",Xt,[e("div",Jt,[t[13]||(t[13]=e("span",{class:"live-badge"},"LIVE TV",-1)),e("span",Ut,g(((x=F.value)==null?void 0:x.name)||"Channel 01 — Misc"),1)]),N.value.length>1?(h(),f("div",Ht,[e("button",{type:"button",class:"channel-nav-btn","aria-label":"Previous channel",onClick:t[3]||(t[3]=q(l=>xe("prev"),["stop"]))},[...t[14]||(t[14]=[e("i",{class:"fas fa-chevron-left"},null,-1)])]),e("button",{type:"button",class:"channel-nav-btn","aria-label":"Next channel",onClick:t[4]||(t[4]=q(l=>xe("next"),["stop"]))},[...t[15]||(t[15]=[e("i",{class:"fas fa-chevron-right"},null,-1)])])])):H("",!0),e("div",Kt,[e("h2",null,g(((d=u.value)==null?void 0:d.title)||"Loading..."),1),e("p",null,g((($=u.value)==null?void 0:$.artist)||((R=u.value)==null?void 0:R.host)||""),1),e("div",es,[u.value&&u.value.id!=="placeholder"&&u.value.id!=="error"?(h(),f("button",{key:0,type:"button",class:"dash-play-btn",onClick:t[5]||(t[5]=q(l=>ge(u.value),["stop"]))},[...t[16]||(t[16]=[e("i",{class:"fas fa-play"},null,-1),X(" Watch Now ",-1)])])):H("",!0),G(r,{to:"/live-tv",class:"dash-guide-btn",onClick:t[6]||(t[6]=q(()=>{},["stop"]))},{default:L(()=>[...t[17]||(t[17]=[e("i",{class:"fas fa-tv"},null,-1),X(" View All Channels ",-1)])]),_:1})])])])])],32),e("div",ts,[t[21]||(t[21]=e("div",{class:"sidebar-header"},[e("h3",null,"Live Radio")],-1)),e("div",{class:U(["dash-item radio-item",{active:we.value}])},[e("div",ss,[e("img",{src:((ie=W.value||ee.value[0])==null?void 0:ie.cover_art)||"https://ahoy.ooo/images/Ahoy-Indie-Media-DEFAULT-COVER-A-8.jpg",alt:"Radio"},null,8,as),t[18]||(t[18]=e("div",{class:"dash-icon"},[e("i",{class:"fas fa-broadcast-tower"})],-1))]),e("div",ls,[t[19]||(t[19]=e("div",{class:"dash-label"},"On Air Now",-1)),e("h4",null,g(((oe=W.value||ee.value[0])==null?void 0:oe.title)||"Loading..."),1),e("p",null,g(((re=W.value||ee.value[0])==null?void 0:re.artist)||""),1)]),e("button",{type:"button",class:"dash-action-btn","aria-label":"Play/Pause radio",onClick:q(Re,["stop"])},[e("i",{class:U(we.value?"fas fa-pause":"fas fa-play")},null,2)])],2),e("div",ns,[t[20]||(t[20]=e("div",{class:"list-label"},"Up Next",-1)),(h(!0),f(E,null,D(ee.value.slice(0,3),l=>(h(),f("div",{key:l.id,class:"mini-track"},[e("span",is,g(l.title),1),e("span",os,g(l.artist),1)]))),128))])])]),N.value.length>1?(h(),f("div",rs,[t[23]||(t[23]=e("div",{class:"tv-channel-strip-header"},[e("div",{class:"tv-channel-strip-title"},"Live TV Channels"),e("div",{class:"tv-channel-strip-subtitle"},"Tap a channel to switch")],-1)),e("div",cs,[(h(!0),f(E,null,D(N.value,(l,Q)=>(h(),f("button",{key:l.id,type:"button",class:U(["tv-channel-strip-item",{active:F.value&&F.value.id===l.id}]),onClick:q(ye=>me(Q),["stop"])},[e("div",us,[e("span",vs,g(be(l,Q)),1),t[22]||(t[22]=e("span",{class:"tv-channel-strip-live"},"LIVE",-1))]),e("div",hs,g((ue.value[l.id]||{}).title||"No content available"),1),he.value[l.id]?(h(),f("div",ps," Up next: "+g((he.value[l.id]||{}).title||""),1)):H("",!0)],10,ds))),128))])])):H("",!0)]),G(Vt),e("section",ms,[e("div",gs,[e("div",fs,[t[25]||(t[25]=e("h2",null,"What's New at Ahoy",-1)),!te.value&&O.value.length>0?(h(),f("a",ws,[...t[24]||(t[24]=[X(" View All ",-1),e("i",{class:"fas fa-arrow-right"},null,-1)])])):H("",!0)]),P(e("div",ys,[...t[26]||(t[26]=[e("span",null,"Loading updates...",-1)])],512),[[ke,te.value]]),P(e("div",ks,[(h(!0),f(E,null,D(O.value,(l,Q)=>(h(),f("a",{key:l.id||l.title||Q,href:Ie(l),class:U(["whats-new-item clickable","type-"+(l.type||"update")])},[e("div",bs,[e("h3",null,g(l.title),1),e("p",null,g(l.description),1),e("span",Cs,g(Ye(l.date,l.type)),1)]),t[27]||(t[27]=e("div",{class:"whats-new-arrow"},[e("i",{class:"fas fa-chevron-right"})],-1))],10,_s))),128))],512),[[ke,!te.value&&O.value.length>0]]),P(e("div",xs,[...t[28]||(t[28]=[e("p",null,"No updates available at this time.",-1),e("a",{href:"/whats-new",class:"view-archive-link"},"View Archive",-1)])],512),[[ke,!te.value&&O.value.length===0]])])])])}}};export{Ts as default};
