import{_ as F,u as J,o as Y,b as R,c as y,d as S,e as t,G as X,f as o,B as V,F as j,t as k,j as c,k as m,h as M,C as z,E as x,N as G,p as U,m as H,S as q,s as K}from"./index-CQc-P5P4.js";const W={class:"settings-page"},$={class:"settings-container"},Q={class:"settings-content"},Z={class:"settings-section neu-card"},ee={class:"settings-profile"},te={class:"settings-value"},se={class:"settings-links"},ne={key:1,class:"settings-guest"},ae={class:"settings-section neu-card"},oe={class:"settings-grid"},ie={class:"setting-item"},le={class:"dial-container"},re={class:"dial-value"},de={class:"settings-section neu-card experimental-section"},ue={class:"experimental-grid"},b="ahoySettings",ce={__name:"SettingsView",setup(me){const C=K(),d=G(),g=J(),L=H(null),a=q({masterVolume:75});let p=!1,v=null,l=null,r=null;function _(){d.isLoggedIn.value?x("/api/user/profile",{credentials:"include"}).then(s=>{var e;(e=s==null?void 0:s.preferences)!=null&&e.audioSettings&&(a.masterVolume=Math.max(0,Math.min(100,s.preferences.audioSettings.masterVolume??75))),h()}).catch(()=>h()):h()}function h(){var s;try{const e=localStorage.getItem(b);if(e){const n=JSON.parse(e);((s=n.audioSettings)==null?void 0:s.masterVolume)!=null&&(a.masterVolume=Math.max(0,Math.min(100,n.audioSettings.masterVolume)))}}catch{}f()}function A(){const s={audioSettings:{...a}};localStorage.setItem(b,JSON.stringify(s)),d.isLoggedIn.value&&x("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({preferences:{audioSettings:a}})}).catch(()=>{}),f(),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Settings saved!",type:"success"}}))}function D(){a.masterVolume=75;const s={audioSettings:{...a}};localStorage.setItem(b,JSON.stringify(s)),d.isLoggedIn.value&&x("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({preferences:{audioSettings:a}})}).catch(()=>{}),f(),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Settings reset to defaults",type:"info"}}))}function f(){var e;const s=a.masterVolume/100;document.querySelectorAll("audio").forEach(n=>{n.volume=s});try{const n=(e=g.getAudioElement)==null?void 0:e.call(g);n&&(n.volume=s)}catch{}}function w(s,e){p=!0,v=e;const n=s.currentTarget;l=u=>I(u,n),r=()=>E(),document.addEventListener("mousemove",l),document.addEventListener("mouseup",r),document.addEventListener("touchmove",l,{passive:!1}),document.addEventListener("touchend",r)}function I(s,e){if(!p||!e)return;const n=s.touches?s.touches[0].clientX:s.clientX,u=s.touches?s.touches[0].clientY:s.clientY,i=e.getBoundingClientRect(),T=i.left+i.width/2,P=i.top+i.height/2,O=(Math.atan2(u-P,n-T)*(180/Math.PI)+90+360)%360,B=Math.max(0,Math.min(100,O/1.8));v==="masterVolume"&&(a.masterVolume=B),f()}function E(){p=!1,v=null,l&&(document.removeEventListener("mousemove",l),document.removeEventListener("touchmove",l)),r&&(document.removeEventListener("mouseup",r),document.removeEventListener("touchend",r)),l=null,r=null}async function N(){await d.logout(),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Signed out",type:"success"}})),C.push("/")}return Y(()=>{_()}),R(()=>{E()}),(s,e)=>{var u;const n=U("router-link");return y(),S("div",W,[t("div",$,[e[19]||(e[19]=X('<section class="podcasts-hero settings-page-header" data-v-30fc67ce><div class="podcasts-hero-inner" data-v-30fc67ce><h1 data-v-30fc67ce><i class="fas fa-cog" aria-hidden="true" data-v-30fc67ce></i> Settings </h1><p data-v-30fc67ce>Customize your Ahoy experience.</p></div></section><div class="settings-header desktop-only" data-v-30fc67ce><div class="settings-header-icon" data-v-30fc67ce><i class="fas fa-cog" data-v-30fc67ce></i></div><h1 data-v-30fc67ce>Settings</h1><p data-v-30fc67ce>Customize your Ahoy experience</p></div>',2)),t("div",Q,[t("div",Z,[e[8]||(e[8]=t("h2",null,[t("i",{class:"fas fa-user"}),o(" Account")],-1)),V(d).isLoggedIn.value?(y(),S(j,{key:0},[t("div",ee,[e[2]||(e[2]=t("span",{class:"settings-label"},"Logged in as",-1)),t("span",te,k((u=V(d).user.value)==null?void 0:u.email),1)]),t("div",se,[c(n,{to:"/account",class:"settings-link"},{default:m(()=>[...e[3]||(e[3]=[t("i",{class:"fas fa-user-circle"},null,-1),o(" Account & wallet ",-1)])]),_:1}),c(n,{to:"/my-saves",class:"settings-link"},{default:m(()=>[...e[4]||(e[4]=[t("i",{class:"fas fa-bookmark"},null,-1),o(" Saved ",-1)])]),_:1})]),t("button",{type:"button",class:"neu-btn neu-btn-secondary logout-btn",onClick:N},[...e[5]||(e[5]=[t("i",{class:"fas fa-sign-out-alt"},null,-1),o(" Sign out ",-1)])])],64)):(y(),S("div",ne,[e[7]||(e[7]=t("p",null,"Sign in to manage your preferences.",-1)),c(n,{to:"/login",class:"neu-btn neu-btn-primary"},{default:m(()=>[...e[6]||(e[6]=[o("Sign in",-1)])]),_:1})]))]),t("div",ae,[e[11]||(e[11]=t("h2",null,[t("i",{class:"fas fa-volume-up"}),o(" Audio")],-1)),t("div",oe,[t("div",ie,[e[10]||(e[10]=t("label",null,"Master Volume",-1)),t("div",le,[t("div",{ref_key:"dialEl",ref:L,class:"neu-dial",style:z({transform:`rotate(${a.masterVolume*1.8-90}deg)`}),onMousedown:e[0]||(e[0]=M(i=>w(i,"masterVolume"),["prevent"])),onTouchstart:e[1]||(e[1]=M(i=>w(i,"masterVolume"),["prevent"]))},[...e[9]||(e[9]=[t("div",{class:"dial-handle"},null,-1)])],36),t("span",re,k(Math.round(a.masterVolume)),1)])])])]),t("div",de,[e[15]||(e[15]=t("h2",null,[t("i",{class:"fas fa-flask"}),o(" Experimental")],-1)),e[16]||(e[16]=t("p",{class:"experimental-disclaimer"},"These features are still in development and may change or be removed.",-1)),t("div",ue,[c(n,{to:"/focus",class:"experimental-card neu-card-inset"},{default:m(()=>[...e[12]||(e[12]=[t("div",{class:"experimental-card-icon"},[t("i",{class:"fas fa-headphones"})],-1),t("div",{class:"experimental-card-info"},[t("h3",null,"Focus Mode"),t("p",null,"Ambient audio for deep focus and relaxation")],-1),t("i",{class:"fas fa-chevron-right experimental-card-arrow"},null,-1)])]),_:1}),c(n,{to:"/mp3-player",class:"experimental-card neu-card-inset"},{default:m(()=>[...e[13]||(e[13]=[t("div",{class:"experimental-card-icon"},[t("i",{class:"fas fa-compact-disc"})],-1),t("div",{class:"experimental-card-info"},[t("h3",null,"MP3 Player"),t("p",null,"Import and play MP3s from your computer â€” Winamp style")],-1),t("i",{class:"fas fa-chevron-right experimental-card-arrow"},null,-1)])]),_:1}),c(n,{to:"/download",class:"experimental-card neu-card-inset"},{default:m(()=>[...e[14]||(e[14]=[t("div",{class:"experimental-card-icon"},[t("i",{class:"fas fa-download"})],-1),t("div",{class:"experimental-card-info"},[t("h3",null,"Download"),t("p",null,"Get Ahoy on web, Android, iOS, or desktop")],-1),t("i",{class:"fas fa-chevron-right experimental-card-arrow"},null,-1)])]),_:1})])]),t("div",{class:"settings-actions"},[t("button",{type:"button",class:"neu-btn neu-btn-secondary",onClick:D},[...e[17]||(e[17]=[t("i",{class:"fas fa-undo"},null,-1),o(" Reset to Defaults ",-1)])]),t("button",{type:"button",class:"neu-btn neu-btn-primary",onClick:A},[...e[18]||(e[18]=[t("i",{class:"fas fa-save"},null,-1),o(" Save Settings ",-1)])])])])])])}}},pe=F(ce,[["__scopeId","data-v-30fc67ce"]]);export{pe as default};
