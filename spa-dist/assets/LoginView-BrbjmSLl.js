import{_ as x,m as p,p as C,c as a,d as l,e as s,s as y,y as V,w as c,v as w,l as m,t as g,S as A,k as h,j as E,i as S,g as i,H as U,r as q,O as B,B as L}from"./index-J1hCH1Lh.js";import{_ as N}from"./ahoy_logo--Z4AShNu.js";const D={class:"auth-page"},I={class:"auth-card"},M={class:"auth-tabs"},T={key:0,class:"auth-field"},$={class:"auth-field"},R={for:"email"},j=["type","placeholder","autocomplete"],z={class:"auth-field"},F=["placeholder"],G={key:1,class:"auth-hint"},H={key:2,class:"auth-forgot"},O={key:3,class:"auth-error"},P=["disabled"],W={key:0,class:"fas fa-spinner fa-spin"},J={key:1},K={__name:"LoginView",setup(Q){const _=L(),f=U(),n=B(),t=p(f.query.signup?"signup":"login");C(()=>f.query.signup,u=>{u&&(t.value="signup")});const r=p(""),d=p(""),v=p("");async function b(){let u;t.value==="login"?u=await n.login(r.value,d.value):u=await n.signup(r.value,d.value,v.value),u.success&&(window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:t.value==="login"?"Welcome back!":"Account created!",type:"success"}})),_.push("/"))}return(u,e)=>{const k=q("router-link");return a(),l("div",D,[s("div",I,[e[10]||(e[10]=s("div",{class:"auth-logo"},[s("img",{src:N,alt:"Ahoy",class:"auth-logo-img"}),s("h1",null,"Ahoy")],-1)),s("div",M,[s("button",{class:y({active:t.value==="login"}),onClick:e[0]||(e[0]=o=>t.value="login")},"Log In",2),s("button",{class:y({active:t.value==="signup"}),onClick:e[1]||(e[1]=o=>t.value="signup")},"Sign Up",2)]),s("form",{onSubmit:V(b,["prevent"]),class:"auth-form"},[t.value==="signup"?(a(),l("div",T,[e[6]||(e[6]=s("label",{for:"username"},"Username",-1)),c(s("input",{id:"username","onUpdate:modelValue":e[2]||(e[2]=o=>v.value=o),type:"text",placeholder:"your name",autocomplete:"username"},null,512),[[w,v.value]])])):m("",!0),s("div",$,[s("label",R,g(t.value==="login"?"Email or username":"Email"),1),c(s("input",{id:"email","onUpdate:modelValue":e[3]||(e[3]=o=>r.value=o),type:t.value==="login"?"text":"email",placeholder:t.value==="login"?"e.g. alexadmin":"you@example.com",autocomplete:t.value==="login"?"username":"email",required:""},null,8,j),[[A,r.value]])]),s("div",z,[e[7]||(e[7]=s("label",{for:"password"},"Password",-1)),c(s("input",{id:"password","onUpdate:modelValue":e[4]||(e[4]=o=>d.value=o),type:"password",placeholder:t.value==="login"?"e.g. alexadmin":"••••••••",autocomplete:"current-password",required:""},null,8,F),[[w,d.value]])]),t.value==="login"?(a(),l("p",G,[...e[8]||(e[8]=[h("Test account: alexadmin / alexadmin",-1),s("br",null,null,-1),h("Admin: alex@ahoy.ooo / 12345",-1)])])):m("",!0),t.value==="login"?(a(),l("p",H,[E(k,{to:"/auth/forgot"},{default:S(()=>[...e[9]||(e[9]=[h("Forgot password?",-1)])]),_:1})])):m("",!0),i(n).error.value?(a(),l("div",O,g(i(n).error.value),1)):m("",!0),s("button",{type:"submit",class:"auth-submit",disabled:i(n).loading.value},[i(n).loading.value?(a(),l("i",W)):(a(),l("span",J,g(t.value==="login"?"Log In":"Create Account"),1))],8,P)],32),s("button",{class:"auth-skip",onClick:e[5]||(e[5]=o=>i(_).push("/"))}," Continue as Guest ")])])}}},Z=x(K,[["__scopeId","data-v-32244cc7"]]);export{Z as default};
