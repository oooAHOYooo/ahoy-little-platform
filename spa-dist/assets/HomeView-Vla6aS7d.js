import{a as y}from"./useApi-BCqoWMHl.js";import{u as j,o as z,a,c as o,b as s,F as r,r as d,d as b,e as k,w as u,f as x,g as f,h as B,t as i,n as P,i as N,j as S}from"./index-BdyQCXb8.js";const T={class:"home-page"},$={key:0,class:"whats-new-section"},F={class:"whats-new-container"},O={class:"whats-new-updates"},M={class:"whats-new-content"},E={class:"whats-new-title"},H={class:"whats-new-desc"},L={key:0,class:"whats-new-date"},Q={class:"section-header"},W={key:1,class:"scroll-row"},q=["onClick"],G=["src","alt"],I={class:"track-overlay"},J={class:"play-btn"},K={class:"track-title"},R={class:"track-artist"},U={key:2,class:"scroll-row"},X={class:"section-header"},Y={key:3,class:"scroll-row"},Z={class:"show-thumbnail"},ss=["src","alt"],ts={class:"show-info"},es={class:"show-title"},as={class:"show-host"},os={key:4,class:"scroll-row"},ls={class:"section-header"},is={key:5,class:"scroll-row"},ns={class:"artist-cover"},cs=["src","alt"],rs={class:"artist-info"},ds={class:"artist-name"},us={class:"artist-type"},ws={__name:"HomeView",setup(hs){const n=j(),h=f([]),p=f([]),m=f([]),g=f([]);function V(v){var l;const e=h.value[v];((l=n.currentTrack)==null?void 0:l.id)===e.id&&n.isPlaying?n.pause():n.setQueue(h.value,v)}return z(async()=>{const[v,e,l,t]=await Promise.all([y("/api/music").catch(()=>({tracks:[]})),y("/api/shows").catch(()=>({shows:[]})),y("/api/artists").catch(()=>({artists:[]})),y("/api/whats-new").catch(()=>({updates:{}}))]);h.value=v.tracks||[],p.value=e.shows||[],m.value=l.artists||[];const c=t.updates||{},_=[];for(const w of Object.keys(c).sort().reverse())for(const C of Object.keys(c[w]).sort().reverse())for(const A of Object.keys(c[w][C])){const D=c[w][C][A].items||[];_.push(...D)}g.value=_}),(v,e)=>{const l=B("router-link");return a(),o("div",T,[g.value.length?(a(),o("div",$,[s("div",F,[e[1]||(e[1]=s("div",{class:"whats-new-header"},[s("h2",null,"What's New at Ahoy")],-1)),s("div",O,[(a(!0),o(r,null,d(g.value.slice(0,5),t=>(a(),o("div",{class:"whats-new-item",key:t.title},[s("div",M,[s("div",E,i(t.title),1),s("div",H,i(t.description),1),t.date?(a(),o("div",L,i(t.date),1)):b("",!0)]),e[0]||(e[0]=s("div",{class:"whats-new-arrow"},[s("i",{class:"fas fa-chevron-right"})],-1))]))),128))])])])):b("",!0),s("div",Q,[e[3]||(e[3]=s("h2",null,"Music",-1)),k(l,{to:"/music",class:"see-all"},{default:u(()=>[...e[2]||(e[2]=[x("See All",-1)])]),_:1})]),h.value.length?(a(),o("div",W,[(a(!0),o(r,null,d(h.value.slice(0,10),(t,c)=>{var _;return a(),o("div",{class:"track-card",key:t.id},[s("div",{class:"track-cover",onClick:w=>V(c)},[s("img",{src:t.cover_art,alt:t.title,loading:"lazy"},null,8,G),s("div",I,[s("button",J,[s("i",{class:P(((_=N(n).currentTrack)==null?void 0:_.id)===t.id&&N(n).isPlaying?"fas fa-pause":"fas fa-play")},null,2)])])],8,q),k(l,{to:`/music/${t.id}`,class:"track-info",style:{"text-decoration":"none",color:"inherit"}},{default:u(()=>[s("div",K,i(t.title),1),s("div",R,i(t.artist),1)]),_:2},1032,["to"])])}),128))])):(a(),o("div",U,[(a(),o(r,null,d(5,t=>s("div",{class:"track-card",key:t},[...e[4]||(e[4]=[s("div",{class:"track-cover skeleton"},null,-1),s("div",{class:"track-info"},[s("div",{class:"skeleton",style:{height:"14px",width:"80%"}})],-1)])])),64))])),s("div",X,[e[6]||(e[6]=s("h2",null,"Videos",-1)),k(l,{to:"/shows",class:"see-all"},{default:u(()=>[...e[5]||(e[5]=[x("See All",-1)])]),_:1})]),p.value.length?(a(),o("div",Y,[(a(!0),o(r,null,d(p.value.slice(0,10),t=>(a(),S(l,{key:t.id,to:`/shows/${t.id}`,class:"show-card",style:{"text-decoration":"none",color:"inherit"}},{default:u(()=>[s("div",Z,[s("img",{src:t.thumbnail,alt:t.title,loading:"lazy"},null,8,ss)]),s("div",ts,[s("div",es,i(t.title),1),s("div",as,i(t.host),1)])]),_:2},1032,["to"]))),128))])):(a(),o("div",os,[(a(),o(r,null,d(5,t=>s("div",{class:"show-card",key:t},[...e[7]||(e[7]=[s("div",{class:"show-thumbnail skeleton"},null,-1),s("div",{class:"show-info"},[s("div",{class:"skeleton",style:{height:"14px",width:"80%"}})],-1)])])),64))])),s("div",ls,[e[9]||(e[9]=s("h2",null,"Artists",-1)),k(l,{to:"/artists",class:"see-all"},{default:u(()=>[...e[8]||(e[8]=[x("See All",-1)])]),_:1})]),m.value.length?(a(),o("div",is,[(a(!0),o(r,null,d(m.value.slice(0,10),t=>(a(),S(l,{key:t.id,to:`/artists/${t.slug||t.id}`,class:"artist-card",style:{"text-decoration":"none",color:"inherit"}},{default:u(()=>[s("div",ns,[s("img",{src:t.image,alt:t.name,loading:"lazy"},null,8,cs)]),s("div",rs,[s("div",ds,i(t.name),1),s("div",us,i(t.type),1)])]),_:2},1032,["to"]))),128))])):b("",!0)])}}};export{ws as default};
