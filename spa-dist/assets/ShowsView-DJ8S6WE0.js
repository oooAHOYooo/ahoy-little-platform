import{_ as fe,u as me,o as he,a as ye,b as be,p as ee,c as l,d as n,e,k as V,j as ke,i as _e,F as L,x as te,y as f,l as R,t as c,s as h,q as ge,f as F,T as we,w as se,z as oe,m as i,A as Ce,H as Se,B as xe,L as Ve}from"./index-J1hCH1Lh.js";const Le={class:"shows-page videos-page"},Be={class:"shows-container"},$e={class:"video-player-wrapper liquid-glass-wrap"},Ee={key:"player",class:"embedded-video-player modern-glass-player"},Ie={class:"video-container-inner"},Me=["src","poster"],Pe=["aria-label","onKeydown"],qe=["src","alt"],Re={key:1,class:"video-embed-wrap",style:{position:"relative","padding-bottom":"56.25%",height:"0",overflow:"hidden",background:"#000"}},Fe=["src"],Ne={class:"video-info-overlay liquid-glass-overlay static-overlay"},Te={class:"video-info-content"},We={class:"video-title"},ze={class:"video-meta"},Ue={class:"video-host"},Ae={key:0,class:"video-type"},Ke={class:"video-description"},je={class:"video-actions-bar"},De=["aria-pressed","title"],Ge={class:"sr-only"},He={class:"featured-carousel-container"},Qe={class:"cinematic-backdrop"},Xe=["src","alt"],Ye={class:"carousel-content liquid-glass-plate"},Je={class:"carousel-host"},Oe={class:"carousel-actions"},Ze=["onClick"],et={key:0,class:"carousel-indicators"},tt=["onClick","aria-label"],st={class:"shows-grid-section"},ot={class:"shows-grid shows-grid-16x9"},at=["onClick"],lt={class:"show-thumbnail"},nt=["src","alt"],it={class:"show-overlay video-card-overlay"},rt=["onClick"],ut=["aria-pressed","onClick"],dt={class:"sr-only"},ct=["onClick"],vt={class:"show-info"},pt={class:"show-host"},ft={class:"loading-section"},mt={class:"empty-section"},ht={__name:"ShowsView",setup(yt){const _=Se(),N=xe(),T=me(),g=i([]),w=i([]),ae=i(null),W=i(""),C=i(!0),o=i(null),B=i(!1),S=i(null),z=i(null),v=i(0);let m=null;const $=i(!1),U=i([]),r=Ce(()=>U.value);function y(){m&&clearInterval(m),m=setInterval(()=>{!$.value&&r.value.length>0&&(v.value=(v.value+1)%r.value.length)},6e3)}function le(){$.value=!0}function ne(){$.value=!1}function ie(s){v.value=s,y()}function A(){r.value.length!==0&&(v.value=(v.value-1+r.value.length)%r.value.length,y())}function K(){r.value.length!==0&&(v.value=(v.value+1)%r.value.length,y())}function j(s){!o.value&&r.value.length>0&&(s.key==="ArrowLeft"?A():s.key==="ArrowRight"&&K())}const E=i(!1),I=i("");function D(){const s=_.query.play;if(!s||!g.value.length)return;const t=g.value.find(a=>String(a.id)===String(s));t&&(o.value=t,G())}function G(){setTimeout(()=>{S.value&&(S.value.load(),S.value.play().catch(()=>{}))},100)}function M(s){return s&&(s.video_url||s.mp4_link||s.trailer_url||s.url)||""}function re(s){if(!s)return!1;const t=s.toLowerCase();return t.endsWith(".mp4")||t.endsWith(".webm")||t.endsWith(".mov")||t.includes("/mp4")||t.startsWith("blob:")}function H(s){const t=M(s),a=t.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&]+)/);if(a)return`https://www.youtube.com/embed/${a[1]}`;const u=t.match(/vimeo\.com\/(\d+)/);return u?`https://player.vimeo.com/video/${u[1]}`:null}function Q(){let s=[...g.value];const t=W.value.trim().toLowerCase();t&&(s=s.filter(a=>(a.title||"").toLowerCase().includes(t)||(a.host||"").toLowerCase().includes(t)||(a.description||"").toLowerCase().includes(t))),w.value=s}function ue(){W.value="",Q()}function P(s){o.value=s,E.value=!1,I.value="",Ve({id:s.id,type:"show",title:s.title,host:s.host,thumbnail:s.thumbnail,url:s.video_url||s.mp4_link||s.trailer_url||s.url});const t=_.path.startsWith("/videos")?"/videos":"/shows";N.replace({path:t,query:{..._.query,play:s.id}}),G(),setTimeout(()=>{var a;(a=z.value)==null||a.scrollIntoView({behavior:"smooth",block:"start"})},100)}function q(){if(!o.value)return;const s=H(o.value);s&&(I.value=s,E.value=!0)}function de(){o.value&&X(o.value)}function X(s){N.push({name:"video-detail",params:{id:s.id}})}function ce(){}function ve(){B.value=!1}function Y(s){return{type:"show",_type:"show",id:s.id,title:s.title,thumbnail:s.thumbnail,artwork:s.thumbnail}}function p(s){return s?T.isBookmarked(Y(s)):!1}function J(s){s&&T.toggle(Y(s))}return he(async()=>{C.value=!0;try{const t=(await ye("/api/shows").catch(()=>({shows:[]}))).shows||[];g.value=t,w.value=[...t],t.length&&(ae.value=t[Math.floor(Math.random()*t.length)]);const a=t.filter(b=>b.thumbnail&&b.title),x=[...a.length?a:t].sort(()=>.5-Math.random());U.value=x.slice(0,5),Q(),D(),o.value||y(),window.addEventListener("keydown",j)}finally{C.value=!1}}),be(()=>{m&&clearInterval(m),window.removeEventListener("keydown",j)}),ee(o,s=>{s&&m?clearInterval(m):s||y()}),ee(()=>_.query.play,()=>{D()}),(s,t)=>(l(),n("div",Le,[e("div",Be,[t[16]||(t[16]=e("section",{class:"podcasts-hero shows-page-hero"},[e("div",{class:"podcasts-hero-inner"},[e("h1",null,[e("i",{class:"fas fa-video","aria-hidden":"true"}),V(" Videos")]),e("p",null,"Music videos, skate parts, short films, episodes, and more")])],-1)),e("section",{ref_key:"playerSectionRef",ref:z,class:"embedded-video-section"},[e("div",$e,[ke(we,{name:"fade-scale",mode:"out-in"},{default:_e(()=>{var a,u,x,b,O,Z;return[o.value?(l(),n("div",Ee,[e("div",Ie,[o.value&&re(M(o.value))?(l(),n("video",{key:0,ref_key:"videoEl",ref:S,src:M(o.value),poster:o.value.thumbnail||"",controls:"",class:"embedded-video",playsinline:"",onLoadedmetadata:ce,onPlay:t[0]||(t[0]=d=>B.value=!0),onPause:t[1]||(t[1]=d=>B.value=!1),onEnded:ve}," Your browser does not support the video tag. ",40,Me)):o.value&&H(o.value)?(l(),n(L,{key:1},[E.value?(l(),n("div",Re,[e("iframe",{src:I.value,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",border:"0"},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,Fe)])):(l(),n("div",{key:0,class:"video-embed-poster",role:"button",tabindex:"0","aria-label":"Play "+(((a=o.value)==null?void 0:a.title)||"video"),onClick:q,onKeydown:[te(f(q,["prevent"]),["enter"]),te(f(q,["prevent"]),["space"])]},[e("img",{src:o.value.thumbnail||"",alt:((u=o.value)==null?void 0:u.title)||"",class:"video-embed-poster-img"},null,8,qe),t[3]||(t[3]=e("div",{class:"video-embed-poster-play"},[e("i",{class:"fas fa-play"})],-1))],40,Pe))],64)):R("",!0)]),e("div",Ne,[e("div",Te,[e("h2",We,c(((x=o.value)==null?void 0:x.title)||"Untitled"),1),e("div",ze,[e("span",Ue,c(((b=o.value)==null?void 0:b.host)||""),1),(O=o.value)!=null&&O.type?(l(),n("span",Ae,c(String(o.value.type||"").replace(/_/g," ")),1)):R("",!0)]),e("p",Ke,c(((Z=o.value)==null?void 0:Z.description)||""),1)]),e("div",je,[e("button",{type:"button",class:"action-btn view-solo-btn",title:"View Solo",onClick:de},[...t[4]||(t[4]=[e("i",{class:"fas fa-external-link-alt"},null,-1),e("span",{class:"sr-only"},"View Solo",-1)])]),e("button",{type:"button",class:h(["action-btn bookmark-btn",{bookmarked:p(o.value)}]),"aria-pressed":p(o.value),title:p(o.value)?"Remove bookmark":"Bookmark",onClick:t[2]||(t[2]=d=>J(o.value))},[e("i",{class:h(p(o.value)?"fas fa-bookmark":"far fa-bookmark")},null,2),e("span",Ge,c(p(o.value)?"Remove bookmark":"Bookmark"),1)],10,De)])])])):(l(),n("div",{key:"carousel",class:"featured-carousel-wrapper",onMouseenter:le,onMouseleave:ne},[e("div",He,[e("div",{class:"carousel-track",style:ge({transform:`translateX(-${v.value*100}%)`})},[(l(!0),n(L,null,F(r.value,(d,k)=>(l(),n("div",{key:d.id,class:"carousel-slide"},[e("div",Qe,[e("img",{src:d.thumbnail||"/static/img/default-cover.jpg",alt:d.title},null,8,Xe),t[5]||(t[5]=e("div",{class:"glass-overlay"},null,-1))]),e("div",Ye,[t[7]||(t[7]=e("span",{class:"trending-badge"},[e("i",{class:"fas fa-fire"}),V(" Featured Play")],-1)),e("h2",null,c(d.title),1),e("p",Je,c(d.host),1),e("div",Oe,[e("button",{onClick:pe=>P(d),class:"btn-glass-play"},[...t[6]||(t[6]=[e("i",{class:"fas fa-play"},null,-1),V(" Watch Now ",-1)])],8,Ze)])])]))),128))],4),e("button",{class:"carousel-nav prev",onClick:f(A,["stop"]),"aria-label":"Previous slide"},[...t[8]||(t[8]=[e("i",{class:"fas fa-chevron-left"},null,-1)])]),e("button",{class:"carousel-nav next",onClick:f(K,["stop"]),"aria-label":"Next slide"},[...t[9]||(t[9]=[e("i",{class:"fas fa-chevron-right"},null,-1)])]),r.value.length>1?(l(),n("div",et,[(l(!0),n(L,null,F(r.value,(d,k)=>(l(),n("button",{key:"ind-"+k,class:h(["indicator",{active:k===v.value}]),onClick:f(pe=>ie(k),["stop"]),"aria-label":"Go to slide "+(k+1)},null,10,tt))),128))])):R("",!0)])],32))]}),_:1})])],512),e("section",st,[e("div",ot,[(l(!0),n(L,null,F(w.value,a=>(l(),n("div",{key:a.id,class:h(["show-card",{"now-playing":o.value&&o.value.id===a.id}]),onClick:u=>P(a)},[e("div",lt,[e("img",{src:a.thumbnail||"/static/img/default-cover.jpg",alt:a.title,loading:"lazy",decoding:"async",class:"image-placeholder"},null,8,nt),e("div",it,[e("button",{type:"button",class:"show-overlay-open action-btn open-btn",title:"Explore",onClick:f(u=>X(a),["stop"])},[...t[10]||(t[10]=[e("i",{class:"fas fa-play",style:{"font-size":"0.75rem","margin-right":"4px"}},null,-1),V(" Explore ",-1)])],8,rt),e("button",{type:"button",class:h(["show-overlay-save action-btn bm-btn",{bookmarked:p(a)}]),"aria-pressed":p(a),title:"Bookmark",onClick:f(u=>J(a),["stop"])},[e("i",{class:h(p(a)?"fas fa-bookmark":"far fa-bookmark")},null,2),e("span",dt,c(p(a)?"Remove bookmark":"Add bookmark"),1)],10,ut),e("button",{type:"button",class:"play-btn",onClick:f(u=>P(a),["stop"])},[...t[11]||(t[11]=[e("i",{class:"fas fa-play"},null,-1)])],8,ct)])]),e("div",vt,[e("h4",null,c(a.title),1),e("p",pt,c(a.host),1)])],10,at))),128))])]),se(e("section",ft,[...t[12]||(t[12]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading videos...",-1)])],512),[[oe,C.value]]),se(e("section",mt,[e("div",{class:"empty-content"},[t[13]||(t[13]=e("i",{class:"fas fa-play-circle"},null,-1)),t[14]||(t[14]=e("h3",null,"No videos found",-1)),t[15]||(t[15]=e("p",null,"Try a different search or check back later.",-1)),e("button",{type:"button",class:"btn btn-primary",onClick:ue},"Clear search")])],512),[[oe,!C.value&&w.value.length===0]])])]))}},kt=fe(ht,[["__scopeId","data-v-dc75e42b"]]);export{kt as default};
