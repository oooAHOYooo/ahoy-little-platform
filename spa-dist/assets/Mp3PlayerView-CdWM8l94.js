import{_ as H,m as u,o as W,b as X,c as d,d as p,e as a,f as R,G as J,F as C,r as I,t as m,C as N,n as V,l as K,x as Q,i as Y,q as b}from"./index-B4SlD-Pz.js";const Z={class:"mp3-page"},ee={class:"winamp-window"},ae={class:"winamp-main"},te={class:"winamp-eq"},ne={class:"winamp-info"},le={class:"winamp-time"},se={class:"winamp-time"},ie={key:0,class:"winamp-now"},oe={key:1,class:"winamp-now winamp-now-empty"},ue={class:"winamp-progress-track"},re={class:"winamp-controls"},ce=["disabled"],de=["disabled","title"],pe=["disabled"],me={class:"winamp-volume-wrap"},ve={class:"winamp-playlist-panel"},fe={class:"winamp-playlist-header"},we={class:"winamp-add-files"},he=["onDblclick"],ye={class:"winamp-pl-index"},_e={class:"winamp-pl-name"},ge={class:"winamp-pl-duration"},be={key:0,class:"winamp-playlist-empty"},ke={__name:"Mp3PlayerView",setup(Me){const q=u(null),P=u(null),D=u(null),l=u([]),i=u(-1),r=u(!1),v=u(0),c=u(0),y=u(80),k=u(Array(20).fill(20));let s=null,F=1,M=null;const E=b(()=>i.value<0||i.value>=l.value.length?null:l.value[i.value]),S=b(()=>c.value?v.value/c.value*100:0),T=b(()=>l.value.length>0),U=b(()=>l.value.length>0);function x(t){if(!t||!isFinite(t))return"0:00";const e=Math.floor(t/60),n=Math.floor(t%60);return`${e}:${n.toString().padStart(2,"0")}`}function _(){return s||(s=new Audio,s.addEventListener("timeupdate",()=>{v.value=s.currentTime}),s.addEventListener("loadedmetadata",()=>{c.value=s.duration}),s.addEventListener("ended",()=>L()),s.addEventListener("play",()=>{r.value=!0}),s.addEventListener("pause",()=>{r.value=!1}),s.addEventListener("error",()=>{r.value=!1})),s}function B(t){const e=_();e.src=t.url,e.volume=y.value/100,e.load(),c.value=t.duration??0,v.value=0,e.play().catch(()=>{})}function f(t){t<0||t>=l.value.length||(i.value=t,B(l.value[t]))}function $(){if(l.value.length===0)return;const t=_();if(i.value<0){f(0);return}r.value?t.pause():t.play().catch(()=>{})}function j(){if(l.value.length===0)return;const t=i.value<=0?l.value.length-1:i.value-1;f(t)}function L(){if(l.value.length===0)return;const t=i.value<0?0:(i.value+1)%l.value.length;f(t)}function z(t){const e=P.value;if(!e||!c.value)return;const n=e.getBoundingClientRect(),o=t.clientX-n.left,g=Math.max(0,Math.min(1,o/n.width)),w=_();w.currentTime=g*c.value,v.value=w.currentTime}function O(){_().volume=y.value/100}function G(t){const e=Array.from(t.target.files||[]);t.target.value="",e.length&&(e.forEach(n=>{if(!n.type.includes("audio")&&!n.name.toLowerCase().endsWith(".mp3"))return;const o=URL.createObjectURL(n),g=n.name.replace(/\.mp3$/i,""),w={id:F++,file:n,name:g,url:o,duration:null};l.value.push(w);const h=new Audio;h.addEventListener("loadedmetadata",()=>{w.duration=h.duration,h.src="",h.load()}),h.src=o}),i.value<0&&l.value.length>0&&f(0))}function A(){const t=k.value.slice();for(let e=0;e<t.length;e++){const n=r.value?15+Math.sin(Date.now()/80+e*.5)*35+Math.random()*20:12+Math.random()*8;t[e]=Math.max(8,Math.min(95,n))}k.value=t,M=requestAnimationFrame(A)}return W(()=>{A()}),X(()=>{M&&cancelAnimationFrame(M),l.value.forEach(t=>URL.revokeObjectURL(t.url)),s&&(s.pause(),s.src="")}),(t,e)=>(d(),p("div",Z,[e[9]||(e[9]=a("section",{class:"podcasts-hero mp3-hero"},[a("div",{class:"podcasts-hero-inner"},[a("h1",null,[a("i",{class:"fas fa-compact-disc","aria-hidden":"true"}),R(" MP3 Player")]),a("p",null,"Import & play your local files · Experimental")])],-1)),a("div",ee,[e[8]||(e[8]=J('<div class="winamp-titlebar" data-v-27c7e17f><span class="winamp-title-text" data-v-27c7e17f>Ahoy MP3</span><div class="winamp-title-buttons" data-v-27c7e17f><span class="winamp-btn winamp-min" data-v-27c7e17f></span><span class="winamp-btn winamp-max" data-v-27c7e17f></span><span class="winamp-btn winamp-close" data-v-27c7e17f></span></div></div>',1)),a("div",ae,[a("div",te,[(d(),p(C,null,I(20,(n,o)=>a("div",{key:o,class:"winamp-eq-bar",style:N({height:k.value[o]+"%"})},null,4)),64))]),a("div",ne,[a("span",le,m(x(v.value)),1),e[1]||(e[1]=a("span",{class:"winamp-sep"}," / ",-1)),a("span",se,m(x(c.value)),1)]),E.value?(d(),p("div",ie,m(E.value.name),1)):(d(),p("div",oe," No file loaded ")),a("div",{class:"winamp-progress-wrap",onClick:z,ref_key:"seekRef",ref:P},[a("div",ue,[a("div",{class:"winamp-progress-fill",style:N({width:S.value+"%"})},null,4)])],512),a("div",re,[a("button",{type:"button",class:"winamp-ctrl",onClick:j,disabled:!T.value,title:"Previous"},[...e[2]||(e[2]=[a("i",{class:"fas fa-backward-step"},null,-1)])],8,ce),a("button",{type:"button",class:"winamp-ctrl winamp-play",onClick:$,disabled:l.value.length===0,title:r.value?"Pause":"Play"},[a("i",{class:V(r.value?"fas fa-pause":"fas fa-play")},null,2)],8,de),a("button",{type:"button",class:"winamp-ctrl",onClick:L,disabled:!U.value,title:"Next"},[...e[3]||(e[3]=[a("i",{class:"fas fa-forward-step"},null,-1)])],8,pe)]),a("div",me,[e[4]||(e[4]=a("i",{class:"fas fa-volume-high winamp-vol-icon"},null,-1)),K(a("input",{type:"range",class:"winamp-volume",min:"0",max:"100","onUpdate:modelValue":e[0]||(e[0]=n=>y.value=n),onInput:O},null,544),[[Q,y.value,void 0,{number:!0}]])])]),a("div",ve,[a("div",fe,[e[7]||(e[7]=a("span",null,"Playlist",-1)),a("label",we,[a("input",{type:"file",accept:"audio/mpeg,.mp3",multiple:"",ref_key:"fileInputRef",ref:q,onChange:G},null,544),e[5]||(e[5]=a("i",{class:"fas fa-folder-plus"},null,-1)),e[6]||(e[6]=R(" Add MP3s ",-1))])]),a("div",{class:"winamp-playlist-list",ref_key:"playlistRef",ref:D},[(d(!0),p(C,null,I(l.value,(n,o)=>(d(),p("div",{key:n.id,class:V(["winamp-playlist-item",{active:i.value===o,playing:i.value===o&&r.value}]),onDblclick:g=>f(o)},[a("span",ye,m(o+1),1),a("span",_e,m(n.name),1),a("span",ge,m(n.duration!=null?x(n.duration):"…"),1)],42,he))),128)),l.value.length===0?(d(),p("div",be," Drop MP3 files or click “Add MP3s” to import from your computer. ")):Y("",!0)],512)])]),e[10]||(e[10]=a("p",{class:"mp3-disclaimer"},"Files stay on your device. Nothing is uploaded. Experimental feature.",-1))]))}},Pe=H(ke,[["__scopeId","data-v-27c7e17f"]]);export{Pe as default};
