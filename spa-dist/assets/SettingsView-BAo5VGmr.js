import{_ as P,u as Y,o as R,b as X,c as f,d as h,e as t,H as k,f as i,B as w,F as j,t as L,j as y,k as S,h as _,C as z,G as b,L as H,p as U,m as G,Q as q,s as K}from"./index-C-wMUvYW.js";const Q={class:"settings-page"},$={class:"settings-container"},W={class:"settings-content"},Z={class:"settings-section neu-card"},ee={class:"settings-profile"},te={class:"settings-value"},se={class:"settings-links"},ne={key:1,class:"settings-guest"},ae={class:"settings-section neu-card"},oe={class:"settings-grid"},ie={class:"setting-item"},le={class:"dial-container"},ce={class:"dial-value"},E="ahoySettings",de={__name:"SettingsView",setup(re){const C=K(),d=H(),m=Y(),M=G(null),a=q({masterVolume:75});let g=!1,v=null,l=null,c=null;function A(){d.isLoggedIn.value?b("/api/user/profile",{credentials:"include"}).then(s=>{var e;(e=s==null?void 0:s.preferences)!=null&&e.audioSettings&&(a.masterVolume=Math.max(0,Math.min(100,s.preferences.audioSettings.masterVolume??75))),p()}).catch(()=>p()):p()}function p(){var s;try{const e=localStorage.getItem(E);if(e){const n=JSON.parse(e);((s=n.audioSettings)==null?void 0:s.masterVolume)!=null&&(a.masterVolume=Math.max(0,Math.min(100,n.audioSettings.masterVolume)))}}catch{}u()}function D(){const s={audioSettings:{...a}};localStorage.setItem(E,JSON.stringify(s)),d.isLoggedIn.value&&b("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({preferences:{audioSettings:a}})}).catch(()=>{}),u(),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Settings saved!",type:"success"}}))}function I(){a.masterVolume=75;const s={audioSettings:{...a}};localStorage.setItem(E,JSON.stringify(s)),d.isLoggedIn.value&&b("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({preferences:{audioSettings:a}})}).catch(()=>{}),u(),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Settings reset to defaults",type:"info"}}))}function u(){var e;const s=a.masterVolume/100;document.querySelectorAll("audio").forEach(n=>{n.volume=s});try{const n=(e=m.getAudioElement)==null?void 0:e.call(m);n&&(n.volume=s)}catch{}}function V(s,e){g=!0,v=e;const n=s.currentTarget;l=r=>N(r,n),c=()=>x(),document.addEventListener("mousemove",l),document.addEventListener("mouseup",c),document.addEventListener("touchmove",l,{passive:!1}),document.addEventListener("touchend",c)}function N(s,e){if(!g||!e)return;const n=s.touches?s.touches[0].clientX:s.clientX,r=s.touches?s.touches[0].clientY:s.clientY,o=e.getBoundingClientRect(),O=o.left+o.width/2,B=o.top+o.height/2,F=(Math.atan2(r-B,n-O)*(180/Math.PI)+90+360)%360,J=Math.max(0,Math.min(100,F/1.8));v==="masterVolume"&&(a.masterVolume=J),u()}function x(){g=!1,v=null,l&&(document.removeEventListener("mousemove",l),document.removeEventListener("touchmove",l)),c&&(document.removeEventListener("mouseup",c),document.removeEventListener("touchend",c)),l=null,c=null}async function T(){await d.logout(),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Signed out",type:"success"}})),C.push("/")}return R(()=>{A()}),X(()=>{x()}),(s,e)=>{var r;const n=U("router-link");return f(),h("div",Q,[t("div",$,[e[15]||(e[15]=k('<section class="podcasts-hero settings-page-header" data-v-4c653e8c><div class="podcasts-hero-inner" data-v-4c653e8c><h1 data-v-4c653e8c><i class="fas fa-cog" aria-hidden="true" data-v-4c653e8c></i> Settings </h1><p data-v-4c653e8c>Customize your Ahoy experience.</p></div></section><div class="settings-header desktop-only" data-v-4c653e8c><div class="settings-header-icon" data-v-4c653e8c><i class="fas fa-cog" data-v-4c653e8c></i></div><h1 data-v-4c653e8c>Settings</h1><p data-v-4c653e8c>Customize your Ahoy experience</p></div>',2)),t("div",W,[t("div",Z,[e[8]||(e[8]=t("h2",null,[t("i",{class:"fas fa-user"}),i(" Account")],-1)),w(d).isLoggedIn.value?(f(),h(j,{key:0},[t("div",ee,[e[2]||(e[2]=t("span",{class:"settings-label"},"Logged in as",-1)),t("span",te,L((r=w(d).user.value)==null?void 0:r.email),1)]),t("div",se,[y(n,{to:"/account",class:"settings-link"},{default:S(()=>[...e[3]||(e[3]=[t("i",{class:"fas fa-user-circle"},null,-1),i(" Account & wallet ",-1)])]),_:1}),y(n,{to:"/my-saves",class:"settings-link"},{default:S(()=>[...e[4]||(e[4]=[t("i",{class:"fas fa-bookmark"},null,-1),i(" Saved ",-1)])]),_:1})]),t("button",{type:"button",class:"neu-btn neu-btn-secondary logout-btn",onClick:T},[...e[5]||(e[5]=[t("i",{class:"fas fa-sign-out-alt"},null,-1),i(" Sign out ",-1)])])],64)):(f(),h("div",ne,[e[7]||(e[7]=t("p",null,"Sign in to manage your preferences.",-1)),y(n,{to:"/login",class:"neu-btn neu-btn-primary"},{default:S(()=>[...e[6]||(e[6]=[i("Sign in",-1)])]),_:1})]))]),t("div",ae,[e[11]||(e[11]=t("h2",null,[t("i",{class:"fas fa-volume-up"}),i(" Audio")],-1)),t("div",oe,[t("div",ie,[e[10]||(e[10]=t("label",null,"Master Volume",-1)),t("div",le,[t("div",{ref_key:"dialEl",ref:M,class:"neu-dial",style:z({transform:`rotate(${a.masterVolume*1.8-90}deg)`}),onMousedown:e[0]||(e[0]=_(o=>V(o,"masterVolume"),["prevent"])),onTouchstart:e[1]||(e[1]=_(o=>V(o,"masterVolume"),["prevent"]))},[...e[9]||(e[9]=[t("div",{class:"dial-handle"},null,-1)])],36),t("span",ce,L(Math.round(a.masterVolume)),1)])])])]),e[14]||(e[14]=k('<div class="settings-section neu-card experimental-section" data-v-4c653e8c><h2 data-v-4c653e8c><i class="fas fa-flask" data-v-4c653e8c></i> Experimental</h2><p class="experimental-disclaimer" data-v-4c653e8c>These features are still in development and may change or be removed.</p><div class="experimental-grid" data-v-4c653e8c><a href="/focus" class="experimental-card neu-card-inset" data-v-4c653e8c><div class="experimental-card-icon" data-v-4c653e8c><i class="fas fa-headphones" data-v-4c653e8c></i></div><div class="experimental-card-info" data-v-4c653e8c><h3 data-v-4c653e8c>Focus Mode</h3><p data-v-4c653e8c>Ambient audio for deep focus and relaxation</p></div><i class="fas fa-chevron-right experimental-card-arrow" data-v-4c653e8c></i></a></div></div>',1)),t("div",{class:"settings-actions"},[t("button",{type:"button",class:"neu-btn neu-btn-secondary",onClick:I},[...e[12]||(e[12]=[t("i",{class:"fas fa-undo"},null,-1),i(" Reset to Defaults ",-1)])]),t("button",{type:"button",class:"neu-btn neu-btn-primary",onClick:D},[...e[13]||(e[13]=[t("i",{class:"fas fa-save"},null,-1),i(" Save Settings ",-1)])])])])])])}}},ge=P(de,[["__scopeId","data-v-4c653e8c"]]);export{ge as default};
