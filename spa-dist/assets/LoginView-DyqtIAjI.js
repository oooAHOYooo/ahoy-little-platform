import{_ as k,m as p,w as x,c as a,d as l,e as s,n as f,h as C,l as v,x as y,i as m,t as g,R as V,j as A,k as E,f as N,B as i,H as U,p as q,N as B,s as L}from"./index-Dqnp3WRI.js";import{_ as S}from"./ahoy_logo-BZgzVJKg.js";const D={class:"auth-page"},I={class:"auth-card"},M={class:"auth-tabs"},R={key:0,class:"auth-field"},T={class:"auth-field"},$={for:"email"},j=["type","placeholder","autocomplete"],z={class:"auth-field"},F=["placeholder"],G={key:1,class:"auth-hint"},H={key:2,class:"auth-forgot"},P={key:3,class:"auth-error"},W=["disabled"],J={key:0,class:"fas fa-spinner fa-spin"},K={key:1},O={__name:"LoginView",setup(Q){const h=L(),_=U(),n=B(),t=p(_.query.signup?"signup":"login");x(()=>_.query.signup,u=>{u&&(t.value="signup")});const r=p(""),d=p(""),c=p("");async function w(){let u;t.value==="login"?u=await n.login(r.value,d.value):u=await n.signup(r.value,d.value,c.value),u.success&&(window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:t.value==="login"?"Welcome back!":"Account created!",type:"success"}})),h.push("/"))}return(u,e)=>{const b=q("router-link");return a(),l("div",D,[s("div",I,[e[9]||(e[9]=s("div",{class:"auth-logo"},[s("img",{src:S,alt:"Ahoy",class:"auth-logo-img"}),s("h1",null,"Ahoy")],-1)),s("div",M,[s("button",{class:f({active:t.value==="login"}),onClick:e[0]||(e[0]=o=>t.value="login")},"Log In",2),s("button",{class:f({active:t.value==="signup"}),onClick:e[1]||(e[1]=o=>t.value="signup")},"Sign Up",2)]),s("form",{onSubmit:C(w,["prevent"]),class:"auth-form"},[t.value==="signup"?(a(),l("div",R,[e[6]||(e[6]=s("label",{for:"username"},"Username",-1)),v(s("input",{id:"username","onUpdate:modelValue":e[2]||(e[2]=o=>c.value=o),type:"text",placeholder:"your name",autocomplete:"username"},null,512),[[y,c.value]])])):m("",!0),s("div",T,[s("label",$,g(t.value==="login"?"Email or username":"Email"),1),v(s("input",{id:"email","onUpdate:modelValue":e[3]||(e[3]=o=>r.value=o),type:t.value==="login"?"text":"email",placeholder:t.value==="login"?"e.g. alexadmin":"you@example.com",autocomplete:t.value==="login"?"username":"email",required:""},null,8,j),[[V,r.value]])]),s("div",z,[e[7]||(e[7]=s("label",{for:"password"},"Password",-1)),v(s("input",{id:"password","onUpdate:modelValue":e[4]||(e[4]=o=>d.value=o),type:"password",placeholder:t.value==="login"?"e.g. alexadmin":"••••••••",autocomplete:"current-password",required:""},null,8,F),[[y,d.value]])]),t.value==="login"?(a(),l("p",G,"Test account: alexadmin / alexadmin")):m("",!0),t.value==="login"?(a(),l("p",H,[A(b,{to:"/auth/forgot"},{default:E(()=>[...e[8]||(e[8]=[N("Forgot password?",-1)])]),_:1})])):m("",!0),i(n).error.value?(a(),l("div",P,g(i(n).error.value),1)):m("",!0),s("button",{type:"submit",class:"auth-submit",disabled:i(n).loading.value},[i(n).loading.value?(a(),l("i",J)):(a(),l("span",K,g(t.value==="login"?"Log In":"Create Account"),1))],8,W)],32),s("button",{class:"auth-skip",onClick:e[5]||(e[5]=o=>i(h).push("/"))}," Continue as Guest ")])])}}},Z=k(O,[["__scopeId","data-v-f422b3f4"]]);export{Z as default};
