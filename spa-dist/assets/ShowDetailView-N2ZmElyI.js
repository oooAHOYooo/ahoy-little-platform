import{z as f,o as g,a as b,c as l,d as c,e as s,t as n,i as d,f as m,B as p,n as x,F as S,r as B,H as V,m as w,I as C,q as _,p as M,y as N,k as $}from"./index-C-wMUvYW.js";const z={key:0,class:"shows-page"},F={class:"podcast-show-hero"},j=["src","alt"],D={class:"podcast-show-hero-meta"},q={class:"podcast-show-hero-title"},E={key:0,class:"podcast-show-hero-desc"},H={key:1,class:"podcast-show-hero-desc"},I={class:"podcast-show-hero-actions"},L={key:0,class:"podcasts-section",style:{"margin-top":"16px"}},R={class:"video-embed-container",style:{position:"relative","padding-bottom":"56.25%",height:"0",overflow:"hidden","border-radius":"12px"}},T=["src"],U={key:1,class:"podcasts-section",style:{"margin-top":"16px"}},W={class:"shows-grid"},A={class:"show-thumbnail"},G=["src","alt"],J={class:"show-info"},K={class:"show-title"},O={class:"show-host"},P={key:1,class:"shows-page"},Y={__name:"ShowDetailView",setup(Q){const k=C(),r=f(),o=w(null),u=w([]),v=_(()=>o.value?u.value.filter(e=>e.id!==o.value.id).slice(0,6):[]),h=_(()=>{if(!o.value)return null;const e=o.value.video_url||o.value.url||"",t=e.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&]+)/);if(t)return`https://www.youtube.com/embed/${t[1]}`;const a=e.match(/vimeo\.com\/(\d+)/);return a?`https://player.vimeo.com/video/${a[1]}`:null});function y(){var t,a;const e=((t=o.value)==null?void 0:t.video_url)||((a=o.value)==null?void 0:a.url)||"";e&&!h.value&&window.open(e,"_blank")}return g(async()=>{const e=await b("/api/shows").catch(()=>({shows:[]}));u.value=e.shows||[];const t=k.params.id;o.value=u.value.find(a=>String(a.id)===String(t))||null}),(e,t)=>{const a=M("router-link");return o.value?(l(),c("div",z,[s("section",F,[s("img",{class:"podcast-show-hero-art",src:o.value.thumbnail||"/static/img/default-cover.jpg",alt:o.value.title},null,8,j),s("div",D,[t[2]||(t[2]=s("div",{class:"podcast-show-hero-kicker"},"Video",-1)),s("h1",q,n(o.value.title),1),o.value.host?(l(),c("p",E,n(o.value.host),1)):d("",!0),o.value.description?(l(),c("p",H,n(o.value.description),1)):d("",!0),s("div",I,[s("button",{class:"podcast-cta",onClick:y},[...t[1]||(t[1]=[s("i",{class:"fas fa-play"},null,-1),m(" Watch ",-1)])]),s("button",{class:"podcast-cta secondary",onClick:t[0]||(t[0]=i=>p(r).toggle({...o.value,_type:"show"}))},[s("i",{class:x(p(r).isBookmarked(o.value)?"fas fa-bookmark":"far fa-bookmark")},null,2),m(" "+n(p(r).isBookmarked(o.value)?"Saved":"Save"),1)])])])]),h.value?(l(),c("section",L,[s("div",R,[s("iframe",{src:h.value,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",border:"0"},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,T)])])):d("",!0),v.value.length?(l(),c("section",U,[t[4]||(t[4]=s("div",{class:"podcasts-section-header"},[s("h2",null,"More Videos")],-1)),s("div",W,[(l(!0),c(S,null,B(v.value,i=>(l(),N(a,{key:i.id,to:`/shows/${i.id}`,class:"show-card"},{default:$(()=>[s("div",A,[s("img",{src:i.thumbnail||"/static/img/default-cover.jpg",alt:i.title,loading:"lazy"},null,8,G),t[3]||(t[3]=s("div",{class:"show-overlay"},[s("button",{class:"play-btn"},[s("i",{class:"fas fa-play"})])],-1))]),s("div",J,[s("div",K,n(i.title),1),s("div",O,n(i.host),1)])]),_:2},1032,["to"]))),128))])])):d("",!0)])):(l(),c("div",P,[...t[5]||(t[5]=[V('<section class="podcast-show-hero"><div class="podcast-show-hero-art skeleton" style="aspect-ratio:16/9;width:100%;"></div><div class="podcast-show-hero-meta"><div class="skeleton" style="height:14px;width:40%;margin-bottom:8px;"></div><div class="skeleton" style="height:24px;width:70%;margin-bottom:8px;"></div><div class="skeleton" style="height:14px;width:50%;"></div></div></section>',1)])]))}}};export{Y as default};
