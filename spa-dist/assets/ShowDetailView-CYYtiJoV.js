import{o as f,a as l,c,b as s,t as r,d as n,f as m,i as p,n as g,F as b,r as x,p as S,g as w,q as V,m as _,h as B,j as C,w as M}from"./index-BdyQCXb8.js";import{a as N}from"./useApi-BCqoWMHl.js";import{u as $}from"./useBookmarks-Bk63fjhg.js";const j={key:0,class:"shows-page"},F={class:"podcast-show-hero"},z=["src","alt"],D={class:"podcast-show-hero-meta"},q={class:"podcast-show-hero-title"},E={key:0,class:"podcast-show-hero-desc"},L={key:1,class:"podcast-show-hero-desc"},R={class:"podcast-show-hero-actions"},T={key:0,class:"podcasts-section",style:{"margin-top":"16px"}},U={class:"video-embed-container",style:{position:"relative","padding-bottom":"56.25%",height:"0",overflow:"hidden","border-radius":"12px"}},W=["src"],A={key:1,class:"podcasts-section",style:{"margin-top":"16px"}},G={class:"shows-grid"},H={class:"show-thumbnail"},I=["src","alt"],J={class:"show-info"},K={class:"show-title"},O={class:"show-host"},P={key:1,class:"shows-page"},ss={__name:"ShowDetailView",setup(Q){const k=V(),d=$(),o=w(null),u=w([]),v=_(()=>o.value?u.value.filter(e=>e.id!==o.value.id).slice(0,6):[]),h=_(()=>{if(!o.value)return null;const e=o.value.video_url||o.value.url||"",t=e.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&]+)/);if(t)return`https://www.youtube.com/embed/${t[1]}`;const a=e.match(/vimeo\.com\/(\d+)/);return a?`https://player.vimeo.com/video/${a[1]}`:null});function y(){var t,a;const e=((t=o.value)==null?void 0:t.video_url)||((a=o.value)==null?void 0:a.url)||"";e&&!h.value&&window.open(e,"_blank")}return f(async()=>{const e=await N("/api/shows").catch(()=>({shows:[]}));u.value=e.shows||[];const t=k.params.id;o.value=u.value.find(a=>String(a.id)===String(t))||null}),(e,t)=>{const a=B("router-link");return o.value?(l(),c("div",j,[s("section",F,[s("img",{class:"podcast-show-hero-art",src:o.value.thumbnail||"/static/img/default-cover.jpg",alt:o.value.title},null,8,z),s("div",D,[t[2]||(t[2]=s("div",{class:"podcast-show-hero-kicker"},"Video",-1)),s("h1",q,r(o.value.title),1),o.value.host?(l(),c("p",E,r(o.value.host),1)):n("",!0),o.value.description?(l(),c("p",L,r(o.value.description),1)):n("",!0),s("div",R,[s("button",{class:"podcast-cta",onClick:y},[...t[1]||(t[1]=[s("i",{class:"fas fa-play"},null,-1),m(" Watch ",-1)])]),s("button",{class:"podcast-cta secondary",onClick:t[0]||(t[0]=i=>p(d).toggle({...o.value,_type:"show"}))},[s("i",{class:g(p(d).isBookmarked(o.value)?"fas fa-bookmark":"far fa-bookmark")},null,2),m(" "+r(p(d).isBookmarked(o.value)?"Saved":"Save"),1)])])])]),h.value?(l(),c("section",T,[s("div",U,[s("iframe",{src:h.value,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",border:"0"},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,W)])])):n("",!0),v.value.length?(l(),c("section",A,[t[4]||(t[4]=s("div",{class:"podcasts-section-header"},[s("h2",null,"More Videos")],-1)),s("div",G,[(l(!0),c(b,null,x(v.value,i=>(l(),C(a,{key:i.id,to:`/shows/${i.id}`,class:"show-card"},{default:M(()=>[s("div",H,[s("img",{src:i.thumbnail||"/static/img/default-cover.jpg",alt:i.title,loading:"lazy"},null,8,I),t[3]||(t[3]=s("div",{class:"show-overlay"},[s("button",{class:"play-btn"},[s("i",{class:"fas fa-play"})])],-1))]),s("div",J,[s("div",K,r(i.title),1),s("div",O,r(i.host),1)])]),_:2},1032,["to"]))),128))])])):n("",!0)])):(l(),c("div",P,[...t[5]||(t[5]=[S('<section class="podcast-show-hero"><div class="podcast-show-hero-art skeleton" style="aspect-ratio:16/9;width:100%;"></div><div class="podcast-show-hero-meta"><div class="skeleton" style="height:14px;width:40%;margin-bottom:8px;"></div><div class="skeleton" style="height:24px;width:70%;margin-bottom:8px;"></div><div class="skeleton" style="height:14px;width:50%;"></div></div></section>',1)])]))}}};export{ss as default};
