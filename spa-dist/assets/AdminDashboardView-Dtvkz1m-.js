import{_ as I,N as S,o as V,b as l,c as r,d as t,i as d,t as a,p as v,h as B,F as b,e as m,q as M,y as R,x as P,E as u,j as p,C as T}from"./index-DKIbx5E3.js";const q={class:"relative min-h-screen bg-black text-white overflow-hidden font-sans selection:bg-purple-500 selection:text-white"},E={class:"relative z-10 container mx-auto p-6"},L={class:"mb-12 flex justify-between items-center"},O={key:0,class:"text-sm text-purple-300 animate-pulse bg-purple-900/30 px-3 py-1 rounded-full border border-purple-500/30"},H={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-12"},J={class:"glass-card p-6 group hover:bg-white/5 transition duration-300"},W={class:"text-3xl font-bold text-white group-hover:scale-105 transition-transform origin-left"},G={class:"glass-card p-6 group hover:bg-white/5 transition duration-300"},K={class:"text-3xl font-bold text-white group-hover:scale-105 transition-transform origin-left"},Q={class:"glass-card p-6 group hover:bg-white/5 transition duration-300"},X={class:"text-3xl font-bold text-white group-hover:scale-105 transition-transform origin-left"},Y={class:"glass-card p-6 group hover:bg-white/5 transition duration-300"},Z={class:"text-3xl font-bold text-white group-hover:scale-105 transition-transform origin-left"},tt={class:"glass-card p-6 group hover:bg-white/5 transition duration-300"},et={class:"text-3xl font-bold text-white group-hover:scale-105 transition-transform origin-left"},st={class:"flex space-x-2 mb-8 p-1 bg-white/5 backdrop-blur-md rounded-xl w-fit border border-white/10"},ot={key:0,class:"ml-2 bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded-full"},lt={key:0,class:"space-y-4"},rt={class:"flex-1"},at={class:"font-medium text-white group-hover:text-purple-200 transition-colors"},it={class:"flex items-center gap-2 mt-1"},nt={class:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-white/5 border border-white/10 text-white/50"},dt={class:"text-xs text-purple-200/40"},ut={key:0,class:"text-purple-200/40 text-center py-20 italic"},pt={key:1,class:"space-y-6"},ct={class:"relative"},ht={class:"glass-card overflow-hidden"},xt={class:"w-full text-left border-collapse"},vt={class:"p-4 text-white/30 font-mono text-sm"},gt={class:"p-4 text-white/90"},bt={class:"p-4 text-white/70"},mt={class:"p-4 text-white/40 text-sm"},wt={class:"p-4"},ft={key:0,class:"bg-purple-500/20 border border-purple-500/30 text-purple-200 text-xs px-2 py-1 rounded shadow-[0_0_10px_rgba(168,85,247,0.2)]"},_t={key:1,class:"text-white/20 text-xs"},yt={key:2,class:"space-y-4"},kt={class:"flex justify-between items-start"},Ct={class:"font-bold text-lg text-white"},Dt={class:"text-purple-200/70 mt-2"},At={class:"text-xs text-purple-200/30 mt-4 font-mono"},$t={class:"flex space-x-3"},Tt=["onClick"],jt=["onClick"],Nt={key:0,class:"text-purple-200/40 text-center py-20 italic"},zt={key:3,class:"space-y-6"},Ft={class:"glass-card p-8"},Ut={key:0,class:"text-purple-200/50"},It={class:"space-y-4"},St={class:"flex mb-2 items-center justify-between z-10 relative"},Vt={class:"text-xs font-semibold inline-block py-1 px-3 uppercase rounded bg-black/40 text-purple-200 border border-white/10 backdrop-blur-sm"},Bt={class:"text-right"},Mt={class:"text-xs font-mono text-purple-200/80"},Rt={class:"overflow-hidden h-3 mb-4 text-xs flex rounded-full bg-white/5 border border-white/5 relative"},Pt={__name:"AdminDashboardView",setup(qt){const{user:j,isLoggedIn:N}=S(),D=P(),w=p(!1),c=p({}),f=p([]),_=p([]),h=p([]),x=p([]),y=p(""),i=p("activity"),z=o=>({signup:"bg-blue-500",tip:"bg-green-500",purchase:"bg-yellow-500",feedback:"bg-purple-500",claim:"bg-red-500"})[o]||"bg-gray-500",k=o=>o?new Date(o).toLocaleString():"-",F=async()=>{w.value=!0;try{const[o,e,n,g,s]=await Promise.all([u("/api/admin/stats"),u("/api/admin/activity"),u("/api/admin/users"),u("/api/admin/actions"),u("/api/admin/heatmap")]);c.value=o,f.value=e,_.value=n,h.value=g,x.value=s}catch(o){console.error("Failed to fetch admin data",o)}finally{w.value=!1}},U=async()=>{try{const o=await u(`/api/admin/users?q=${y.value}`);_.value=o}catch(o){console.error(o)}},A=async(o,e)=>{if(confirm(`Are you sure you want to ${e} this request?`))try{await u(`/api/admin/actions/claim/${o}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e})});const n=await u("/api/admin/actions");h.value=n}catch(n){alert("Action failed: "+n.message)}},$=o=>{if(!x.value.length)return 0;const e=Math.max(...x.value.map(n=>n.count));return o/e*100};return V(()=>{var o;if(!N.value){D.push("/login");return}if(!((o=j.value)!=null&&o.is_admin)){D.push("/");return}F()}),(o,e)=>{var n,g;return l(),r("div",q,[e[20]||(e[20]=t("div",{class:"fixed inset-0 z-0 pointer-events-none"},[t("div",{class:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-purple-900/40 rounded-full blur-[120px] animate-pulse"}),t("div",{class:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-blue-900/30 rounded-full blur-[120px] animate-pulse",style:{"animation-delay":"2s"}}),t("div",{class:"absolute top-[20%] right-[20%] w-[300px] h-[300px] bg-pink-900/20 rounded-full blur-[100px] animate-bounce",style:{"animation-duration":"10s"}})],-1)),t("div",E,[t("header",L,[e[5]||(e[5]=t("div",null,[t("h1",{class:"text-4xl font-bold bg-gradient-to-r from-white via-purple-200 to-purple-400 bg-clip-text text-transparent drop-shadow-sm"}," Admin Dashboard "),t("p",{class:"text-purple-200/60 text-sm mt-1"},"Platform Overview & Management")],-1)),w.value?(l(),r("div",O," Refreshing data... ")):d("",!0)]),t("div",H,[t("div",J,[e[6]||(e[6]=t("h3",{class:"text-purple-200/60 text-xs font-bold uppercase tracking-wider mb-2"},"Users",-1)),t("p",W,a(c.value.users),1),e[7]||(e[7]=t("div",{class:"h-1 w-full bg-gray-700/50 mt-4 rounded-full overflow-hidden"},[t("div",{class:"h-full bg-purple-500 w-[70%]"})],-1))]),t("div",G,[e[8]||(e[8]=t("h3",{class:"text-purple-200/60 text-xs font-bold uppercase tracking-wider mb-2"},"Total Tips",-1)),t("p",K,"$"+a((n=c.value.tip_total)==null?void 0:n.toFixed(2)),1),e[9]||(e[9]=t("div",{class:"h-1 w-full bg-gray-700/50 mt-4 rounded-full overflow-hidden"},[t("div",{class:"h-full bg-green-500 w-[45%]"})],-1))]),t("div",Q,[e[10]||(e[10]=t("h3",{class:"text-purple-200/60 text-xs font-bold uppercase tracking-wider mb-2"},"Tips Count",-1)),t("p",X,a(c.value.tips),1),e[11]||(e[11]=t("div",{class:"h-1 w-full bg-gray-700/50 mt-4 rounded-full overflow-hidden"},[t("div",{class:"h-full bg-blue-500 w-[30%]"})],-1))]),t("div",Y,[e[12]||(e[12]=t("h3",{class:"text-purple-200/60 text-xs font-bold uppercase tracking-wider mb-2"},"Revenue",-1)),t("p",Z,"$"+a((g=c.value.revenue)==null?void 0:g.toFixed(2)),1),e[13]||(e[13]=t("div",{class:"h-1 w-full bg-gray-700/50 mt-4 rounded-full overflow-hidden"},[t("div",{class:"h-full bg-yellow-500 w-[60%]"})],-1))]),t("div",tt,[e[14]||(e[14]=t("h3",{class:"text-purple-200/60 text-xs font-bold uppercase tracking-wider mb-2"},"Purchases",-1)),t("p",et,a(c.value.purchases),1),e[15]||(e[15]=t("div",{class:"h-1 w-full bg-gray-700/50 mt-4 rounded-full overflow-hidden"},[t("div",{class:"h-full bg-red-500 w-[25%]"})],-1))])]),t("div",st,[t("button",{onClick:e[0]||(e[0]=s=>i.value="activity"),class:v(["px-6 py-2 rounded-lg text-sm font-medium transition-all duration-300",i.value==="activity"?"bg-purple-600 text-white shadow-lg shadow-purple-900/50":"text-purple-200/60 hover:text-white hover:bg-white/5"])}," Activity Feed ",2),t("button",{onClick:e[1]||(e[1]=s=>i.value="users"),class:v(["px-6 py-2 rounded-lg text-sm font-medium transition-all duration-300",i.value==="users"?"bg-purple-600 text-white shadow-lg shadow-purple-900/50":"text-purple-200/60 hover:text-white hover:bg-white/5"])}," Users ",2),t("button",{onClick:e[2]||(e[2]=s=>i.value="actions"),class:v(["px-6 py-2 rounded-lg text-sm font-medium transition-all duration-300",i.value==="actions"?"bg-purple-600 text-white shadow-lg shadow-purple-900/50":"text-purple-200/60 hover:text-white hover:bg-white/5"])},[e[16]||(e[16]=B(" Action Items ",-1)),h.value.length?(l(),r("span",ot,a(h.value.length),1)):d("",!0)],2),t("button",{onClick:e[3]||(e[3]=s=>i.value="analytics"),class:v(["px-6 py-2 rounded-lg text-sm font-medium transition-all duration-300",i.value==="analytics"?"bg-purple-600 text-white shadow-lg shadow-purple-900/50":"text-purple-200/60 hover:text-white hover:bg-white/5"])}," Analytics ",2)]),i.value==="activity"?(l(),r("div",lt,[(l(!0),r(b,null,m(f.value,(s,C)=>(l(),r("div",{key:C,class:"glass-card item-card p-4 flex items-center group"},[t("div",{class:v(["w-1.5 h-12 rounded-full mr-5 shadow-[0_0_10px_rgba(0,0,0,0.5)]",z(s.type)])},null,2),t("div",rt,[t("p",at,a(s.text),1),t("div",it,[t("span",nt,a(s.type.toUpperCase()),1),t("p",dt,a(k(s.date)),1)])])]))),128)),f.value.length===0?(l(),r("div",ut,"No recent activity detected in the ether.")):d("",!0)])):d("",!0),i.value==="users"?(l(),r("div",pt,[t("div",ct,[M(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>y.value=s),onInput:U,placeholder:"Search users...",class:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-purple-200/20 focus:outline-none focus:border-purple-500/50 focus:bg-white/10 transition-all"},null,544),[[R,y.value]]),e[17]||(e[17]=t("div",{class:"absolute right-3 top-3 text-purple-200/20"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),t("div",ht,[t("table",xt,[e[18]||(e[18]=t("thead",null,[t("tr",{class:"text-purple-200/40 border-b border-white/5"},[t("th",{class:"p-4 font-medium text-xs uppercase tracking-wider"},"ID"),t("th",{class:"p-4 font-medium text-xs uppercase tracking-wider"},"Email"),t("th",{class:"p-4 font-medium text-xs uppercase tracking-wider"},"Username"),t("th",{class:"p-4 font-medium text-xs uppercase tracking-wider"},"Joined"),t("th",{class:"p-4 font-medium text-xs uppercase tracking-wider"},"Role")])],-1)),t("tbody",null,[(l(!0),r(b,null,m(_.value,s=>(l(),r("tr",{key:s.id,class:"border-b border-white/5 hover:bg-white/5 transition-colors"},[t("td",vt,a(s.id),1),t("td",gt,a(s.email),1),t("td",bt,a(s.username||"-"),1),t("td",mt,a(k(s.created_at)),1),t("td",wt,[s.is_admin?(l(),r("span",ft,"Admin")):(l(),r("span",_t,"User"))])]))),128))])])])])):d("",!0),i.value==="actions"?(l(),r("div",yt,[(l(!0),r(b,null,m(h.value,s=>(l(),r("div",{key:s.id,class:"glass-card p-6 border-l-4 border-l-purple-500"},[t("div",kt,[t("div",null,[t("h3",Ct,a(s.title),1),t("p",Dt,a(s.description),1),t("p",At,"ID: "+a(s.id)+" â€¢ Created: "+a(k(s.created_at)),1)]),t("div",$t,[t("button",{onClick:C=>A(s.id,"approve"),class:"bg-green-500/20 hover:bg-green-500/40 border border-green-500/50 text-green-100 px-6 py-2 rounded-lg text-sm transition-all hover:scale-105"}," Approve ",8,Tt),t("button",{onClick:C=>A(s.id,"reject"),class:"bg-red-500/20 hover:bg-red-500/40 border border-red-500/50 text-red-100 px-6 py-2 rounded-lg text-sm transition-all hover:scale-105"}," Reject ",8,jt)])])]))),128)),h.value.length===0?(l(),r("div",Nt,"No pending actions. The ether is calm.")):d("",!0)])):d("",!0),i.value==="analytics"?(l(),r("div",zt,[t("div",Ft,[e[19]||(e[19]=t("h3",{class:"text-xl font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-purple-200 to-white"},"Traffic Heatmap",-1)),x.value.length===0?(l(),r("div",Ut,"No data yet. Browse the app to generate data!")):d("",!0),t("div",It,[(l(!0),r(b,null,m(x.value,s=>(l(),r("div",{key:s.path,class:"relative group"},[t("div",St,[t("div",null,[t("span",Vt,a(s.path||"/"),1)]),t("div",Bt,[t("span",Mt,a(s.count)+" views ",1)])]),t("div",Rt,[t("div",{style:T({width:$(s.count)+"%"}),class:"absolute inset-0 bg-purple-500/20 blur-md"},null,4),t("div",{style:T({width:$(s.count)+"%"}),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-gradient-to-r from-purple-600 to-pink-500 relative z-10 transition-all duration-1000 ease-out"},null,4)])]))),128))])])])):d("",!0)])])}}},Lt=I(Pt,[["__scopeId","data-v-15ba04e0"]]);export{Lt as default};
