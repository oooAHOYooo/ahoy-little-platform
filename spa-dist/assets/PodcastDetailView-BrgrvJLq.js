import{u as C,o as S,a as i,c as l,b as s,t as c,d as n,f as y,i as r,n as v,F as $,r as B,p as N,q as P,g as V,m as M,x as z}from"./index-BdyQCXb8.js";import{a as D}from"./useApi-BCqoWMHl.js";import{u as E}from"./useBookmarks-Bk63fjhg.js";const F={key:0,class:"podcast-show-page"},L={class:"podcast-show-hero"},T=["src","alt"],j={class:"podcast-show-hero-meta"},q={class:"podcast-show-hero-title"},Q={key:0,class:"podcast-show-hero-desc"},R={class:"podcast-show-hero-actions"},A={class:"podcasts-section",style:{"margin-top":"16px"}},G={class:"podcasts-section-header"},H={class:"queue-count-badge"},I={class:"episode-list"},J=["onClick"],K=["src","alt"],O={class:"episode-meta"},U={class:"episode-title"},W={class:"episode-subtitle"},X={key:0,class:"episode-time"},Y={key:1,class:"episode-dot"},Z={key:2,class:"episode-time"},ss={key:0,class:"episode-desc"},ts={class:"episode-actions"},os=["onClick"],es={key:0,class:"podcasts-section",style:{"margin-top":"16px"}},as={key:1,class:"podcast-show-page"},ns={__name:"PodcastDetailView",setup(is){const g=P(),u=C(),h=E(),a=V(null),d=M(()=>a.value?(a.value.episodes||[]).map(o=>({...o,id:o.id||o.key||`${a.value.slug}-${o.title}`,artist:a.value.title,cover_art:o.cover_art||o.artwork||a.value.artwork,audio_url:o.audio_url||o.url||""})):[]);function f(o){if(!o)return"";const e=Math.floor(o/60),t=Math.floor(o%60);return`${e}:${t.toString().padStart(2,"0")}`}function w(o,e){return o?o.length>e?o.slice(0,e)+"...":o:""}function b(){d.value.length&&u.setQueue(d.value,0)}function _(o){u.setQueue(d.value,o)}return S(async()=>{const o=g.params.slug,t=(await D("/api/podcasts").catch(()=>({shows:[]}))).shows||[];a.value=t.find(p=>p.slug===o)||null}),(o,e)=>a.value?(i(),l("div",F,[s("section",L,[s("img",{class:"podcast-show-hero-art",src:a.value.artwork||"/static/img/default-cover.jpg",alt:a.value.title},null,8,T),s("div",j,[e[2]||(e[2]=s("div",{class:"podcast-show-hero-kicker"},"Podcast",-1)),s("h1",q,c(a.value.title),1),a.value.description?(i(),l("p",Q,c(a.value.description),1)):n("",!0),s("div",R,[s("button",{class:"podcast-cta",onClick:b},[...e[1]||(e[1]=[s("i",{class:"fas fa-play"},null,-1),y(" Play Latest ",-1)])]),s("button",{class:"podcast-cta secondary",onClick:e[0]||(e[0]=t=>r(h).toggle({...a.value,_type:"podcast"}))},[s("i",{class:v(r(h).isBookmarked(a.value)?"fas fa-bookmark":"far fa-bookmark")},null,2),y(" "+c(r(h).isBookmarked(a.value)?"Saved":"Save"),1)])])])]),s("section",A,[s("div",G,[e[3]||(e[3]=s("h2",null,"Episodes",-1)),s("span",H,c(d.value.length),1)]),s("div",I,[(i(!0),l($,null,B(d.value,(t,p)=>{var k,m;return i(),l("article",{key:t.id||t.key||p,class:v(["episode-row",{playing:((k=r(u).currentTrack)==null?void 0:k.id)===(t.id||t.key)}]),onClick:x=>_(p)},[s("img",{class:"episode-art",src:t.cover_art||t.artwork||a.value.artwork||"/static/img/default-cover.jpg",alt:t.title,loading:"lazy"},null,8,K),s("div",O,[s("div",U,c(t.title),1),s("div",W,[t.date?(i(),l("span",X,c(t.date),1)):n("",!0),t.date&&t.duration_seconds?(i(),l("span",Y," Â· ")):n("",!0),t.duration_seconds?(i(),l("span",Z,c(f(t.duration_seconds)),1)):n("",!0)]),t.description?(i(),l("div",ss,c(w(t.description,120)),1)):n("",!0)]),s("div",ts,[s("button",{class:"episode-btn",onClick:z(x=>_(p),["stop"])},[s("i",{class:v(((m=r(u).currentTrack)==null?void 0:m.id)===(t.id||t.key)&&r(u).isPlaying?"fas fa-pause":"fas fa-play")},null,2)],8,os)])],10,J)}),128))])]),d.value.length?n("",!0):(i(),l("section",es,[...e[4]||(e[4]=[s("div",{class:"empty-state",style:{"text-align":"center",padding:"40px 20px",color:"rgba(255,255,255,0.5)"}},[s("i",{class:"fas fa-podcast",style:{"font-size":"48px","margin-bottom":"16px",display:"block"}}),s("p",null,"No episodes available yet")],-1)])]))])):(i(),l("div",as,[...e[5]||(e[5]=[N('<section class="podcast-show-hero"><div class="podcast-show-hero-art skeleton" style="aspect-ratio:1;width:100%;"></div><div class="podcast-show-hero-meta"><div class="skeleton" style="height:14px;width:30%;margin-bottom:8px;"></div><div class="skeleton" style="height:24px;width:60%;margin-bottom:8px;"></div><div class="skeleton" style="height:14px;width:80%;"></div></div></section>',1)])]))}};export{ns as default};
