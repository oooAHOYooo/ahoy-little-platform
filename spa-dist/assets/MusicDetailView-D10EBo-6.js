import{u as N,s as $,o as j,a as z,b as l,c as n,d as s,t as c,e as k,n as u,g as _,j as d,F as D,r as F,v as A,h as S,x as Q,p as b,y as R,z as E,A as H}from"./index-BS6VIDXW.js";const I={key:0,class:"music-container"},L={class:"podcast-show-hero"},q=["src","alt"],G={class:"podcast-show-hero-meta"},J={class:"podcast-show-hero-title"},K={key:0,class:"podcast-show-hero-desc"},O={key:1,class:"episode-subtitle"},U={class:"podcast-show-hero-actions"},W={key:0,class:"podcasts-section"},X={class:"podcasts-section-header"},Y={class:"episode-list"},Z=["onClick"],ss=["src","alt"],as={class:"episode-meta"},ts={class:"episode-title"},es={class:"episode-show"},os={class:"episode-actions"},is=["onClick"],cs={key:1,class:"music-container"},rs={__name:"MusicDetailView",setup(ls){const C=Q(),i=N(),h=$(),{shareTrack:T}=E(),f=R(),a=S(null),r=S([]),p=b(()=>a.value?r.value.filter(t=>t.artist===a.value.artist&&t.id!==a.value.id):[]),v=b(()=>{var t,e;return((t=i.currentTrack)==null?void 0:t.id)===((e=a.value)==null?void 0:e.id)&&i.isPlaying});function x(t){if(!t)return"";const e=Math.floor(t/60),o=Math.floor(t%60);return`${e}:${o.toString().padStart(2,"0")}`}function B(){v.value?i.pause():(i.play(a.value),i.setQueue(r.value,r.value.findIndex(t=>t.id===a.value.id)))}function M(){f.onBookmark(),h.toggle({...a.value,_type:"track"})}function P(){f.light(),T(a.value)}function m(t){i.setQueue(p.value,t)}return j(async()=>{const t=await z("/api/music").catch(()=>({tracks:[]}));r.value=t.tracks||[];const e=C.params.id;a.value=r.value.find(o=>String(o.id)===String(e))||null}),(t,e)=>a.value?(l(),n("div",I,[s("section",L,[s("img",{class:"podcast-show-hero-art",src:a.value.cover_art||"/static/img/default-cover.jpg",alt:a.value.title},null,8,q),s("div",G,[e[1]||(e[1]=s("div",{class:"podcast-show-hero-kicker"},"Track",-1)),s("h1",J,c(a.value.title),1),a.value.artist?(l(),n("p",K,c(a.value.artist),1)):k("",!0),a.value.duration_seconds?(l(),n("p",O,c(x(a.value.duration_seconds)),1)):k("",!0),s("div",U,[s("button",{class:"podcast-cta",onClick:B},[s("i",{class:u(v.value?"fas fa-pause":"fas fa-play")},null,2),_(" "+c(v.value?"Pause":"Play"),1)]),s("button",{class:"podcast-cta secondary",onClick:M},[s("i",{class:u(d(h).isBookmarked(a.value)?"fas fa-bookmark":"far fa-bookmark")},null,2),_(" "+c(d(h).isBookmarked(a.value)?"Saved":"Save"),1)]),s("button",{class:"podcast-cta secondary",onClick:P},[...e[0]||(e[0]=[s("i",{class:"fas fa-share-alt"},null,-1),_(" Share ",-1)])])])])]),p.value.length?(l(),n("section",W,[s("div",X,[s("h2",null,"More from "+c(a.value.artist),1)]),s("div",Y,[(l(!0),n(D,null,F(p.value,(o,y)=>{var g,w;return l(),n("article",{key:o.id,class:u(["episode-row",{playing:((g=d(i).currentTrack)==null?void 0:g.id)===o.id}]),onClick:V=>m(y)},[s("img",{class:"episode-art",src:o.cover_art||"/static/img/default-cover.jpg",alt:o.title,loading:"lazy"},null,8,ss),s("div",as,[s("div",ts,c(o.title),1),s("div",es,c(o.artist),1)]),s("div",os,[s("button",{class:"episode-btn",onClick:H(V=>m(y),["stop"])},[s("i",{class:u(((w=d(i).currentTrack)==null?void 0:w.id)===o.id&&d(i).isPlaying?"fas fa-pause":"fas fa-play")},null,2)],8,is)])],10,Z)}),128))])])):k("",!0)])):(l(),n("div",cs,[...e[2]||(e[2]=[A('<section class="podcast-show-hero"><div class="podcast-show-hero-art skeleton" style="aspect-ratio:1;width:100%;"></div><div class="podcast-show-hero-meta"><div class="skeleton" style="height:14px;width:40%;margin-bottom:8px;"></div><div class="skeleton" style="height:24px;width:70%;margin-bottom:8px;"></div><div class="skeleton" style="height:14px;width:50%;"></div></div></section>',1)])]))}};export{rs as default};
