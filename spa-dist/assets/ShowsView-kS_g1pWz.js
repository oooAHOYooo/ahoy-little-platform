import{_ as ee,u as te,o as oe,a as se,p as ae,c as r,d,e,k as K,w as k,z as _,F as O,s as j,x as p,l as A,t as c,y as m,f as le,m as i,H as ie,L as ne,B as re}from"./index-E3F7F_pY.js";const de={class:"shows-page videos-page"},ce={class:"shows-container"},ue={class:"video-player-wrapper"},ve={class:"embedded-video-player"},pe=["src","poster"],me=["aria-label","onKeydown"],fe=["src","alt"],ye={key:1,class:"video-embed-wrap",style:{position:"relative","padding-bottom":"56.25%",height:"0",overflow:"hidden",background:"#000"}},he=["src"],be={class:"video-info-overlay"},ke={class:"video-info-content"},_e={class:"video-title"},ge={class:"video-meta"},we={class:"video-host"},Se={key:0,class:"video-type"},Ce={class:"video-description"},Ve={class:"video-actions-bar"},Be=["aria-pressed","title"],Le={class:"sr-only"},Re={class:"video-placeholder"},xe={class:"shows-grid-section"},Me={class:"shows-grid shows-grid-16x9"},$e=["onClick"],Pe={class:"show-thumbnail"},Ee=["src","alt"],Fe={class:"show-overlay video-card-overlay"},We=["onClick"],qe=["aria-pressed","onClick"],Te={class:"sr-only"},Ie=["onClick"],Ne={class:"show-info"},Ue={class:"show-host"},ze={class:"loading-section"},De={class:"empty-section"},Ke={__name:"ShowsView",setup(Oe){const f=ie(),R=re(),x=te(),u=i([]),y=i([]),H=i(null),M=i(""),h=i(!0),s=i(null),g=i(!1),b=i(null),$=i(null),w=i(!1),S=i("");function P(){const o=f.query.play;if(!o||!u.value.length)return;const t=u.value.find(l=>String(l.id)===String(o));t&&(s.value=t,E())}function E(){setTimeout(()=>{b.value&&(b.value.load(),b.value.play().catch(()=>{}))},100)}function C(o){return o&&(o.video_url||o.mp4_link||o.trailer_url||o.url)||""}function Q(o){if(!o)return!1;const t=o.toLowerCase();return t.endsWith(".mp4")||t.endsWith(".webm")||t.endsWith(".mov")||t.includes("/mp4")||t.startsWith("blob:")}function F(o){const t=C(o),l=t.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&]+)/);if(l)return`https://www.youtube.com/embed/${l[1]}`;const v=t.match(/vimeo\.com\/(\d+)/);return v?`https://player.vimeo.com/video/${v[1]}`:null}function W(){let o=[...u.value];const t=M.value.trim().toLowerCase();t&&(o=o.filter(l=>(l.title||"").toLowerCase().includes(t)||(l.host||"").toLowerCase().includes(t)||(l.description||"").toLowerCase().includes(t))),y.value=o}function Y(){M.value="",W()}function V(o){s.value=o,w.value=!1,S.value="",ne({id:o.id,type:"show",title:o.title,host:o.host,thumbnail:o.thumbnail,url:o.video_url||o.mp4_link||o.trailer_url||o.url});const t=f.path.startsWith("/videos")?"/videos":"/shows";R.replace({path:t,query:{...f.query,play:o.id}}),E(),setTimeout(()=>{var l;(l=$.value)==null||l.scrollIntoView({behavior:"smooth",block:"start"})},100)}function B(){if(!s.value)return;const o=F(s.value);o&&(S.value=o,w.value=!0)}function G(){s.value&&q(s.value)}function q(o){R.push({name:"video-detail",params:{id:o.id}})}function J(){}function X(){g.value=!1}function Z(){if(u.value.length){const o=u.value[Math.floor(Math.random()*u.value.length)];V(o)}}function T(o){return{type:"show",_type:"show",id:o.id,title:o.title,thumbnail:o.thumbnail,artwork:o.thumbnail}}function n(o){return o?x.isBookmarked(T(o)):!1}function I(o){o&&x.toggle(T(o))}return oe(async()=>{h.value=!0;try{const t=(await se("/api/shows").catch(()=>({shows:[]}))).shows||[];u.value=t,y.value=[...t],t.length&&(H.value=t[Math.floor(Math.random()*t.length)]),W(),P()}finally{h.value=!1}}),ae(()=>f.query.play,()=>{P()}),(o,t)=>{var l,v,N,U,z,D;return r(),d("div",de,[e("div",ce,[t[14]||(t[14]=e("section",{class:"podcasts-hero shows-page-hero"},[e("div",{class:"podcasts-hero-inner"},[e("h1",null,[e("i",{class:"fas fa-video","aria-hidden":"true"}),K(" Videos")]),e("p",null,"Music videos, skate parts, short films, episodes, and more")])],-1)),e("section",{ref_key:"playerSectionRef",ref:$,class:"embedded-video-section"},[e("div",ue,[k(e("div",ve,[s.value&&Q(C(s.value))?(r(),d("video",{key:0,ref_key:"videoEl",ref:b,src:C(s.value),poster:s.value.thumbnail||"",controls:"",class:"embedded-video",playsinline:"",onLoadedmetadata:J,onPlay:t[0]||(t[0]=a=>g.value=!0),onPause:t[1]||(t[1]=a=>g.value=!1),onEnded:X}," Your browser does not support the video tag. ",40,pe)):s.value&&F(s.value)?(r(),d(O,{key:1},[w.value?(r(),d("div",ye,[e("iframe",{src:S.value,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",border:"0"},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,he)])):(r(),d("div",{key:0,class:"video-embed-poster",role:"button",tabindex:"0","aria-label":"Play "+(((l=s.value)==null?void 0:l.title)||"video"),onClick:B,onKeydown:[j(p(B,["prevent"]),["enter"]),j(p(B,["prevent"]),["space"])]},[e("img",{src:s.value.thumbnail||"",alt:((v=s.value)==null?void 0:v.title)||"",class:"video-embed-poster-img"},null,8,fe),t[3]||(t[3]=e("div",{class:"video-embed-poster-play"},[e("i",{class:"fas fa-play"})],-1))],40,me))],64)):A("",!0),e("div",be,[e("div",ke,[e("h2",_e,c(((N=s.value)==null?void 0:N.title)||"Untitled"),1),e("div",ge,[e("span",we,c(((U=s.value)==null?void 0:U.host)||""),1),(z=s.value)!=null&&z.type?(r(),d("span",Se,c(String(s.value.type||"").replace(/_/g," ")),1)):A("",!0)]),e("p",Ce,c(((D=s.value)==null?void 0:D.description)||""),1)]),e("div",Ve,[e("button",{type:"button",class:"action-btn view-solo-btn",title:"View Solo",onClick:G},[...t[4]||(t[4]=[e("i",{class:"fas fa-external-link-alt"},null,-1),e("span",{class:"sr-only"},"View Solo",-1)])]),e("button",{type:"button",class:m(["action-btn bookmark-btn",{bookmarked:n(s.value)}]),"aria-pressed":n(s.value),title:n(s.value)?"Remove bookmark":"Bookmark",onClick:t[2]||(t[2]=a=>I(s.value))},[e("i",{class:m(n(s.value)?"fas fa-bookmark":"far fa-bookmark")},null,2),e("span",Le,c(n(s.value)?"Remove bookmark":"Bookmark"),1)],10,Be)])])],512),[[_,s.value]]),k(e("div",Re,[e("div",{class:"placeholder-content"},[t[6]||(t[6]=e("i",{class:"fas fa-play-circle"},null,-1)),t[7]||(t[7]=e("h3",null,"Select a video to play",-1)),t[8]||(t[8]=e("p",null,"Click on any video below to start watching",-1)),e("button",{type:"button",class:"btn btn-primary placeholder-watch-random",onClick:Z},[...t[5]||(t[5]=[e("i",{class:"fas fa-play"},null,-1),K(" Watch Random ",-1)])])])],512),[[_,!s.value]])])],512),e("section",xe,[e("div",Me,[(r(!0),d(O,null,le(y.value,a=>(r(),d("div",{key:a.id,class:m(["show-card",{"now-playing":s.value&&s.value.id===a.id}]),onClick:L=>V(a)},[e("div",Pe,[e("img",{src:a.thumbnail||"/static/img/default-cover.jpg",alt:a.title,loading:"lazy",decoding:"async",class:"image-placeholder"},null,8,Ee),e("div",Fe,[e("button",{type:"button",class:"show-overlay-open action-btn open-btn",title:"Open",onClick:p(L=>q(a),["stop"])}," Open ",8,We),e("button",{type:"button",class:m(["show-overlay-save action-btn bm-btn",{bookmarked:n(a)}]),"aria-pressed":n(a),title:"Bookmark",onClick:p(L=>I(a),["stop"])},[e("i",{class:m(n(a)?"fas fa-bookmark":"far fa-bookmark")},null,2),e("span",Te,c(n(a)?"Remove bookmark":"Add bookmark"),1)],10,qe),e("button",{type:"button",class:"play-btn",onClick:p(L=>V(a),["stop"])},[...t[9]||(t[9]=[e("i",{class:"fas fa-play"},null,-1)])],8,Ie)])]),e("div",Ne,[e("h4",null,c(a.title),1),e("p",Ue,c(a.host),1)])],10,$e))),128))])]),k(e("section",ze,[...t[10]||(t[10]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading videos...",-1)])],512),[[_,h.value]]),k(e("section",De,[e("div",{class:"empty-content"},[t[11]||(t[11]=e("i",{class:"fas fa-play-circle"},null,-1)),t[12]||(t[12]=e("h3",null,"No videos found",-1)),t[13]||(t[13]=e("p",null,"Try a different search or check back later.",-1)),e("button",{type:"button",class:"btn btn-primary",onClick:Y},"Clear search")])],512),[[_,!h.value&&y.value.length===0]])])])}}},Ae=ee(Ke,[["__scopeId","data-v-8595a73c"]]);export{Ae as default};
