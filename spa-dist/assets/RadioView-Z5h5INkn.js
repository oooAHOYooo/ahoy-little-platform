import{a as p}from"./useApi-BCqoWMHl.js";import{u as m,o as f,a as l,c as d,b as s,t as c,d as u,i,n as g,F as k,r as y,g as x,m as b}from"./index-BdyQCXb8.js";const w={class:"home-page"},T={class:"unified-header"},C={class:"header-content"},q={key:0,class:"header-count"},N={class:"live-dashboard"},P={class:"dashboard-sidebar",style:{"max-width":"100%"}},j={key:0,class:"dash-item radio-item"},R={class:"dash-thumb"},S=["src"],B={class:"dash-info"},F={class:"dash-title"},M={class:"dash-artist"},V={key:1,class:"dash-item radio-item"},z={class:"dash-thumb"},Q=["src"],$={class:"dash-info"},D={class:"dash-artist"},E={key:2,class:"dash-item radio-item"},I={key:0,class:"podcasts-section",style:{"margin-top":"16px"}},L={class:"episode-list"},O=["onClick"],U=["src","alt"],A={class:"episode-meta"},G={class:"episode-title"},H={class:"episode-show"},Y={__name:"RadioView",setup(J){const e=m(),n=x([]),h=b(()=>{if(!e.currentTrack||!e.queue.length)return[];const o=e.queue.findIndex(t=>t.id===e.currentTrack.id);return e.queue.slice(o+1,o+6)});function _(o){const t=[...o];for(let a=t.length-1;a>0;a--){const r=Math.floor(Math.random()*(a+1));[t[a],t[r]]=[t[r],t[a]]}return t}function v(){const o=_(n.value);e.setQueue(o,0)}return f(async()=>{const o=await p("/api/music").catch(()=>({tracks:[]}));n.value=o.tracks||[]}),(o,t)=>(l(),d("div",w,[s("div",T,[s("div",C,[t[1]||(t[1]=s("h1",null,"Radio",-1)),n.value.length?(l(),d("span",q,c(n.value.length)+" tracks",1)):u("",!0)])]),s("div",N,[s("div",P,[t[5]||(t[5]=s("div",{class:"sidebar-header"},[s("h2",null,"Now Playing")],-1)),i(e).currentTrack?(l(),d("div",j,[s("div",R,[s("img",{src:i(e).currentTrack.cover_art||i(e).currentTrack.artwork||"/static/img/default-cover.jpg",alt:"Now Playing"},null,8,S)]),s("div",B,[s("div",F,c(i(e).currentTrack.title),1),s("div",M,c(i(e).currentTrack.artist),1)]),s("button",{class:"dash-action-btn",onClick:t[0]||(t[0]=a=>i(e).togglePlay())},[s("i",{class:g(i(e).isPlaying?"fas fa-pause":"fas fa-play")},null,2)])])):n.value.length?(l(),d("div",V,[s("div",z,[s("img",{src:n.value[0].cover_art||"/static/img/default-cover.jpg",alt:"Radio"},null,8,Q)]),s("div",$,[t[2]||(t[2]=s("div",{class:"dash-title"},"Tap to start radio",-1)),s("div",D,c(n.value.length)+" tracks Â· Shuffle play",1)]),s("button",{class:"dash-action-btn",onClick:v},[...t[3]||(t[3]=[s("i",{class:"fas fa-play"},null,-1)])])])):(l(),d("div",E,[...t[4]||(t[4]=[s("div",{class:"dash-thumb skeleton",style:{width:"60px",height:"60px"}},null,-1),s("div",{class:"dash-info"},[s("div",{class:"skeleton",style:{height:"14px",width:"60%","margin-bottom":"6px"}}),s("div",{class:"skeleton",style:{height:"12px",width:"40%"}})],-1)])]))]),i(e).queue.length>1?(l(),d("div",I,[t[6]||(t[6]=s("div",{class:"podcasts-section-header"},[s("h2",null,"Up Next")],-1)),s("div",L,[(l(!0),d(k,null,y(h.value,(a,r)=>(l(),d("article",{key:a.id,class:"episode-row",onClick:K=>i(e).setQueue(i(e).queue,i(e).queue.indexOf(a))},[s("img",{class:"episode-art",src:a.cover_art||"/static/img/default-cover.jpg",alt:a.title,loading:"lazy"},null,8,U),s("div",A,[s("div",G,c(a.title),1),s("div",H,c(a.artist),1)])],8,O))),128))])])):u("",!0)])]))}};export{Y as default};
