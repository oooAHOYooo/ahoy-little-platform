import{_ as J,u as P,o as Y,b as R,c as y,d as S,e as t,H as X,f as a,B as k,F as j,t as w,j as m,k as g,h as _,C as z,G as b,L as H,p as U,m as G,Q as q,s as K}from"./index-BHVn4BJX.js";const Q={class:"settings-page"},$={class:"settings-container"},W={class:"settings-content"},Z={class:"settings-section neu-card"},ee={class:"settings-profile"},te={class:"settings-value"},se={class:"settings-links"},ne={key:1,class:"settings-guest"},oe={class:"settings-section neu-card"},ae={class:"settings-grid"},ie={class:"setting-item"},le={class:"dial-container"},de={class:"dial-value"},ue={class:"settings-section neu-card experimental-section"},re={class:"experimental-grid"},E="ahoySettings",ce={__name:"SettingsView",setup(me){const L=K(),u=H(),f=P(),C=G(null),o=q({masterVolume:75});let p=!1,v=null,l=null,d=null;function M(){u.isLoggedIn.value?b("/api/user/profile",{credentials:"include"}).then(s=>{var e;(e=s==null?void 0:s.preferences)!=null&&e.audioSettings&&(o.masterVolume=Math.max(0,Math.min(100,s.preferences.audioSettings.masterVolume??75))),h()}).catch(()=>h()):h()}function h(){var s;try{const e=localStorage.getItem(E);if(e){const n=JSON.parse(e);((s=n.audioSettings)==null?void 0:s.masterVolume)!=null&&(o.masterVolume=Math.max(0,Math.min(100,n.audioSettings.masterVolume)))}}catch{}c()}function A(){const s={audioSettings:{...o}};localStorage.setItem(E,JSON.stringify(s)),u.isLoggedIn.value&&b("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({preferences:{audioSettings:o}})}).catch(()=>{}),c(),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Settings saved!",type:"success"}}))}function D(){o.masterVolume=75;const s={audioSettings:{...o}};localStorage.setItem(E,JSON.stringify(s)),u.isLoggedIn.value&&b("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({preferences:{audioSettings:o}})}).catch(()=>{}),c(),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Settings reset to defaults",type:"info"}}))}function c(){var e;const s=o.masterVolume/100;document.querySelectorAll("audio").forEach(n=>{n.volume=s});try{const n=(e=f.getAudioElement)==null?void 0:e.call(f);n&&(n.volume=s)}catch{}}function V(s,e){p=!0,v=e;const n=s.currentTarget;l=r=>I(r,n),d=()=>x(),document.addEventListener("mousemove",l),document.addEventListener("mouseup",d),document.addEventListener("touchmove",l,{passive:!1}),document.addEventListener("touchend",d)}function I(s,e){if(!p||!e)return;const n=s.touches?s.touches[0].clientX:s.clientX,r=s.touches?s.touches[0].clientY:s.clientY,i=e.getBoundingClientRect(),T=i.left+i.width/2,O=i.top+i.height/2,B=(Math.atan2(r-O,n-T)*(180/Math.PI)+90+360)%360,F=Math.max(0,Math.min(100,B/1.8));v==="masterVolume"&&(o.masterVolume=F),c()}function x(){p=!1,v=null,l&&(document.removeEventListener("mousemove",l),document.removeEventListener("touchmove",l)),d&&(document.removeEventListener("mouseup",d),document.removeEventListener("touchend",d)),l=null,d=null}async function N(){await u.logout(),window.dispatchEvent(new CustomEvent("ahoy:toast",{detail:{message:"Signed out",type:"success"}})),L.push("/")}return Y(()=>{M()}),R(()=>{x()}),(s,e)=>{var r;const n=U("router-link");return y(),S("div",Q,[t("div",$,[e[17]||(e[17]=X('<section class="podcasts-hero settings-page-header" data-v-4dc7d37c><div class="podcasts-hero-inner" data-v-4dc7d37c><h1 data-v-4dc7d37c><i class="fas fa-cog" aria-hidden="true" data-v-4dc7d37c></i> Settings </h1><p data-v-4dc7d37c>Customize your Ahoy experience.</p></div></section><div class="settings-header desktop-only" data-v-4dc7d37c><div class="settings-header-icon" data-v-4dc7d37c><i class="fas fa-cog" data-v-4dc7d37c></i></div><h1 data-v-4dc7d37c>Settings</h1><p data-v-4dc7d37c>Customize your Ahoy experience</p></div>',2)),t("div",W,[t("div",Z,[e[8]||(e[8]=t("h2",null,[t("i",{class:"fas fa-user"}),a(" Account")],-1)),k(u).isLoggedIn.value?(y(),S(j,{key:0},[t("div",ee,[e[2]||(e[2]=t("span",{class:"settings-label"},"Logged in as",-1)),t("span",te,w((r=k(u).user.value)==null?void 0:r.email),1)]),t("div",se,[m(n,{to:"/account",class:"settings-link"},{default:g(()=>[...e[3]||(e[3]=[t("i",{class:"fas fa-user-circle"},null,-1),a(" Account & wallet ",-1)])]),_:1}),m(n,{to:"/my-saves",class:"settings-link"},{default:g(()=>[...e[4]||(e[4]=[t("i",{class:"fas fa-bookmark"},null,-1),a(" Saved ",-1)])]),_:1})]),t("button",{type:"button",class:"neu-btn neu-btn-secondary logout-btn",onClick:N},[...e[5]||(e[5]=[t("i",{class:"fas fa-sign-out-alt"},null,-1),a(" Sign out ",-1)])])],64)):(y(),S("div",ne,[e[7]||(e[7]=t("p",null,"Sign in to manage your preferences.",-1)),m(n,{to:"/login",class:"neu-btn neu-btn-primary"},{default:g(()=>[...e[6]||(e[6]=[a("Sign in",-1)])]),_:1})]))]),t("div",oe,[e[11]||(e[11]=t("h2",null,[t("i",{class:"fas fa-volume-up"}),a(" Audio")],-1)),t("div",ae,[t("div",ie,[e[10]||(e[10]=t("label",null,"Master Volume",-1)),t("div",le,[t("div",{ref_key:"dialEl",ref:C,class:"neu-dial",style:z({transform:`rotate(${o.masterVolume*1.8-90}deg)`}),onMousedown:e[0]||(e[0]=_(i=>V(i,"masterVolume"),["prevent"])),onTouchstart:e[1]||(e[1]=_(i=>V(i,"masterVolume"),["prevent"]))},[...e[9]||(e[9]=[t("div",{class:"dial-handle"},null,-1)])],36),t("span",de,w(Math.round(o.masterVolume)),1)])])])]),t("div",ue,[e[13]||(e[13]=t("h2",null,[t("i",{class:"fas fa-flask"}),a(" Experimental")],-1)),e[14]||(e[14]=t("p",{class:"experimental-disclaimer"},"These features are still in development and may change or be removed.",-1)),t("div",re,[m(n,{to:"/focus",class:"experimental-card neu-card-inset"},{default:g(()=>[...e[12]||(e[12]=[t("div",{class:"experimental-card-icon"},[t("i",{class:"fas fa-headphones"})],-1),t("div",{class:"experimental-card-info"},[t("h3",null,"Focus Mode"),t("p",null,"Ambient audio for deep focus and relaxation")],-1),t("i",{class:"fas fa-chevron-right experimental-card-arrow"},null,-1)])]),_:1})])]),t("div",{class:"settings-actions"},[t("button",{type:"button",class:"neu-btn neu-btn-secondary",onClick:D},[...e[15]||(e[15]=[t("i",{class:"fas fa-undo"},null,-1),a(" Reset to Defaults ",-1)])]),t("button",{type:"button",class:"neu-btn neu-btn-primary",onClick:A},[...e[16]||(e[16]=[t("i",{class:"fas fa-save"},null,-1),a(" Save Settings ",-1)])])])])])])}}},pe=J(ce,[["__scopeId","data-v-4dc7d37c"]]);export{pe as default};
