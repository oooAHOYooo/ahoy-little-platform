import{z as f,o as g,a as b,c as l,d as c,e as t,t as n,i as r,f as m,B as v,n as x,F as S,r as B,G as V,m as w,H as C,L as M,q as _,p as N,y as $,k as z}from"./index-Dqnp3WRI.js";const F={key:0,class:"shows-page"},j={class:"podcast-show-hero"},D=["src","alt"],L={class:"podcast-show-hero-meta"},R={class:"podcast-show-hero-title"},q={key:0,class:"podcast-show-hero-desc"},E={key:1,class:"podcast-show-hero-desc"},G={class:"podcast-show-hero-actions"},H={key:0,class:"podcasts-section",style:{"margin-top":"16px"}},P={class:"video-embed-container",style:{position:"relative","padding-bottom":"56.25%",height:"0",overflow:"hidden","border-radius":"12px"}},T=["src"],U={key:1,class:"podcasts-section",style:{"margin-top":"16px"}},W={class:"shows-grid"},A={class:"show-thumbnail"},I=["src","alt"],J={class:"show-info"},K={class:"show-title"},O={class:"show-host"},Q={key:1,class:"shows-page"},Z={__name:"ShowDetailView",setup(X){const y=C(),d=f(),s=w(null),u=w([]),p=_(()=>s.value?u.value.filter(o=>o.id!==s.value.id).slice(0,6):[]),h=_(()=>{if(!s.value)return null;const o=s.value.video_url||s.value.url||"",e=o.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&]+)/);if(e)return`https://www.youtube.com/embed/${e[1]}`;const a=o.match(/vimeo\.com\/(\d+)/);return a?`https://player.vimeo.com/video/${a[1]}`:null});function k(){var e,a;s.value&&M({id:s.value.id,type:"show",title:s.value.title,host:s.value.host,thumbnail:s.value.thumbnail,url:s.value.video_url||s.value.url});const o=((e=s.value)==null?void 0:e.video_url)||((a=s.value)==null?void 0:a.url)||"";o&&!h.value&&window.open(o,"_blank")}return g(async()=>{const o=await b("/api/shows").catch(()=>({shows:[]}));u.value=o.shows||[];const e=y.params.id;s.value=u.value.find(a=>String(a.id)===String(e))||null}),(o,e)=>{const a=N("router-link");return s.value?(l(),c("div",F,[t("section",j,[t("img",{class:"podcast-show-hero-art",src:s.value.thumbnail||"/static/img/default-cover.jpg",alt:s.value.title},null,8,D),t("div",L,[e[2]||(e[2]=t("div",{class:"podcast-show-hero-kicker"},"Video",-1)),t("h1",R,n(s.value.title),1),s.value.host?(l(),c("p",q,n(s.value.host),1)):r("",!0),s.value.description?(l(),c("p",E,n(s.value.description),1)):r("",!0),t("div",G,[t("button",{class:"podcast-cta",onClick:k},[...e[1]||(e[1]=[t("i",{class:"fas fa-play"},null,-1),m(" Watch ",-1)])]),t("button",{class:"podcast-cta secondary",onClick:e[0]||(e[0]=i=>v(d).toggle({...s.value,_type:"show"}))},[t("i",{class:x(v(d).isBookmarked(s.value)?"fas fa-bookmark":"far fa-bookmark")},null,2),m(" "+n(v(d).isBookmarked(s.value)?"Saved":"Save"),1)])])])]),h.value?(l(),c("section",H,[t("div",P,[t("iframe",{src:h.value,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",border:"0"},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,T)])])):r("",!0),p.value.length?(l(),c("section",U,[e[4]||(e[4]=t("div",{class:"podcasts-section-header"},[t("h2",null,"More Videos")],-1)),t("div",W,[(l(!0),c(S,null,B(p.value,i=>(l(),$(a,{key:i.id,to:`/shows/${i.id}`,class:"show-card"},{default:z(()=>[t("div",A,[t("img",{src:i.thumbnail||"/static/img/default-cover.jpg",alt:i.title,loading:"lazy"},null,8,I),e[3]||(e[3]=t("div",{class:"show-overlay"},[t("button",{class:"play-btn"},[t("i",{class:"fas fa-play"})])],-1))]),t("div",J,[t("div",K,n(i.title),1),t("div",O,n(i.host),1)])]),_:2},1032,["to"]))),128))])])):r("",!0)])):(l(),c("div",Q,[...e[5]||(e[5]=[V('<section class="podcast-show-hero"><div class="podcast-show-hero-art skeleton" style="aspect-ratio:16/9;width:100%;"></div><div class="podcast-show-hero-meta"><div class="skeleton" style="height:14px;width:40%;margin-bottom:8px;"></div><div class="skeleton" style="height:24px;width:70%;margin-bottom:8px;"></div><div class="skeleton" style="height:14px;width:50%;"></div></div></section>',1)])]))}}};export{Z as default};
