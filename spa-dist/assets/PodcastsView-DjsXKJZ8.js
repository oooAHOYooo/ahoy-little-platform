import{n as U,u as z,o as D,a as I,c as l,d as i,e as s,k as S,w as $,v as L,l as k,s as p,F as f,f as h,C as R,m,A as T,B as G,r as O,t as u,j as M,i as P,g as v,y as _}from"./index-DcQ9GdWE.js";const H={class:"podcasts-page"},J={class:"unified-header podcasts-subheader desktop-only"},K={class:"header-content"},W={class:"header-search"},X={class:"search-bar"},Y={class:"header-filters"},Z={class:"filter-tabs"},tt=["onClick"],st={class:"podcasts-section mobile-only",style:{"margin-top":"0"}},et={class:"artists-mobile-controls"},ot={class:"search-bar"},at={class:"filter-tabs-mobile"},lt=["onClick"],it={class:"podcasts-section podcasts-featured-section desktop-only"},nt={class:"podcasts-section-header podcasts-featured-header"},dt={class:"podcast-filter-chips"},rt=["onClick"],ut={class:"podcast-shows-dropdown-mobile"},ct=["value"],pt={class:"podcast-shows podcast-shows-preview podcast-shows-desktop"},vt=["onClick"],kt=["src","alt"],ft={class:"podcast-show-title"},ht={key:0,class:"podcast-show-desc"},yt={key:1,class:"podcast-show-updated"},gt={class:"podcasts-section"},bt={class:"episode-list"},mt=["onClick"],_t=["src","alt"],wt={class:"episode-meta"},Ct={class:"episode-title"},St={class:"episode-subtitle"},$t={class:"episode-show"},Tt={class:"episode-time"},xt={key:0,class:"episode-dot"},Bt={key:1,class:"episode-date"},Lt={key:0,class:"episode-desc"},Mt={class:"episode-actions"},Pt=["onClick"],Vt=["onClick"],At=["onClick"],qt={key:0,class:"podcasts-section"},Et={class:"podcast-shows podcast-shows-preview"},Ft={__name:"PodcastsView",setup(Qt){const V=G(),c=U(),A=z(),w=m([]),C=m(!0),r=m(""),n=m("all"),y=T(()=>{let o=w.value||[];if(r.value){const e=r.value.toLowerCase();o=o.filter(a=>a.title.toLowerCase().includes(e)||a.description&&a.description.toLowerCase().includes(e))}return o.slice(0,4)}),g=T(()=>{const o=new Set(y.value.map(a=>a.slug)),e=[];for(const a of w.value||[])if(o.has(a.slug))for(const t of a.episodes||[])e.push({key:`${a.slug}:${t.id}`,showSlug:a.slug,showTitle:a.title||a.slug,id:t.id,title:t.title||"Untitled",description:t.description||"",date:t.date||"",duration:t.duration||E(t.duration_seconds),duration_seconds:t.duration_seconds||0,artwork:t.artwork||t.cover_art||a.artwork||"/static/img/default-cover.jpg",audio_url:t.audio_url||t.url||"",type:"podcast",artist:a.title||a.slug,cover_art:t.artwork||t.cover_art||a.artwork||"/static/img/default-cover.jpg"});return e.sort((a,t)=>String(t.date||"").localeCompare(String(a.date||""))),e}),x=T(()=>{let o=g.value;if(n.value!=="all"&&(o=o.filter(e=>e.showSlug===n.value)),r.value){const e=r.value.toLowerCase();o=o.filter(a=>a.title.toLowerCase().includes(e)||a.description.toLowerCase().includes(e)||a.showTitle.toLowerCase().includes(e))}return o});function q(){if(g.value.length===0)return;const o=g.value[Math.floor(Math.random()*g.value.length)];B(o)}function E(o){if(!o)return"";const e=Math.floor(o/60),a=Math.floor(o%60);return`${e}:${a.toString().padStart(2,"0")}`}function b(o){return{id:o.id,key:o.key,title:o.title,artist:o.showTitle,cover_art:o.artwork,audio_url:o.audio_url,type:"podcast"}}function B(o){const e=[...x.value].sort((d,N)=>(d.title||"").localeCompare(N.title||"",void 0,{sensitivity:"base"})),a=e.map(d=>b(d)),t=e.findIndex(d=>d.key===o.key);c.setQueue(a,t>=0?t:0)}function Q(o){c.addToQueue(b(o))}function j(o){A.toggle({type:"podcast-episode",id:o.key,title:o.title,artwork:o.artwork,_type:"podcast-episode"})}function F(o){V.push(`/podcasts/${o}`)}return D(async()=>{C.value=!0;const o=await I("/api/podcasts").catch(()=>({shows:[]}));w.value=o.shows||[],C.value=!1}),(o,e)=>{const a=O("router-link");return l(),i("div",H,[e[28]||(e[28]=s("section",{class:"podcasts-hero mobile-only"},[s("div",{class:"podcasts-hero-inner"},[s("h1",null,[s("i",{class:"fas fa-podcast","aria-hidden":"true"}),S(" Podcasts ")]),s("p",null,"Fresh episodes and shows from independent creators.")])],-1)),s("section",J,[s("div",K,[e[14]||(e[14]=s("div",{class:"header-title"},[s("div",{class:"title-text"},[s("h1",null,"Podcasts"),s("p",null,"Fresh episodes and shows from independent creators.")])],-1)),s("div",W,[s("div",X,[e[10]||(e[10]=s("i",{class:"fas fa-search","aria-hidden":"true"},null,-1)),$(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),type:"text",class:"search-input",placeholder:"Search shows or episodes..."},null,512),[[L,r.value]]),r.value?(l(),i("button",{key:0,type:"button",class:"search-clear","aria-label":"Clear search",onClick:e[1]||(e[1]=t=>r.value="")},[...e[9]||(e[9]=[s("i",{class:"fas fa-times","aria-hidden":"true"},null,-1)])])):k("",!0)])]),s("div",Y,[s("div",Z,[s("button",{type:"button",class:p(["filter-tab",{active:n.value==="all"}]),onClick:e[2]||(e[2]=t=>n.value="all")},[...e[11]||(e[11]=[s("i",{class:"fas fa-th-large",style:{"margin-right":"6px"}},null,-1),s("span",null,"All Shows",-1)])],2),(l(!0),i(f,null,h(y.value,t=>(l(),i("button",{key:t.slug,type:"button",class:p(["filter-tab",{active:n.value===t.slug}]),onClick:d=>n.value=t.slug},[e[12]||(e[12]=s("i",{class:"fas fa-microphone",style:{"margin-right":"6px"}},null,-1)),s("span",null,u(t.title),1)],10,tt))),128))])]),s("div",{class:"header-actions"},[s("button",{type:"button",class:"btn btn-primary btn-large",onClick:q},[...e[13]||(e[13]=[s("i",{class:"fas fa-random"},null,-1),S(" Random Episode ",-1)])])])])]),s("section",st,[s("div",et,[s("div",ot,[e[16]||(e[16]=s("i",{class:"fas fa-search","aria-hidden":"true"},null,-1)),$(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>r.value=t),type:"text",class:"search-input",placeholder:"Search shows or episodes..."},null,512),[[L,r.value]]),r.value?(l(),i("button",{key:0,type:"button",class:"search-clear","aria-label":"Clear search",onClick:e[4]||(e[4]=t=>r.value="")},[...e[15]||(e[15]=[s("i",{class:"fas fa-times","aria-hidden":"true"},null,-1)])])):k("",!0)]),s("div",at,[s("button",{type:"button",class:p(["filter-tab-mobile",{active:n.value==="all"}]),onClick:e[5]||(e[5]=t=>n.value="all")},[...e[17]||(e[17]=[s("span",null,"All",-1)])],2),(l(!0),i(f,null,h(y.value,t=>(l(),i("button",{key:t.slug,type:"button",class:p(["filter-tab-mobile",{active:n.value===t.slug}]),onClick:d=>n.value=t.slug},[s("span",null,u(t.title),1)],10,lt))),128))])])]),s("section",it,[s("div",nt,[e[18]||(e[18]=s("div",null,[s("h2",null,"Shows"),s("p",{class:"podcasts-section-subtitle"},"Pick a show to filter the latest episodes.")],-1)),s("div",dt,[s("button",{type:"button",class:p(["podcast-filter-chip",{active:n.value==="all"}]),onClick:e[6]||(e[6]=t=>n.value="all")}," All ",2),(l(!0),i(f,null,h(y.value,t=>(l(),i("button",{key:t.slug,type:"button",class:p(["podcast-filter-chip",{active:n.value===t.slug}]),onClick:d=>n.value=t.slug},u(t.title),11,rt))),128))])]),s("div",ut,[$(s("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>n.value=t),class:"podcast-show-select"},[e[19]||(e[19]=s("option",{value:"all"},"All Shows",-1)),(l(!0),i(f,null,h(y.value,t=>(l(),i("option",{key:t.slug,value:t.slug},u(t.title),9,ct))),128))],512),[[R,n.value]])]),s("div",pt,[(l(!0),i(f,null,h(y.value,t=>(l(),i("div",{key:t.slug,class:p(["podcast-show-preview-card",{active:n.value===t.slug}])},[s("button",{type:"button",class:"podcast-show-card podcast-show-card--filter",onClick:d=>n.value=t.slug},[s("img",{src:t.artwork||"/static/img/default-cover.jpg",alt:t.title,class:"podcast-show-art",loading:"lazy"},null,8,kt),s("div",ft,u(t.title),1),t.description?(l(),i("div",ht,u(t.description),1)):k("",!0),t.last_updated?(l(),i("div",yt," Updated "+u(t.last_updated),1)):k("",!0)],8,vt),M(a,{to:`/podcasts/${t.slug}`,class:"podcast-show-open"},{default:P(()=>[...e[20]||(e[20]=[S(" Open show ",-1),s("i",{class:"fas fa-arrow-right","aria-hidden":"true"},null,-1)])]),_:1},8,["to"])],2))),128))])]),s("section",gt,[e[26]||(e[26]=s("div",{class:"podcasts-section-header"},[s("h2",null,"New Episodes")],-1)),s("div",bt,[(l(!0),i(f,null,h(x.value,t=>(l(),i("article",{key:t.key,class:p(["episode-row",{playing:v(c).currentTrack&&(v(c).currentTrack.id===t.id||v(c).currentTrack.key===t.key)}]),onClick:d=>F(t.showSlug)},[s("img",{class:"episode-art",src:t.artwork||"/static/img/default-cover.jpg",alt:t.title,loading:"lazy"},null,8,_t),s("div",wt,[s("div",Ct,u(t.title),1),s("div",St,[s("span",$t,u(t.showTitle),1),e[21]||(e[21]=s("span",{class:"episode-dot"},"•",-1)),s("span",Tt,u(t.duration),1),t.date?(l(),i("span",xt,"•")):k("",!0),t.date?(l(),i("span",Bt,u(t.date),1)):k("",!0)]),t.description?(l(),i("div",Lt,u(t.description),1)):k("",!0)]),s("div",Mt,[s("button",{type:"button",class:"episode-btn",title:"Play",onClick:_(d=>B(t),["stop"])},[s("i",{class:p(v(c).currentTrack&&(v(c).currentTrack.id===t.id||v(c).currentTrack.key===t.key)&&v(c).isPlaying?"fas fa-pause":"fas fa-play"),"aria-hidden":"true"},null,2),e[22]||(e[22]=s("span",{class:"sr-only"},"Play",-1))],8,Pt),s("button",{type:"button",class:p(["episode-btn queue-btn",{"in-queue":v(c).isInQueue(b(t))}]),title:"Add to queue",onClick:_(d=>Q(t),["stop"])},[s("i",{class:p(v(c).isInQueue(b(t))?"fas fa-check":"fas fa-plus"),"aria-hidden":"true"},null,2),e[23]||(e[23]=s("span",{class:"sr-only"},"Add to queue",-1))],10,Vt),s("button",{type:"button",class:"episode-btn bm-btn",title:"Bookmark",onClick:_(d=>j(t),["stop"])},[...e[24]||(e[24]=[s("i",{class:"fas fa-bookmark","aria-hidden":"true"},null,-1),s("span",{class:"sr-only"},"Bookmark",-1)])],8,At),M(a,{to:`/podcasts/${t.showSlug}`,class:"episode-open",title:"Go to podcast",onClick:e[8]||(e[8]=_(()=>{},["stop"]))},{default:P(()=>[...e[25]||(e[25]=[s("i",{class:"fas fa-podcast","aria-hidden":"true"},null,-1),s("span",{class:"sr-only"},"Go to podcast",-1)])]),_:1},8,["to"])])],10,mt))),128))])]),C.value?(l(),i("section",qt,[s("div",Et,[(l(),i(f,null,h(4,t=>s("div",{key:t,class:"podcast-show-preview-card"},[...e[27]||(e[27]=[s("div",{class:"podcast-show-art skeleton",style:{"aspect-ratio":"1",width:"100%"}},null,-1),s("div",{class:"skeleton",style:{height:"14px",width:"80%","margin-top":"8px"}},null,-1)])])),64))])])):k("",!0)])}}};export{Ft as default};
