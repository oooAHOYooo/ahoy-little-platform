import{o as j,a as A,c as f,d as h,e,f as B,t as r,n as k,F as x,r as F,m as i,q as D}from"./index-BHVn4BJX.js";const L={class:"tv-container"},$={class:"video-spotlight"},q={class:"spotlight-grid"},z={class:"spotlight-left"},I={class:"panelstream-player hero-player"},G={class:"video-header"},H={class:"channel-name-label","aria-live":"polite"},J={class:"channel-remote remote-below","aria-label":"Channel Controls"},K={class:"playing-now glass"},O=["src"],Q={class:"now-col"},R={class:"np-title"},W={class:"np-sub"},X={class:"next-col"},Y={class:"np-next"},Z={id:"channel-selector"},ee=["onClick"],te={class:"channel-button-name"},le={class:"channel-button-next"},ae={__name:"LiveTVView",setup(ne){const s=i(null),o=i([]),c=i(0),g=i(!0),d=i(!1),v=i(!0),m=i("Select a program"),y=i("—"),b=i("/static/img/default-cover.jpg"),w=i("—"),P=D(()=>o.value[c.value]||null);function T(l){var n;if(!((n=l==null?void 0:l.items)!=null&&n.length))return"—";const t=l.items[0].title;return t&&String(t).trim()||"—"}function V(l){return(l==null?void 0:l.video_url)||(l==null?void 0:l.mp4_link)||(l==null?void 0:l.trailer_url)||""}function p(l){var _,C;c.value=l;const t=o.value[l];if(!t)return;const n=(_=t.items)==null?void 0:_[0],a=n?V(n):"";s.value&&(s.value.pause(),a?(s.value.src=a,s.value.load(),s.value.muted=!1,v.value=!1,s.value.play().catch(()=>{}),m.value=n.title||"—",y.value=n.category||n.description&&n.description.slice(0,60)||"—",b.value=n.thumbnail||"/static/img/default-cover.jpg"):(s.value.removeAttribute("src"),m.value="Select a program",y.value="—",b.value="/static/img/default-cover.jpg"));const u=(C=t.items)==null?void 0:C[1];w.value=u!=null&&u.title?String(u.title).trim():"—"}function E(){s.value&&(d.value?s.value.pause():s.value.play().catch(()=>{}))}function M(){s.value&&(v.value=!v.value,s.value.muted=v.value)}function N(){var l,t,n,a;s.value&&(document.fullscreenElement?(a=document.exitFullscreen)==null||a.call(document):(n=(t=(l=s.value).requestFullscreen)==null?void 0:t.call(l))==null||n.catch(()=>{}))}function S(){const l=(c.value-1+o.value.length)%o.value.length;p(l)}function U(){const l=(c.value+1)%o.value.length;p(l)}return j(async()=>{g.value=!0;try{const l=await A("/api/live-tv/channels");o.value=l.channels||[],o.value.forEach(t=>{Array.isArray(t.items)||(t.items=[])}),o.value.length&&p(0)}catch{o.value=[]}g.value=!1}),(l,t)=>{var n;return f(),h("div",L,[t[9]||(t[9]=e("section",{class:"podcasts-hero"},[e("div",{class:"podcasts-hero-inner"},[e("h1",null,[e("i",{class:"fas fa-tv","aria-hidden":"true"}),B(" Live TV ")]),e("p",null,"Channel surf and watch live programming.")])],-1)),e("div",$,[e("div",q,[e("div",z,[e("div",I,[e("video",{ref_key:"videoEl",ref:s,controls:"",playsinline:"","webkit-playsinline":"",muted:"",onPlay:t[0]||(t[0]=a=>d.value=!0),onPause:t[1]||(t[1]=a=>d.value=!1)},null,544),e("div",G,[t[2]||(t[2]=e("span",{class:"now-playing-label"},"Now Playing",-1)),e("span",H,r(((n=P.value)==null?void 0:n.name)||"Channel —"),1)]),t[3]||(t[3]=e("div",{class:"hero-glass"},null,-1))]),e("div",J,[e("button",{type:"button",class:"remote-btn",title:"Play/Pause",onClick:E},[e("i",{class:k(d.value?"fas fa-pause":"fas fa-play")},null,2)]),e("button",{type:"button",class:"remote-btn",title:"Mute",onClick:M},[e("i",{class:k(v.value?"fas fa-volume-mute":"fas fa-volume-up")},null,2)]),e("button",{type:"button",class:"remote-btn",title:"Fullscreen",onClick:N},[...t[4]||(t[4]=[e("i",{class:"fas fa-expand"},null,-1)])]),e("button",{type:"button",class:"remote-btn",title:"Channel Up",onClick:S},[...t[5]||(t[5]=[e("i",{class:"fas fa-chevron-up"},null,-1)])]),e("button",{type:"button",class:"remote-btn",title:"Channel Down",onClick:U},[...t[6]||(t[6]=[e("i",{class:"fas fa-chevron-down"},null,-1)])])]),e("div",K,[e("img",{src:b.value,alt:"",class:"playing-now-thumb"},null,8,O),e("div",Q,[e("div",R,r(m.value),1),e("div",W,r(y.value),1)]),e("div",X,[t[7]||(t[7]=e("div",{class:"np-label"},"Up Next",-1)),e("div",Y,r(w.value),1)])])])])]),e("div",Z,[g.value?(f(),h(x,{key:0},F(4,a=>e("div",{key:"skeleton-"+a,class:"channel-button",style:{"pointer-events":"none"}},[...t[8]||(t[8]=[e("div",{class:"skeleton",style:{height:"20px",width:"70%","margin-bottom":"8px"}},null,-1),e("div",{class:"skeleton",style:{height:"14px",width:"50%"}},null,-1)])])),64)):(f(!0),h(x,{key:1},F(o.value,(a,u)=>(f(),h("button",{key:a.id,type:"button",class:k(["channel-button",{active:c.value===u}]),onClick:_=>p(u)},[e("div",te,r(a.name),1),e("div",le,r(T(a)),1)],10,ee))),128))])])}}};export{ae as default};
