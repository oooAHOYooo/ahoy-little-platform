import{_ as De,u as Pe,o as Ve,a as Y,b as Ne,r as Le,c as u,d as g,e,F as D,f as P,w as W,g as w,h as se,i as A,t as f,j as G,k as X,l as K,m as h,n as We,p as qe,q as Oe,s as H,v as ze,x as Te,y as Q,z as _e,A as Se,B as Be}from"./index-CvISaDOf.js";import{_ as Fe}from"./ahoy_logo--Z4AShNu.js";let be=null;function Ae(){if(!be&&typeof window<"u"){const c=window.AudioContext||window.webkitAudioContext;c&&(be=new c)}return be}function Qe(){if(typeof window>"u")return;const c=Ae();if(!c)return;c.state==="suspended"&&c.resume().catch(()=>{});const m=c.currentTime,i=c.createOscillator(),b=c.createGain();i.type="triangle",i.frequency.setValueAtTime(800,m),i.frequency.exponentialRampToValueAtTime(1200,m+.05),b.gain.setValueAtTime(0,m),b.gain.linearRampToValueAtTime(.05,m+.01),b.gain.exponentialRampToValueAtTime(.001,m+.05),i.connect(b),b.connect(c.destination),i.start(m),i.stop(m+.05)}function Ge(){if(typeof window>"u")return;const c=Ae();if(!c)return;c.state==="suspended"&&c.resume().catch(()=>{});const m=c.currentTime,i=c.createOscillator(),b=c.createGain();i.type="square",i.frequency.setValueAtTime(400,m),i.frequency.exponentialRampToValueAtTime(600,m+.1),b.gain.setValueAtTime(0,m),b.gain.linearRampToValueAtTime(.08,m+.01),b.gain.exponentialRampToValueAtTime(.001,m+.1),i.connect(b),b.connect(c.destination),i.start(m),i.stop(m+.1)}function Xe(){return{playHoverSound:Qe,playClickSound:Ge}}const ae={mounted(c,m){const i={max:15,perspective:1e3,scale:1.05,speed:1e3,...m.value};c.style.transformStyle="preserve-3d",c.style.transform=`perspective(${i.perspective}px)`;const b=j=>{const S=c.getBoundingClientRect(),I=j.clientX-S.left,le=j.clientY-S.top,Z=S.width/2,p=S.height/2,C=(le-p)/p*-i.max,N=(I-Z)/Z*i.max;(i.target?c.querySelectorAll(i.target):[c]).forEach(y=>{y.style.transition="none",y.style.transform=`
                    perspective(${i.perspective}px)
                    rotateX(${C}deg)
                    rotateY(${N}deg)
                    scale3d(${i.scale}, ${i.scale}, ${i.scale})
                 `})},O=()=>{(i.target?c.querySelectorAll(i.target):[c]).forEach(S=>{S.style.transition=`transform ${i.speed}ms cubic-bezier(.03,.98,.52,.99)`,S.style.transform=`
                    perspective(${i.perspective}px)
                    rotateX(0deg)
                    rotateY(0deg)
                    scale3d(1, 1, 1)
                `})};c.addEventListener("mousemove",b),c.addEventListener("mouseleave",O),c._tiltCleanup=()=>{c.removeEventListener("mousemove",b),c.removeEventListener("mouseleave",O)}},unmounted(c){c._tiltCleanup&&c._tiltCleanup()}},Je={key:0,class:"explore-widgets-container"},Ue={class:"explore-widget recent-widget"},He={class:"widget-grid"},Ke={key:0,class:"empty-placeholder"},et={class:"card-image"},tt=["src","alt"],st={class:"card-title"},at={class:"explore-widget saves-widget"},lt={class:"widget-grid"},nt={key:0,class:"empty-placeholder"},it={class:"card-image"},ot=["src","alt"],rt={class:"card-title"},ct={class:"explore-widget video-widget"},dt={class:"widget-grid"},ut={class:"card-image"},vt=["src","alt"],ht={class:"card-title"},pt={class:"explore-widget podcast-widget"},mt={class:"widget-grid"},ft={class:"card-image"},gt=["src","alt"],wt={class:"card-title"},yt={class:"explore-widget music-widget"},kt={class:"widget-grid"},_t={class:"card-image"},bt=["src","alt"],Ct={class:"card-title"},xt={class:"explore-widget artist-widget"},$t={class:"widget-grid"},Mt={class:"card-image circle"},Tt=["src","alt"],St={class:"card-title"},Vt={__name:"ExploreWidgets",setup(c){const m=h(!0),i=h([]),b=h([]),O=h([]),j=h([]),S=h([]),I=h([]),le=Pe(),{playHoverSound:Z,playClickSound:p}=Xe();typeof window<"u"&&window.matchMedia("(hover: hover)").matches;function C(y,n){return!y||y.length===0?[]:[...y].sort(()=>.5-Math.random()).slice(0,n)}function N(){try{const y=localStorage.getItem("ahoy.recentlyPlayed.v1");y&&(I.value=JSON.parse(y).slice(0,12))}catch(y){console.error("Failed to load recently played",y)}}function E(){const y=Object.values(le.bookmarks.value||{});S.value=y.reverse().slice(0,12)}return Ve(async()=>{try{const[y,n,T,a]=await Promise.all([Y("/api/podcasts").catch(()=>({shows:[]})),Y("/api/shows").catch(()=>({shows:[]})),Y("/api/music").catch(()=>({tracks:[],albums:[]})),Y("/api/artists").catch(()=>({artists:[]}))]);i.value=C(y.shows||[],12),b.value=C(n.shows||[],12);const ce=T.tracks||[],ne=new Map,de=[];for(const v of ce)v.album&&v.album!=="Single"&&!ne.has(v.album)?ne.set(v.album,{id:v.album,title:v.album,cover_art:v.cover_art||v.artwork,artist:v.artist,type:"album"}):de.push({id:v.id,title:v.title,cover_art:v.cover_art||v.artwork,artist:v.artist,type:"track"});let V=Array.from(ne.values());if(V.length<3){const v=3-V.length,J=C(de,v);V=[...V,...J]}if(V.length<3){const v=3-V.length,J=new Set(V.map(x=>x.id||x.title)),he=ce.filter(x=>!J.has(x.id)&&!J.has(x.title)),L=C(he,v).map(x=>({id:x.id,title:x.title,cover_art:x.cover_art||x.artwork,artist:x.artist,type:"track"}));V=[...V,...L]}O.value=V.slice(0,12);const ve=(a.artists||[]).map(v=>({...v,slug:v.slug||v.id||(v.name||"").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}));j.value=C(ve,12),N(),E(),window.addEventListener("recentlyPlayed:updated",v=>{v.detail&&v.detail.recent&&(I.value=v.detail.recent.slice(0,12))}),window.addEventListener("bookmarks:changed",E)}catch(y){console.error("Error loading explore widgets",y)}finally{m.value=!1}}),Ne(()=>{window.removeEventListener("recentlyPlayed:updated",N),window.removeEventListener("bookmarks:changed",E)}),(y,n)=>{const T=Le("router-link");return m.value?K("",!0):(u(),g("section",Je,[e("div",Ue,[n[1]||(n[1]=e("div",{class:"widget-header"},[e("div",{class:"header-icon"},[e("i",{class:"fas fa-history"})]),e("div",{class:"header-text"},[e("h3",null,"Recently Played"),e("p",null,"Jump back in")])],-1)),e("div",He,[I.value.length===0?(u(),g("div",Ke," No history yet ")):(u(!0),g(D,{key:1},P(I.value,a=>W((u(),se(T,{key:a.key||a.id,to:`/${a.type==="show"?"shows":"music"}/${a.id}`,class:"widget-card",onMouseenter:w(Z),onClick:w(p)},{default:A(()=>[e("div",et,[e("img",{src:a.artwork||a.cover_art||"/static/img/default-cover.jpg",alt:a.title,loading:"lazy"},null,8,tt),n[0]||(n[0]=e("div",{class:"play-icon"},[e("i",{class:"fas fa-play"})],-1))]),e("div",st,f(a.title),1)]),_:2},1032,["to","onMouseenter","onClick"])),[[w(ae),{target:".card-image img",scale:1.1,speed:600,max:10}]])),128))]),n[2]||(n[2]=e("div",{class:"widget-cta cta-indigo",style:{cursor:"default"}}," Your History ",-1))]),e("div",at,[n[4]||(n[4]=e("div",{class:"widget-header"},[e("div",{class:"header-icon"},[e("i",{class:"fas fa-bookmark"})]),e("div",{class:"header-text"},[e("h3",null,"My Saves"),e("p",null,"Your Favorites")])],-1)),e("div",lt,[S.value.length===0?(u(),g("div",nt," Nothing### Video Widget Unification - Verified that Videos now appear square (1:1), matching the Podcasts and Music sections. - Verified that the grid items align perfectly across different widgets. ### Backend API Test ")):(u(!0),g(D,{key:1},P(S.value,a=>W((u(),se(T,{key:a.id||a.slug,to:a.type==="artist"?`/artists/${a.slug}`:`/${a.type==="show"?"shows":"music"}/${a.id}`,class:"widget-card",onMouseenter:w(Z),onClick:w(p)},{default:A(()=>[e("div",it,[e("img",{src:a.cover_art||"/static/img/default-cover.jpg",alt:a.title,loading:"lazy"},null,8,ot)]),e("div",rt,f(a.title||a.name),1)]),_:2},1032,["to","onMouseenter","onClick"])),[[w(ae),{target:".card-image img",scale:1.1,speed:600,max:10}]])),128))]),G(T,{to:"/profile",class:"widget-cta cta-gold",onClick:w(p)},{default:A(()=>[...n[3]||(n[3]=[X(" View All Saves ",-1)])]),_:1},8,["onClick"])]),e("div",ct,[n[7]||(n[7]=e("div",{class:"widget-header"},[e("div",{class:"header-icon"},[e("i",{class:"fas fa-video"})]),e("div",{class:"header-text"},[e("h3",null,"Videos"),e("p",null,"Watch latest content")])],-1)),e("div",dt,[(u(!0),g(D,null,P(b.value,a=>W((u(),se(T,{key:a.id,to:`/videos?play=${a.id}`,class:"widget-card video-card",onMouseenter:w(Z),onClick:w(p)},{default:A(()=>[e("div",ut,[e("img",{src:a.thumbnail||"/static/img/default-cover.jpg",alt:a.title,loading:"lazy"},null,8,vt),n[5]||(n[5]=e("div",{class:"play-icon"},[e("i",{class:"fas fa-play"})],-1))]),e("div",ht,f(a.title),1)]),_:2},1032,["to","onMouseenter","onClick"])),[[w(ae),{target:".card-image img",scale:1.1,speed:600,max:10}]])),128))]),G(T,{to:"/videos",class:"widget-cta cta-red",onClick:w(p)},{default:A(()=>[...n[6]||(n[6]=[X(" Watch Now ",-1)])]),_:1},8,["onClick"])]),e("div",pt,[n[9]||(n[9]=e("div",{class:"widget-header"},[e("div",{class:"header-icon"},[e("i",{class:"fas fa-podcast"})]),e("div",{class:"header-text"},[e("h3",null,"Podcasts"),e("p",null,"Fresh episodes & shows")])],-1)),e("div",mt,[(u(!0),g(D,null,P(i.value,a=>W((u(),se(T,{key:a.slug,to:`/podcasts/${a.slug}`,class:"widget-card",onMouseenter:w(Z),onClick:w(p)},{default:A(()=>[e("div",ft,[e("img",{src:a.artwork||"/static/img/default-cover.jpg",alt:a.title,loading:"lazy"},null,8,gt)]),e("div",wt,f(a.title),1)]),_:2},1032,["to","onMouseenter","onClick"])),[[w(ae),{target:".card-image img",scale:1.1,speed:600,max:10}]])),128))]),G(T,{to:"/podcasts",class:"widget-cta cta-purple",onClick:w(p)},{default:A(()=>[...n[8]||(n[8]=[X(" Explore Podcasts ",-1)])]),_:1},8,["onClick"])]),e("div",yt,[n[11]||(n[11]=e("div",{class:"widget-header"},[e("div",{class:"header-icon"},[e("i",{class:"fas fa-music"})]),e("div",{class:"header-text"},[e("h3",null,"Music"),e("p",null,"Albums & Singles")])],-1)),e("div",kt,[(u(!0),g(D,null,P(O.value,a=>W((u(),se(T,{key:a.id||a.title,to:a.type==="album"?{path:"/music",query:{q:a.title}}:`/music/${a.id}`,class:"widget-card",onMouseenter:w(Z),onClick:w(p)},{default:A(()=>[e("div",_t,[e("img",{src:a.cover_art||"/static/img/default-cover.jpg",alt:a.title,loading:"lazy"},null,8,bt)]),e("div",Ct,f(a.title),1)]),_:2},1032,["to","onMouseenter","onClick"])),[[w(ae),{target:".card-image img",scale:1.1,speed:600,max:10}]])),128))]),G(T,{to:"/music",class:"widget-cta cta-blue",onClick:w(p)},{default:A(()=>[...n[10]||(n[10]=[X(" Music Library ",-1)])]),_:1},8,["onClick"])]),e("div",xt,[n[13]||(n[13]=e("div",{class:"widget-header"},[e("div",{class:"header-icon"},[e("i",{class:"fas fa-users"})]),e("div",{class:"header-text"},[e("h3",null,"Artists"),e("p",null,"Meet the creators")])],-1)),e("div",$t,[(u(!0),g(D,null,P(j.value,a=>W((u(),se(T,{key:a.slug,to:`/artists/${a.slug}`,class:"widget-card",onMouseenter:w(Z),onClick:w(p)},{default:A(()=>[e("div",Mt,[e("img",{src:a.image||"/static/img/default-avatar.png",alt:a.name,loading:"lazy"},null,8,Tt)]),e("div",St,f(a.name),1)]),_:2},1032,["to","onMouseenter","onClick"])),[[w(ae),{target:".card-image img",scale:1.1,speed:600,max:10}]])),128))]),G(T,{to:"/artists",class:"widget-cta cta-green",onClick:w(p)},{default:A(()=>[...n[12]||(n[12]=[X(" Discover Artists ",-1)])]),_:1},8,["onClick"])])]))}}},Nt=De(Vt,[["__scopeId","data-v-7b049452"]]),Lt={class:"home-page"},At={class:"podcasts-hero"},Zt={key:0,class:"search-results-container"},Rt={class:"search-results-header"},Yt={class:"results-count"},jt={class:"search-actions"},It=["title"],Et={class:"search-results-list"},Dt=["href","onClick"],Pt={class:"result-image"},Wt=["src","alt"],qt={class:"result-type-badge"},Ot={class:"result-info"},zt={class:"result-title"},Bt={class:"result-subtitle"},Ft={class:"live-dashboard"},Qt={class:"dashboard-grid"},Gt={class:"dash-preview"},Xt=["src"],Jt={class:"dash-overlay"},Ut={class:"dash-badges"},Ht={class:"channel-badge"},Kt={key:0,class:"channel-nav"},es={class:"dash-content"},ts={class:"dash-actions"},ss={class:"dashboard-sidebar"},as={class:"dash-thumb"},ls=["src"],ns={class:"dash-info"},is={class:"radio-next-list"},os={class:"track-title"},rs={class:"track-artist"},cs={key:0,class:"tv-channel-strip"},ds={class:"tv-channel-strip-list"},us=["onClick"],vs={class:"tv-channel-strip-meta"},hs={class:"tv-channel-strip-name"},ps={class:"tv-channel-strip-now"},ms={key:0,class:"tv-channel-strip-next"},fs={class:"whats-new-section"},gs={class:"whats-new-container"},ws={class:"whats-new-header"},ys={key:0,href:"/whats-new",class:"view-all-link"},ks={class:"whats-new-loading"},_s={class:"whats-new-updates"},bs=["href"],Cs={class:"whats-new-content"},xs={class:"whats-new-date"},$s={class:"whats-new-empty"},Ss={__name:"HomeView",setup(c){const m=Be(),i=We(),b=["https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExeGlreWRqaHZxc295NHNvZWs4MWJoeTIwdXk1NnNuN2syOTE4Z3JleSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/14hS1ZEmSfKdTW/giphy.gif","https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExdnI2M2VxZmhkeTM1bHVoZmV0NmdmYzVjeWt3eHc1eGZtOWk4N3c0YyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/AS9LIFttYzkc0/giphy.gif","https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExYjB3cjhjNXEwMXhrcTFvYnF4Zm5xamduNm8ycjB4ZnJneDhyb2IzNiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/wSYE7n6pk9dqRXzitR/giphy.gif","https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExMWVkeG1sY3hvYTlwMjl0bWZrbTI3bXlqOGQ2cmYyZXVmZ2RuZWIwcCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/xWC0BCZtkDxE869erD/giphy.gif","https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExdjJ4Mml1ajMzNGh1ODVrN3J3cnVtbjZkeXZnN29wNmQ2aHhncTJ0OCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/l1J9BYe5eZccC4Nck/giphy.gif","https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExOWZnNnhxbjgzM3B1NXdzOWJwZjJnM3hveTJwNnE1bjZrb3ZicXU3bSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/3oGRFs7yHPDlB8JYsg/giphy.gif"],O=h(""),j=h(!1),S=h(50),I=h(50);function le(s){if(!j.value)return;const t=s.currentTarget.getBoundingClientRect(),r=s.clientX-t.left,o=s.clientY-t.top,$=r/t.width*100,d=o/t.height*100;S.value=40+$/100*20,I.value=40+d/100*20}function Z(){j.value=!1,S.value=50,I.value=50}const p=h(""),C=h([]),N=h(!1),E=h(!1),y=h(null);let n={tracks:[],albums:[],shows:[],podcasts:[],artists:[]};const T=Se(()=>N.value?C.value:C.value.slice(0,6));async function a(){try{const[s,t,r,o]=await Promise.all([Y("/api/music").catch(()=>({tracks:[],albums:[]})),Y("/api/shows").catch(()=>({shows:[]})),Y("/api/podcasts").catch(()=>({shows:[]})),Y("/api/artists").catch(()=>({artists:[]}))]);n.tracks=(s.tracks||[]).map(d=>({...d,type:"track"}));const $=new Map;for(const d of s.tracks||[])d.album&&d.album!=="Single"&&!$.has(d.album)&&$.set(d.album,{id:d.album,title:d.album,name:d.album,artist:d.artist,cover_art:d.cover_art||d.artwork,type:"album"});n.albums=Array.from($.values()),n.shows=(t.shows||[]).map(d=>({...d,type:"video"})),n.podcasts=(r.shows||[]).map(d=>({...d,type:"podcast"})),n.artists=(o.artists||[]).map(d=>({...d,type:"artist"}))}catch(s){console.error("Error loading searchable data",s)}}function ce(s){var o,$,d,M,R,ie,oe,re,l,F,ke,Me;if(!s||s.trim().length<2){C.value=[],E.value=!1;return}E.value=!0;const t=s.toLowerCase().trim(),r=[];for(const _ of n.tracks)((o=_.title)!=null&&o.toLowerCase().includes(t)||($=_.artist)!=null&&$.toLowerCase().includes(t)||(d=_.album)!=null&&d.toLowerCase().includes(t))&&r.push(_);for(const _ of n.albums)((M=_.title)!=null&&M.toLowerCase().includes(t)||(R=_.artist)!=null&&R.toLowerCase().includes(t))&&r.push(_);for(const _ of n.shows)((ie=_.title)!=null&&ie.toLowerCase().includes(t)||(oe=_.artist)!=null&&oe.toLowerCase().includes(t)||(re=_.host)!=null&&re.toLowerCase().includes(t))&&r.push(_);for(const _ of n.podcasts)((l=_.title)!=null&&l.toLowerCase().includes(t)||(F=_.host)!=null&&F.toLowerCase().includes(t)||(ke=_.description)!=null&&ke.toLowerCase().includes(t))&&r.push(_);for(const _ of n.artists)(Me=_.name)!=null&&Me.toLowerCase().includes(t)&&r.push(_);C.value=r.slice(0,50)}function ne(){y.value&&clearTimeout(y.value),y.value=setTimeout(()=>{ce(p.value)},300)}function de(){p.value.trim()&&m.push({path:"/search",query:{q:p.value}})}function V(){p.value="",C.value=[],N.value=!1,E.value=!1}function ve(){p.value.trim()&&(m.push({path:"/search",query:{q:p.value}}),V())}function v(){if(p.value.trim())try{const s=JSON.parse(localStorage.getItem("ahoy.savedSearches")||"[]"),t={query:p.value,timestamp:new Date().toISOString(),resultsCount:C.value.length};s.find(o=>o.query===p.value)||(s.unshift(t),localStorage.setItem("ahoy.savedSearches",JSON.stringify(s.slice(0,20))),alert(`Search saved: "${p.value}"`))}catch(s){console.error("Failed to save search",s)}}function J(s){switch(s.type){case"track":return`/music/${s.id}`;case"album":return`/music?q=${encodeURIComponent(s.title)}`;case"video":return`/videos?play=${s.id}`;case"podcast":return`/podcasts/${s.slug||s.id}`;case"artist":return`/artists/${s.slug||s.id}`;default:return"#"}}function he(s){m.push(J(s)),V()}const L=h([]),x=h(0),k=h(null),z=h(null),ue=h({}),pe=h({});let me=null;const Ze={misc:"Channel 01 — Misc",films:"Channel 02 — Short Films","music-videos":"Channel 03 — Music Videos","live-shows":"Channel 04 — Live Shows"};function Ce(s,t){return Ze[s.id]||`Channel ${String(t+1).padStart(2,"0")} — ${s.name||"Unknown"}`}function xe(){var o,$;const s=new Date().getHours(),t={},r={};for(let d=0;d<L.value.length;d++){const M=L.value[d];if((o=M==null?void 0:M.items)!=null&&o.length){const R=s%M.items.length;t[M.id]=M.items[R],r[M.id]=M.items.length>R+1?M.items[R+1]:M.items[0]}}if(ue.value=t,pe.value=r,($=z.value)!=null&&$.id){const d=z.value.id;t[d]&&(k.value=t[d])}}function fe(s){var r;if(!L.value.length)return;x.value=(s+L.value.length)%L.value.length;const t=L.value[x.value];z.value={...t,name:Ce(t,x.value)},ue.value[t.id]?k.value=ue.value[t.id]:(r=t.items)!=null&&r.length?k.value=t.items[0]:k.value={id:"placeholder",title:"No content available",thumbnail:"/static/img/default-cover.jpg",host:t.name}}function $e(s){L.value.length&&fe(x.value+(s==="next"?1:-1))}function ge(s){!(s!=null&&s.id)||s.id==="placeholder"||s.id==="error"||m.push({path:"/videos",query:{play:s.id}})}const U=h([]),we=h([]),ee=h([]),q=h(null),ye=Se(()=>{if(!q.value||!i.currentTrack)return!1;const s=String(q.value.id??""),t=String(i.currentTrack.id??"");return s===t&&i.isPlaying});function Re(){const s=[...U.value];s.sort(()=>.5-Math.random()),we.value=s.map(t=>({...t,type:"track"})),ee.value=we.value.slice(0,20)}function Ye(){if(ye.value){i.pause();return}if(q.value){i.resume();return}const s=we.value[0]||ee.value[0];s&&(q.value=s,i.setQueue(U.value,U.value.findIndex(t=>t.id===s.id)))}const B=h([]),te=h(!0);function je(s){if(!s)return"";try{return new Date(s).toLocaleDateString(void 0,{year:"numeric",month:"short"})}catch{return s}}function Ie(s){if(s.year&&s.month&&s.section){const t=`/whats-new/${s.year}/${s.month}/${s.section}`;return s.slug?`${t}#update-${s.slug}`:t}return s.link?s.link:"/whats-new"}function Ee(s){var r;const t=(s==null?void 0:s.channels)??((r=s==null?void 0:s.data)==null?void 0:r.channels)??[];return Array.isArray(t)?t.map(o=>({...o,id:(o==null?void 0:o.id)??"misc",name:(o==null?void 0:o.name)??"Channel",items:Array.isArray(o==null?void 0:o.items)?o.items:[]})):[]}return Ve(async()=>{O.value=b[Math.floor(Math.random()*b.length)],a();try{let s=null;try{s=await(await fetch("/api/live-tv/channels?_="+Date.now())).json()}catch{s=await Y("/api/live-tv/channels").catch(()=>null)}const t=s?Ee(s):[];if(L.value=t,t.length){const r=t.find(o=>o.id==="misc")||t[0];x.value=t.findIndex(o=>o.id===r.id),xe(),fe(x.value)}else k.value={id:"placeholder",title:"Loading Live TV...",thumbnail:"/static/img/default-cover.jpg",host:"Ahoy TV"},z.value={id:"misc",name:"Channel 01 — Misc"};me=setInterval(xe,60*1e3)}catch{k.value={id:"error",title:"Live TV",thumbnail:"/static/img/default-cover.jpg",host:"Ahoy TV"},z.value={id:"misc",name:"Channel 01 — Misc"}}try{const t=((await Y("/api/music").catch(()=>({tracks:[]}))).tracks||[]).filter(o=>o.audio_url||o.preview_url),r=new Set;U.value=t.filter(o=>r.has(o.id)?!1:(r.add(o.id),!0)),Re()}catch{}i.currentTrack&&U.value.length&&U.value.some(t=>{var r;return String(t.id)===String((r=i.currentTrack)==null?void 0:r.id)})&&(q.value=i.currentTrack),te.value=!0;try{const t=(await Y("/api/whats-new").catch(()=>({updates:[]}))).updates;if(Array.isArray(t))B.value=t.slice(0,4);else if(t&&typeof t=="object"){const r=[];for(const o of Object.keys(t).sort().reverse())for(const $ of Object.keys(t[o]||{}).sort().reverse())for(const d of Object.keys(t[o][$]||{})){const M=(t[o][$][d].items||[]).map(R=>({...R,year:o,month:$,section:d}));r.push(...M)}B.value=r.slice(0,4)}else B.value=[]}catch{B.value=[]}finally{te.value=!1}}),Ne(()=>{me&&clearInterval(me)}),qe(()=>i.currentTrack,s=>{if(!s)return;U.value.some(r=>String(r.id)===String(s.id))&&(q.value=s)},{deep:!0}),(s,t)=>{var o,$,d,M,R,ie,oe,re;const r=Le("router-link");return u(),g("div",Lt,[e("section",At,[e("div",{class:"podcasts-hero-inner",style:Oe({backgroundImage:`url(${O.value})`,backgroundPosition:`${S.value}% ${I.value}%`}),onMouseenter:t[2]||(t[2]=l=>j.value=!0),onMouseleave:Z,onMousemove:le},[G(r,{to:"/about",class:"hero-logo-container"},{default:A(()=>[...t[9]||(t[9]=[e("img",{src:Fe,alt:"Ahoy Logo",class:"hero-logo"},null,-1)])]),_:1}),e("div",{class:H(["hero-search-wrapper",{"has-results":E.value&&C.value.length>0,expanded:N.value}])},[W(e("input",{type:"text",class:"hero-search-input",placeholder:"Search artists, tracks, or shows...","onUpdate:modelValue":t[0]||(t[0]=l=>p.value=l),onInput:ne,onKeydown:Te(de,["enter"])},null,544),[[ze,p.value]]),E.value&&C.value.length>0?(u(),g("div",Zt,[e("div",Rt,[e("span",Yt,f(C.value.length)+" "+f(C.value.length===1?"result":"results"),1),e("div",jt,[e("button",{type:"button",class:H(["search-action-btn",{active:N.value}]),onClick:t[1]||(t[1]=l=>N.value=!N.value),title:N.value?"Collapse":"Expand"},[e("i",{class:H(N.value?"fas fa-compress-alt":"fas fa-expand-alt")},null,2)],10,It),e("button",{type:"button",class:"search-action-btn",onClick:ve,title:"Open in Search Page"},[...t[10]||(t[10]=[e("i",{class:"fas fa-external-link-alt"},null,-1)])]),e("button",{type:"button",class:"search-action-btn",onClick:v,title:"Save Search"},[...t[11]||(t[11]=[e("i",{class:"fas fa-bookmark"},null,-1)])]),e("button",{type:"button",class:"search-action-btn close-btn",onClick:V,title:"Clear"},[...t[12]||(t[12]=[e("i",{class:"fas fa-times"},null,-1)])])])]),e("div",Et,[(u(!0),g(D,null,P(T.value,l=>(u(),g("a",{key:l.id,href:J(l),class:"search-result-item",onClick:Q(F=>he(l),["prevent"])},[e("div",Pt,[e("img",{src:l.image||l.cover_art||l.artwork||l.thumbnail||"/static/img/default-cover.jpg",alt:l.title||l.name,loading:"lazy"},null,8,Wt),e("div",qt,f(l.type),1)]),e("div",Ot,[e("div",zt,f(l.title||l.name),1),e("div",Bt,f(l.artist||l.host||l.description||""),1)]),t[13]||(t[13]=e("div",{class:"result-arrow"},[e("i",{class:"fas fa-chevron-right"})],-1))],8,Dt))),128))])])):K("",!0)],2)],36)]),e("section",Ft,[e("div",Qt,[e("div",{class:"dashboard-main",role:"button",tabindex:"0",onClick:t[7]||(t[7]=l=>k.value&&k.value.id!=="placeholder"&&k.value.id!=="error"?ge(k.value):null),onKeydown:t[8]||(t[8]=Te(Q(l=>k.value&&k.value.id!=="placeholder"&&k.value.id!=="error"?ge(k.value):null,["prevent"]),["enter"]))},[e("div",Gt,[e("img",{src:((o=k.value)==null?void 0:o.thumbnail)||"/static/img/default-cover.jpg",alt:"Live TV",class:"dash-bg"},null,8,Xt),e("div",Jt,[e("div",Ut,[t[14]||(t[14]=e("span",{class:"live-badge"},"LIVE TV",-1)),e("span",Ht,f((($=z.value)==null?void 0:$.name)||"Channel 01 — Misc"),1)]),L.value.length>1?(u(),g("div",Kt,[e("button",{type:"button",class:"channel-nav-btn","aria-label":"Previous channel",onClick:t[3]||(t[3]=Q(l=>$e("prev"),["stop"]))},[...t[15]||(t[15]=[e("i",{class:"fas fa-chevron-left"},null,-1)])]),e("button",{type:"button",class:"channel-nav-btn","aria-label":"Next channel",onClick:t[4]||(t[4]=Q(l=>$e("next"),["stop"]))},[...t[16]||(t[16]=[e("i",{class:"fas fa-chevron-right"},null,-1)])])])):K("",!0),e("div",es,[e("h2",null,f(((d=k.value)==null?void 0:d.title)||"Loading..."),1),e("p",null,f(((M=k.value)==null?void 0:M.artist)||((R=k.value)==null?void 0:R.host)||""),1),e("div",ts,[k.value&&k.value.id!=="placeholder"&&k.value.id!=="error"?(u(),g("button",{key:0,type:"button",class:"dash-play-btn",onClick:t[5]||(t[5]=Q(l=>ge(k.value),["stop"]))},[...t[17]||(t[17]=[e("i",{class:"fas fa-play"},null,-1),X(" Watch Now ",-1)])])):K("",!0),G(r,{to:"/live-tv",class:"dash-guide-btn",onClick:t[6]||(t[6]=Q(()=>{},["stop"]))},{default:A(()=>[...t[18]||(t[18]=[e("i",{class:"fas fa-tv"},null,-1),X(" View All Channels ",-1)])]),_:1})])])])])],32),e("div",ss,[t[22]||(t[22]=e("div",{class:"sidebar-header"},[e("h3",null,"Live Radio")],-1)),e("div",{class:H(["dash-item radio-item",{active:ye.value}])},[e("div",as,[e("img",{src:((ie=q.value||ee.value[0])==null?void 0:ie.cover_art)||"https://ahoy.ooo/images/Ahoy-Indie-Media-DEFAULT-COVER-A-8.jpg",alt:"Radio"},null,8,ls),t[19]||(t[19]=e("div",{class:"dash-icon"},[e("i",{class:"fas fa-broadcast-tower"})],-1))]),e("div",ns,[t[20]||(t[20]=e("div",{class:"dash-label"},"On Air Now",-1)),e("h4",null,f(((oe=q.value||ee.value[0])==null?void 0:oe.title)||"Loading..."),1),e("p",null,f(((re=q.value||ee.value[0])==null?void 0:re.artist)||""),1)]),e("button",{type:"button",class:"dash-action-btn","aria-label":"Play/Pause radio",onClick:Q(Ye,["stop"])},[e("i",{class:H(ye.value?"fas fa-pause":"fas fa-play")},null,2)])],2),e("div",is,[t[21]||(t[21]=e("div",{class:"list-label"},"Up Next",-1)),(u(!0),g(D,null,P(ee.value.slice(0,3),l=>(u(),g("div",{key:l.id,class:"mini-track"},[e("span",os,f(l.title),1),e("span",rs,f(l.artist),1)]))),128))])])]),L.value.length>1?(u(),g("div",cs,[t[24]||(t[24]=e("div",{class:"tv-channel-strip-header"},[e("div",{class:"tv-channel-strip-title"},"Live TV Channels"),e("div",{class:"tv-channel-strip-subtitle"},"Tap a channel to switch")],-1)),e("div",ds,[(u(!0),g(D,null,P(L.value,(l,F)=>(u(),g("button",{key:l.id,type:"button",class:H(["tv-channel-strip-item",{active:z.value&&z.value.id===l.id}]),onClick:Q(ke=>fe(F),["stop"])},[e("div",vs,[e("span",hs,f(Ce(l,F)),1),t[23]||(t[23]=e("span",{class:"tv-channel-strip-live"},"LIVE",-1))]),e("div",ps,f((ue.value[l.id]||{}).title||"No content available"),1),pe.value[l.id]?(u(),g("div",ms," Up next: "+f((pe.value[l.id]||{}).title||""),1)):K("",!0)],10,us))),128))])])):K("",!0)]),G(Nt),e("section",fs,[e("div",gs,[e("div",ws,[t[26]||(t[26]=e("h2",null,"What's New at Ahoy",-1)),!te.value&&B.value.length>0?(u(),g("a",ys,[...t[25]||(t[25]=[X(" View All ",-1),e("i",{class:"fas fa-arrow-right"},null,-1)])])):K("",!0)]),W(e("div",ks,[...t[27]||(t[27]=[e("span",null,"Loading updates...",-1)])],512),[[_e,te.value]]),W(e("div",_s,[(u(!0),g(D,null,P(B.value,(l,F)=>(u(),g("a",{key:l.id||l.title||F,href:Ie(l),class:H(["whats-new-item clickable","type-"+(l.type||"update")])},[e("div",Cs,[e("h3",null,f(l.title),1),e("p",null,f(l.description),1),e("span",xs,f(je(l.date,l.type)),1)]),t[28]||(t[28]=e("div",{class:"whats-new-arrow"},[e("i",{class:"fas fa-chevron-right"})],-1))],10,bs))),128))],512),[[_e,!te.value&&B.value.length>0]]),W(e("div",$s,[...t[29]||(t[29]=[e("p",null,"No updates available at this time.",-1),e("a",{href:"/whats-new",class:"view-archive-link"},"View Archive",-1)])],512),[[_e,!te.value&&B.value.length===0]])])])])}}};export{Ss as default};
