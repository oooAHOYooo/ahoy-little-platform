{% extends 'base.html' %}

{% block title %}Downloads ‚Äî Ahoy Indie Media{% endblock %}

{% block content %}
{% from "macros/subpage_header.html" import subpage_hero %}
{{ subpage_hero(title="Downloads", subtitle="Get Ahoy Indie Media as a standalone desktop app.", icon_class="fas fa-download") }}

<section class="downloads-page-container" style="max-width:960px;margin:2rem auto;padding:1rem;">
    <div class="downloads-intro" style="margin-bottom:2rem;">
        <p style="color:rgba(255,255,255,0.7);font-size:1rem;line-height:1.6;">Get Ahoy Indie Media as a standalone desktop application. Download the DMG (installer) or ZIP below, or from <a href="https://github.com/oooAHOYooo/ahoy-little-platform/releases" style="color:rgba(99,102,241,1);text-decoration:none;">GitHub Releases</a>.</p>
        <p style="color:rgba(255,255,255,0.6);font-size:0.9rem;margin-top:0.75rem;"><strong>macOS:</strong> DMG ‚Äî open and drag the app to Applications. ZIP ‚Äî unzip and move ‚ÄúAhoy Indie Media.app‚Äù to Applications.</p>
    </div>

    <div class="downloads-section" style="margin-top:2rem;">
        <h2 style="color:#fff;font-size:1.5rem;font-weight:700;margin-bottom:1.5rem;">Desktop Applications</h2>
        {% set assets = release_assets or files or [] %}
        {% set assets_macos = assets | selectattr('platform', 'equalto', 'macOS') | list %}
        {% set assets_windows = assets | selectattr('platform', 'equalto', 'Windows') | list %}
        {% set assets_linux = assets | selectattr('platform', 'equalto', 'Linux') | list %}
        <div class="download-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;margin-top:1rem;">
            <!-- Windows -->
            <div class="download-item" style="background:rgba(20,20,20,0.6);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,0.1);border-radius:16px;padding:2rem;text-align:center;position:relative;transition:all 0.2s;">
                <div class="platform-name" style="font-weight:600;margin-bottom:0.5rem;font-size:1.25rem;color:#fff;">Windows</div>
                <div class="file-type" style="font-size:0.9rem;color:rgba(255,255,255,0.6);margin-bottom:1.5rem;">Setup Installer</div>
                {% if assets_windows %}
                {% for f in assets_windows %}
                <a href="{{ f.download_url or f.url }}" class="download-btn" style="display:inline-block;margin:0.35rem 0;background:rgba(99,102,241,0.9);color:#fff;padding:0.5rem 1.25rem;border-radius:8px;font-size:0.9rem;font-weight:500;text-decoration:none;border:1px solid rgba(99,102,241,0.5);" download>{{ f.description }} ({{ f.size_label }})</a>
                {% endfor %}
                {% else %}
                <div class="coming-soon-badge" style="display:inline-block;background:rgba(99,102,241,0.2);color:rgba(99,102,241,1);padding:0.5rem 1.25rem;border-radius:8px;font-size:0.9rem;font-weight:500;border:1px solid rgba(99,102,241,0.3);">Coming Soon</div>
                {% endif %}
            </div>

            <!-- macOS -->
            <div class="download-item" style="background:rgba(20,20,20,0.6);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,0.1);border-radius:16px;padding:2rem;text-align:center;position:relative;transition:all 0.2s;">
                <div class="platform-name" style="font-weight:600;margin-bottom:0.5rem;font-size:1.25rem;color:#fff;">macOS</div>
                <div class="file-type" style="font-size:0.9rem;color:rgba(255,255,255,0.6);margin-bottom:1.5rem;">DMG Installer</div>
                {% if assets_macos %}
                {% for f in assets_macos %}
                <a href="{{ f.download_url or f.url }}" class="download-btn" style="display:inline-block;margin:0.35rem 0;background:rgba(99,102,241,0.9);color:#fff;padding:0.5rem 1.25rem;border-radius:8px;font-size:0.9rem;font-weight:500;text-decoration:none;border:1px solid rgba(99,102,241,0.5);" download>{{ f.description }} ({{ f.size_label }})</a>
                {% endfor %}
                {% else %}
                <div class="coming-soon-badge" style="display:inline-block;background:rgba(99,102,241,0.2);color:rgba(99,102,241,1);padding:0.5rem 1.25rem;border-radius:8px;font-size:0.9rem;font-weight:500;border:1px solid rgba(99,102,241,0.3);">Coming Soon</div>
                {% endif %}
            </div>

            <!-- Linux -->
            <div class="download-item" style="background:rgba(20,20,20,0.6);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,0.1);border-radius:16px;padding:2rem;text-align:center;position:relative;transition:all 0.2s;">
                <div class="platform-name" style="font-weight:600;margin-bottom:0.5rem;font-size:1.25rem;color:#fff;">Linux</div>
                <div class="file-type" style="font-size:0.9rem;color:rgba(255,255,255,0.6);margin-bottom:1.5rem;">AppImage / DEB / RPM</div>
                {% if assets_linux %}
                {% for f in assets_linux %}
                <a href="{{ f.download_url or f.url }}" class="download-btn" style="display:inline-block;margin:0.35rem 0;background:rgba(99,102,241,0.9);color:#fff;padding:0.5rem 1.25rem;border-radius:8px;font-size:0.9rem;font-weight:500;text-decoration:none;border:1px solid rgba(99,102,241,0.5);" download>{{ f.description }} ({{ f.size_label }})</a>
                {% endfor %}
                {% else %}
                <div class="coming-soon-badge" style="display:inline-block;background:rgba(99,102,241,0.2);color:rgba(99,102,241,1);padding:0.5rem 1.25rem;border-radius:8px;font-size:0.9rem;font-weight:500;border:1px solid rgba(99,102,241,0.3);">Coming Soon</div>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="mobile-improvements-link" style="margin-top:3rem;padding:2rem;background:rgba(20,20,20,0.6);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-radius:16px;border:1px solid rgba(255,255,255,0.1);">
        <h2 style="margin-top:0;color:#fff;font-size:1.5rem;font-weight:700;margin-bottom:1rem;">üì± Mobile App Improvements</h2>
        <p style="color:rgba(255,255,255,0.7);margin-bottom:1.5rem;line-height:1.6;">As part of our ongoing mobile improvements initiative, we're working on bringing you native desktop applications. These will provide a better experience with offline capabilities, improved performance, and platform-specific features.</p>
        <a href="/whats-new/2026/jan/platform" style="display:inline-flex;align-items:center;gap:0.5rem;color:rgba(99,102,241,1);text-decoration:none;font-weight:500;transition:gap 0.2s;">
            Learn More About Mobile Improvements <i class="fas fa-arrow-right"></i>
        </a>
    </div>

    <div class="whats-new-info" style="margin-top:2rem;padding:1.5rem;background:rgba(20,20,20,0.6);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-radius:12px;border:1px solid rgba(255,255,255,0.1);border-left:4px solid rgba(99,102,241,0.5);">
        <h3 style="margin-top:0;font-size:1.1rem;color:#fff;margin-bottom:0.75rem;">üì¶ What's Coming?</h3>
        <p style="margin-bottom:0.75rem;font-size:0.95rem;color:rgba(255,255,255,0.7);">The desktop app will be the <strong style="color:#fff;">primary distribution method</strong>. Key improvements coming:</p>
        <ul style="margin:0.5rem 0;padding-left:1.5rem;font-size:0.9rem;color:rgba(255,255,255,0.7);line-height:1.8;">
            <li><strong style="color:#fff;">macOS:</strong> DMG installer with drag-and-drop installation</li>
            <li><strong style="color:#fff;">Windows:</strong> Professional NSIS installer with Start Menu shortcuts</li>
            <li><strong style="color:#fff;">Standalone:</strong> No Python installation required</li>
            <li><strong style="color:#fff;">Local Database:</strong> Uses SQLite stored in user directory</li>
            <li><strong style="color:#fff;">Auto Port Detection:</strong> Automatically finds free ports</li>
        </ul>
    </div>
</section>

<style>
.download-item:hover {
    background:rgba(30,30,30,0.8) !important;
    border-color:rgba(255,255,255,0.15) !important;
    transform:translateY(-2px);
    box-shadow:0 4px 16px rgba(0,0,0,0.3);
}
.download-btn:hover {
    background:rgba(99,102,241,1) !important;
    color:#fff;
}

.mobile-improvements-link a:hover {
    gap:0.75rem;
    color:rgba(99,102,241,0.8);
}

@media (max-width: 768px) {
    .download-grid {
        grid-template-columns:1fr !important;
    }
}
</style>
{% endblock %}
