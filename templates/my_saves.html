{% extends "base.html" %}

{% block title %}My Saves - Ahoy Indie Media{% endblock %}

{% block content %}
<div class="my-saves-container" x-data="mySavesLibrary()"
    x-init="loadUserData()">
    <!-- Xbox/Skate 4 Style Profile Header -->
    <div class="profile-hero">
        <div class="profile-background"></div>
        <div class="profile-content">
            <div class="profile-avatar-section">
                <div class="profile-avatar-large"
                    @click="showAvatarCustomizer = true">
                    <img
                        :src="userProfile.avatar || '/static/img/default-avatar.png'"
                        :alt="userProfile.display_name || 'User'"
                        class="avatar-image">
                    <div class="avatar-edit-overlay">
                        <i class="fas fa-camera"></i>
                    </div>
                </div>
                <button @click="showAvatarCustomizer = true"
                    class="avatar-edit-btn">
                    <i class="fas fa-edit"></i> Customize
                </button>
            </div>
            <div class="profile-info">
                <h1 class="profile-username"
                    x-text="userProfile.display_name || 'User'"></h1>
                <p class="profile-tagline"
                    x-text="userProfile.bio || 'Music & Show Enthusiast'"></p>
                <div class="profile-stats">
                    <div class="stat-item">
                        <span class="stat-number"
                            x-text="userStats.saved_tracks || 0"></span>
                        <span class="stat-label">Tracks</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number"
                            x-text="userStats.saved_shows || 0"></span>
                        <span class="stat-label">Shows</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number"
                            x-text="userStats.boards || 0"></span>
                        <span class="stat-label">Boards</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <div class="page-header">
        <h1>My Saves</h1>
        <div class="header-actions">
            <button @click="showCreatePlaylist = true" class="btn btn-primary">
                <i class="fas fa-plus"></i> New Playlist
            </button>
        </div>
    </div>

    <!-- Navigation Tabs -->
    <div class="saves-nav">
        <button @click="activeTab = 'saved'"
            :class="{'active': activeTab === 'saved'}"
            class="nav-tab">
            <i class="fas fa-bookmark"></i> Saved Content
        </button>
        <button @click="activeTab = 'boards'"
            :class="{'active': activeTab === 'boards'}"
            class="nav-tab">
            <i class="fas fa-th-large"></i> Boards
        </button>
        <button @click="activeTab = 'liked'"
            :class="{'active': activeTab === 'liked'}"
            class="nav-tab">
            <i class="fas fa-heart"></i> Liked
        </button>
        <button @click="activeTab = 'recent'"
            :class="{'active': activeTab === 'recent'}"
            class="nav-tab">
            <i class="fas fa-clock"></i> Recently Played
        </button>
        <button @click="activeTab = 'boards'"
            :class="{'active': activeTab === 'boards'}"
            class="nav-tab">
            <i class="fas fa-th-large"></i> Boards
        </button>
    </div>

    <!-- Saved Content Tab -->
    <div x-show="activeTab === 'saved'" class="saves-content">
        <div class="content-filters">
            <button @click="savedFilter = 'all'"
                :class="{'active': savedFilter === 'all'}"
                class="filter-btn">All</button>
            <button @click="savedFilter = 'track'"
                :class="{'active': savedFilter === 'track'}"
                class="filter-btn">Tracks</button>
            <button @click="savedFilter = 'show'"
                :class="{'active': savedFilter === 'show'}"
                class="filter-btn">Shows</button>
            <button @click="savedFilter = 'artist'"
                :class="{'active': savedFilter === 'artist'}"
                class="filter-btn">Artists</button>
        </div>

        <div class="saved-grid">
            <template x-for="item in filteredSavedContent" :key="item.id">
                <div class="saved-item" @click="playContent(item)">
                    <div class="item-cover">
                        <img
                            :src="item.cover_art || item.thumbnail || '/static/img/default-cover.jpg'"
                            :alt="item.title || item.name">
                        <div class="item-overlay">
                            <button @click.stop="playContent(item)"
                                class="play-btn">
                                <i class="fas fa-play"></i>
                            </button>
                            <div class="item-actions">
                                <button @click.stop="unsaveContent(item)"
                                    class="action-btn">
                                    <i class="fas fa-bookmark"></i>
                                </button>
                                <button @click.stop="showAddToPlaylist(item)"
                                    class="action-btn">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="item-info">
                        <h3 x-text="item.title || item.name"></h3>
                        <p x-text="item.artist || item.host"></p>
                        <div class="item-meta">
                            <span class="saved-date"
                                x-text="formatDate(item.saved_at)"></span>
                        </div>
                    </div>
                </div>
            </template>
        </div>

        <div x-show="filteredSavedContent.length === 0" class="empty-state">
            <i class="fas fa-bookmark"></i>
            <h3>No saved content</h3>
            <p>Start saving tracks, shows, and artists you love!</p>
        </div>
    </div>

    <!-- Boards Tab -->
    <div x-show="activeTab === 'boards'" class="boards-content">
        <div class="boards-grid">
            <template x-for="board in boards" :key="board.id">
                <div class="board-card" @click="viewBoard(board)">
                    <div class="board-cover">
                        <img
                            :src="board.cover_art || '/static/img/default-board-cover.jpg'"
                            :alt="board.name">
                        <div class="board-overlay">
                            <button @click.stop="playPlaylist(board)"
                                class="play-btn">
                                <i class="fas fa-play"></i>
                            </button>
                            <div class="board-actions">
                                <button @click.stop="editPlaylist(board)"
                                    class="action-btn">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button @click.stop="deletePlaylist(board)"
                                    class="action-btn">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="board-info">
                        <h3 x-text="board.name"></h3>
                        <p
                            x-text="board.description || 'No description'"></p>
                        <div class="board-meta">
                            <span
                                x-text="board.total_items + ' items'"></span>
                            <span
                                x-text="formatDate(board.updated_at)"></span>
                        </div>
                    </div>
                </div>
            </template>
        </div>

        <div x-show="boards.length === 0" class="empty-state">
            <i class="fas fa-list"></i>
            <h3>No boards yet</h3>
            <p>Create your first board to organize your favorite content!</p>
        </div>
    </div>

    <!-- Liked Content Tab -->
    <div x-show="activeTab === 'liked'" class="liked-content">
        <div class="liked-grid">
            <template x-for="item in likedContent"
                :key="item.id + '-' + item.type">
                <div class="liked-item" @click="playContent(item)">
                    <div class="item-cover">
                        <img
                            :src="item.data?.cover_art || item.data?.thumbnail || '/static/img/default-cover.jpg'"
                            :alt="item.data?.title || item.data?.name">
                        <div class="item-overlay">
                            <button @click.stop="playContent(item)"
                                class="play-btn">
                                <i class="fas fa-play"></i>
                            </button>
                            <div class="item-actions">
                                <button @click.stop="unlikeContent(item)"
                                    class="action-btn">
                                    <i class="fas fa-heart"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="item-info">
                        <h3 x-text="item.data?.title || item.data?.name"></h3>
                        <p x-text="item.data?.artist || item.data?.host"></p>
                        <div class="item-meta">
                            <span class="liked-date"
                                x-text="formatDate(item.liked_at)"></span>
                        </div>
                    </div>
                </div>
            </template>
        </div>

        <div x-show="likedContent.length === 0" class="empty-state">
            <i class="fas fa-heart"></i>
            <h3>No liked content</h3>
            <p>Like tracks, shows, and artists to see them here!</p>
        </div>
    </div>

    <!-- Recently Played Tab -->
    <div x-show="activeTab === 'recent'" class="recent-content">
        <div class="recent-list">
            <template x-for="item in recentlyPlayed"
                :key="item.id + '-' + item.type">
                <div class="recent-item" @click="playContent(item)">
                    <div class="item-cover">
                        <img
                            :src="item.data?.cover_art || item.data?.thumbnail || '/static/img/default-cover.jpg'"
                            :alt="item.data?.title || item.data?.name">
                    </div>
                    <div class="item-info">
                        <h3 x-text="item.data?.title || item.data?.name"></h3>
                        <p x-text="item.data?.artist || item.data?.host"></p>
                        <div class="item-meta">
                            <span class="played-date"
                                x-text="formatDate(item.played_at)"></span>
                        </div>
                    </div>
                    <div class="item-actions">
                        <button @click.stop="playContent(item)"
                            class="play-btn-small">
                            <i class="fas fa-play"></i>
                        </button>
                    </div>
                </div>
            </template>
        </div>

        <div x-show="recentlyPlayed.length === 0" class="empty-state">
            <i class="fas fa-clock"></i>
            <h3>No recent activity</h3>
            <p>Start playing content to see your recent activity here!</p>
        </div>
    </div>

    <!-- Boards Tab -->
    <div x-show="activeTab === 'boards'" class="boards-content">
        <div class="boards-header">
            <h2>My Boards</h2>
            <button @click="showCreateBoard = true" class="btn btn-primary">
                <i class="fas fa-plus"></i> New Board
            </button>
        </div>

        <div class="boards-grid">
            <template x-for="board in userBoards" :key="board.id">
                <div class="board-card" @click="viewBoard(board)">
                    <div class="board-cover"
                        :style="`background-color: ${board.color || '#6366f1'}`">
                        <div class="board-overlay">
                            <div class="board-actions">
                                <button @click.stop="editBoard(board)"
                                    class="action-btn" title="Edit board">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button @click.stop="deleteBoard(board)"
                                    class="action-btn" title="Delete board">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="board-icon">
                            <i class="fas fa-th-large"></i>
                        </div>
                        <div class="board-item-count"
                            x-text="`${board.total_items || 0} items`"></div>
                    </div>
                    <div class="board-info">
                        <h3 x-text="board.name"></h3>
                        <p x-text="board.description || 'No description'"></p>
                        <div class="board-meta">
                            <span class="board-date"
                                x-text="formatDate(board.created_at)"></span>
                            <span class="board-visibility"
                                x-text="board.is_public ? 'Public' : 'Private'"></span>
                        </div>
                    </div>
                </div>
            </template>
        </div>

        <div x-show="userBoards.length === 0" class="empty-state">
            <i class="fas fa-th-large"></i>
            <h3>No boards yet</h3>
            <p>Create your first board to organize your favorite content!</p>
            <button @click="showCreateBoard = true" class="btn btn-primary">
                <i class="fas fa-plus"></i> Create Board
            </button>
        </div>
    </div>

    <!-- Create Playlist Modal -->
    <div x-show="showCreatePlaylist" class="modal-overlay"
        @click="showCreatePlaylist = false">
        <div class="modal-content" @click.stop>
            <div class="modal-header">
                <h3>Create New Playlist</h3>
                <button @click="showCreatePlaylist = false" class="close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Playlist Name</label>
                    <input type="text" x-model="newPlaylist.name"
                        placeholder="Enter board name">
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea x-model="newPlaylist.description"
                        placeholder="Enter board description"></textarea>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" x-model="newPlaylist.is_public">
                        Make this board public
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button @click="showCreatePlaylist = false"
                    class="btn btn-outline">Cancel</button>
                <button @click="createPlaylist()" class="btn btn-primary">Create
                    Playlist</button>
            </div>
        </div>
    </div>

    <!-- Add to Playlist Modal -->
    <div x-show="showAddToPlaylistModal" class="modal-overlay"
        @click="showAddToPlaylistModal = false">
        <div class="modal-content" @click.stop>
            <div class="modal-header">
                <h3>Add to Playlist</h3>
                <button @click="showAddToPlaylistModal = false"
                    class="close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="board-list">
                    <template x-for="board in boards" :key="board.id">
                        <div class="board-option"
                            @click="addToPlaylist(board)">
                            <div class="board-info">
                                <h4 x-text="board.name"></h4>
                                <p x-text="board.total_items + ' items'"></p>
                            </div>
                            <button class="add-btn">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </template>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Board Modal -->
    <div x-show="showCreateBoard" class="modal-overlay"
        @click="showCreateBoard = false">
        <div class="modal-content" @click.stop>
            <div class="modal-header">
                <h3>Create New Board</h3>
                <button @click="showCreateBoard = false" class="close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Board Name</label>
                    <input type="text" x-model="newBoard.name"
                        placeholder="Enter board name">
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea x-model="newBoard.description"
                        placeholder="Enter board description"></textarea>
                </div>
                <div class="form-group">
                    <label>Color</label>
                    <div class="color-picker">
                        <button type="button"
                            @click="newBoard.color = '#6366f1'"
                            :class="{'active': newBoard.color === '#6366f1'}"
                            class="color-option"
                            style="background: #6366f1;"></button>
                        <button type="button"
                            @click="newBoard.color = '#ef4444'"
                            :class="{'active': newBoard.color === '#ef4444'}"
                            class="color-option"
                            style="background: #ef4444;"></button>
                        <button type="button"
                            @click="newBoard.color = '#10b981'"
                            :class="{'active': newBoard.color === '#10b981'}"
                            class="color-option"
                            style="background: #10b981;"></button>
                        <button type="button"
                            @click="newBoard.color = '#f59e0b'"
                            :class="{'active': newBoard.color === '#f59e0b'}"
                            class="color-option"
                            style="background: #f59e0b;"></button>
                        <button type="button"
                            @click="newBoard.color = '#8b5cf6'"
                            :class="{'active': newBoard.color === '#8b5cf6'}"
                            class="color-option"
                            style="background: #8b5cf6;"></button>
                        <button type="button"
                            @click="newBoard.color = '#06b6d4'"
                            :class="{'active': newBoard.color === '#06b6d4'}"
                            class="color-option"
                            style="background: #06b6d4;"></button>
                    </div>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" x-model="newBoard.is_public">
                        <span class="checkmark"></span>
                        Make this board public
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button @click="showCreateBoard = false"
                    class="btn btn-outline">Cancel</button>
                <button @click="createBoard()" class="btn btn-primary">Create
                    Board</button>
            </div>
        </div>
    </div>
</div>

<script>
function mySavesLibrary() {
    return {
        // State
        activeTab: 'saved',
        savedFilter: 'all',
        savedContent: [],
        boards: [],
        likedContent: [],
        recentlyPlayed: [],
        showAvatarCustomizer: false,
            selectedAvatar: '/static/img/lego-avatar-red.svg',
        userBoards: [],
        userStats: null,
        showCreatePlaylist: false,
        showCreateBoard: false,
        showAddToPlaylistModal: false,
        newPlaylist: {
            name: '',
            description: '',
            is_public: false
        },
        newBoard: {
            name: '',
            description: '',
            color: '#6366f1',
            is_public: false
        },
        selectedContent: null,
        
        // Computed
        get filteredSavedContent() {
            if (this.savedFilter === 'all') {
                return this.savedContent;
            }
            return this.savedContent.filter(item => item.type === this.savedFilter);
        },
        
        // Initialize
        async loadUserData() {
            try {
                await Promise.all([
                    this.loadSavedContent(),
                    this.loadPlaylists(),
                    this.loadLikedContent(),
                    this.loadRecentlyPlayed(),
                    this.loadUserStats(),
                    this.loadUserBoards()
                ]);
            } catch (error) {
                console.error('Error loading user data:', error);
            }
        },
        
        async loadSavedContent() {
            try {
                const response = await fetch('/api/saves/track');
                const data = await response.json();
                this.savedContent = data.content || [];
            } catch (error) {
                console.error('Error loading saved content:', error);
            }
        },
        
        async loadPlaylists() {
            try {
                const response = await fetch('/api/boards');
                const data = await response.json();
                this.boards = data.boards || [];
            } catch (error) {
                console.error('Error loading boards:', error);
            }
        },
        
        async loadLikedContent() {
            try {
                const response = await fetch('/api/likes');
                const data = await response.json();
                this.likedContent = data.liked_content || [];
            } catch (error) {
                console.error('Error loading liked content:', error);
            }
        },
        
        async loadRecentlyPlayed() {
            try {
                const response = await fetch('/api/recently-played');
                const data = await response.json();
                this.recentlyPlayed = data.recently_played || [];
            } catch (error) {
                console.error('Error loading recently played:', error);
            }
        },
        
        async loadUserStats() {
            try {
                const response = await fetch('/api/user/stats');
                const data = await response.json();
                this.userStats = data.stats;
            } catch (error) {
                console.error('Error loading user stats:', error);
            }
        },
        
        async loadUserBoards() {
            try {
                const response = await fetch('/api/boards');
                const data = await response.json();
                this.userBoards = data.boards || [];
            } catch (error) {
                console.error('Error loading user boards:', error);
            }
        },
        
        // Content actions
        async playContent(item) {
            if (window.globalPlayer) {
                window.globalPlayer.playTrack(item);
            }
        },
        
        async unsaveContent(item) {
            try {
                const response = await fetch('/api/saves/unsave', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        type: item.type || 'track',
                        id: item.id
                    })
                });
                
                if (response.ok) {
                    this.savedContent = this.savedContent.filter(i => i.id !== item.id);
                }
            } catch (error) {
                console.error('Error unsaving content:', error);
            }
        },
        
        async unlikeContent(item) {
            try {
                const response = await fetch('/api/likes/unlike', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        type: item.type,
                        id: item.id
                    })
                });
                
                if (response.ok) {
                    this.likedContent = this.likedContent.filter(i => !(i.id === item.id && i.type === item.type));
                }
            } catch (error) {
                console.error('Error unliking content:', error);
            }
        },
        
        // Playlist actions
        async createPlaylist() {
            try {
                const response = await fetch('/api/boards', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(this.newPlaylist)
                });
                
                if (response.ok) {
                    const data = await response.json();
                    this.boards.push(data.board);
                    this.showCreatePlaylist = false;
                    this.newPlaylist = { name: '', description: '', is_public: false };
                }
            } catch (error) {
                console.error('Error creating board:', error);
            }
        },
        
        async addToPlaylist(board) {
            if (!this.selectedContent) return;
            
            try {
                const response = await fetch(`/api/boards/${board.id}/add`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        type: this.selectedContent.type || 'track',
                        id: this.selectedContent.id,
                        data: this.selectedContent
                    })
                });
                
                if (response.ok) {
                    this.showAddToPlaylistModal = false;
                    this.selectedContent = null;
                }
            } catch (error) {
                console.error('Error adding to board:', error);
            }
        },
        
        showAddToPlaylist(item) {
            this.selectedContent = item;
            this.showAddToPlaylistModal = true;
        },
        
        viewPlaylist(board) {
            // Navigate to board view
            window.location.href = `/board/${board.id}`;
        },
        
        playPlaylist(board) {
            // Play first item in board
            if (board.tracks && board.tracks.length > 0) {
                this.playContent(board.tracks[0]);
            }
        },
        
        editPlaylist(board) {
            // Open edit modal
            console.log('Edit board:', board);
        },
        
        async deletePlaylist(board) {
            if (!confirm('Are you sure you want to delete this board?')) return;
            
            try {
                const response = await fetch(`/api/boards/${board.id}`, {
                    method: 'DELETE'
                });
                
                if (response.ok) {
                    this.boards = this.boards.filter(p => p.id !== board.id);
                }
            } catch (error) {
                console.error('Error deleting board:', error);
            }
        },
        
        // Board actions
        async createBoard() {
            try {
                const response = await fetch('/api/boards', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(this.newBoard)
                });
                
                if (response.ok) {
                    const data = await response.json();
                    this.userBoards.push(data.board);
                    this.showCreateBoard = false;
                    this.newBoard = {
                        name: '',
                        description: '',
                        color: '#6366f1',
                        is_public: false
                    };
                }
            } catch (error) {
                console.error('Error creating board:', error);
            }
        },
        
        viewBoard(board) {
            // Navigate to board view
            window.location.href = `/board/${board.id}`;
        },
        
        editBoard(board) {
            // Navigate to board edit
            window.location.href = `/board/${board.id}/edit`;
        },
        
        async deleteBoard(board) {
            if (confirm(`Are you sure you want to delete "${board.name}"?`)) {
                try {
                    const response = await fetch(`/api/boards/${board.id}`, {
                        method: 'DELETE'
                    });
                    
                    if (response.ok) {
                        this.userBoards = this.userBoards.filter(b => b.id !== board.id);
                    }
                } catch (error) {
                    console.error('Error deleting board:', error);
                }
            }
        },
        
        // Avatar functions
        async saveAvatar() {
            try {
                const response = await fetch('/api/user/profile', {
                    method: 'PUT',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ avatar: this.selectedAvatar })
                });
                
                if (response.ok) {
                    this.userProfile.avatar = this.selectedAvatar;
                    this.showAvatarCustomizer = false;
                    this.showNotification('Avatar updated!', 'success');
                }
            } catch (error) {
                console.error('Error saving avatar:', error);
                this.showNotification('Failed to save avatar', 'error');
            }
        },

        showNotification(message, type = 'info') {
            // Simple notification system
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--primary-color);
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                z-index: 1000;
                animation: slideIn 0.3s ease;
            `;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        },

        // Utility functions
        formatDate(dateString) {
            if (!dateString) return '';
            return new Date(dateString).toLocaleDateString();
        }
    };
}
</script>

<!-- Avatar Customizer Modal -->
<div x-show="showAvatarCustomizer"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    class="modal-overlay"
    @click="showAvatarCustomizer = false">
    <div class="modal-content avatar-modal" @click.stop>
        <div class="modal-header">
            <h3>Customize Avatar</h3>
            <button @click="showAvatarCustomizer = false" class="modal-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="avatar-preview">
                <div class="avatar-preview-large">
                    <img :src="selectedAvatar" alt="Avatar Preview"
                        class="preview-image">
                </div>
            </div>
            <div class="avatar-options">
                <h4>Choose Your Lego Color</h4>
                <div class="avatar-grid">
                    <div class="avatar-option"
                        :class="{'selected': selectedAvatar === '/static/img/lego-avatar-red.svg'}"
                        @click="selectedAvatar = '/static/img/lego-avatar-red.svg'">
                        <img src="/static/img/lego-avatar-red.svg"
                            alt="Red Lego">
                        <span class="color-name">Red</span>
                    </div>
                    <div class="avatar-option"
                        :class="{'selected': selectedAvatar === '/static/img/lego-avatar-orange.svg'}"
                        @click="selectedAvatar = '/static/img/lego-avatar-orange.svg'">
                        <img src="/static/img/lego-avatar-orange.svg"
                            alt="Orange Lego">
                        <span class="color-name">Orange</span>
                    </div>
                    <div class="avatar-option"
                        :class="{'selected': selectedAvatar === '/static/img/lego-avatar-yellow.svg'}"
                        @click="selectedAvatar = '/static/img/lego-avatar-yellow.svg'">
                        <img src="/static/img/lego-avatar-yellow.svg"
                            alt="Yellow Lego">
                        <span class="color-name">Yellow</span>
                    </div>
                    <div class="avatar-option"
                        :class="{'selected': selectedAvatar === '/static/img/lego-avatar-green.svg'}"
                        @click="selectedAvatar = '/static/img/lego-avatar-green.svg'">
                        <img src="/static/img/lego-avatar-green.svg"
                            alt="Green Lego">
                        <span class="color-name">Green</span>
                    </div>
                    <div class="avatar-option"
                        :class="{'selected': selectedAvatar === '/static/img/lego-avatar-teal.svg'}"
                        @click="selectedAvatar = '/static/img/lego-avatar-teal.svg'">
                        <img src="/static/img/lego-avatar-teal.svg"
                            alt="Teal Lego">
                        <span class="color-name">Teal</span>
                    </div>
                    <div class="avatar-option"
                        :class="{'selected': selectedAvatar === '/static/img/lego-avatar-cyan.svg'}"
                        @click="selectedAvatar = '/static/img/lego-avatar-cyan.svg'">
                        <img src="/static/img/lego-avatar-cyan.svg"
                            alt="Cyan Lego">
                        <span class="color-name">Cyan</span>
                    </div>
                    <div class="avatar-option"
                        :class="{'selected': selectedAvatar === '/static/img/lego-avatar-blue.svg'}"
                        @click="selectedAvatar = '/static/img/lego-avatar-blue.svg'">
                        <img src="/static/img/lego-avatar-blue.svg"
                            alt="Blue Lego">
                        <span class="color-name">Blue</span>
                    </div>
                    <div class="avatar-option"
                        :class="{'selected': selectedAvatar === '/static/img/lego-avatar-indigo.svg'}"
                        @click="selectedAvatar = '/static/img/lego-avatar-indigo.svg'">
                        <img src="/static/img/lego-avatar-indigo.svg"
                            alt="Indigo Lego">
                        <span class="color-name">Indigo</span>
                    </div>
                    <div class="avatar-option"
                        :class="{'selected': selectedAvatar === '/static/img/lego-avatar-purple.svg'}"
                        @click="selectedAvatar = '/static/img/lego-avatar-purple.svg'">
                        <img src="/static/img/lego-avatar-purple.svg"
                            alt="Purple Lego">
                        <span class="color-name">Purple</span>
                    </div>
                    <div class="avatar-option"
                        :class="{'selected': selectedAvatar === '/static/img/lego-avatar-pink.svg'}"
                        @click="selectedAvatar = '/static/img/lego-avatar-pink.svg'">
                        <img src="/static/img/lego-avatar-pink.svg"
                            alt="Pink Lego">
                        <span class="color-name">Pink</span>
                    </div>
                    <div class="avatar-option"
                        :class="{'selected': selectedAvatar === '/static/img/lego-avatar-lime.svg'}"
                        @click="selectedAvatar = '/static/img/lego-avatar-lime.svg'">
                        <img src="/static/img/lego-avatar-lime.svg"
                            alt="Lime Lego">
                        <span class="color-name">Lime</span>
                    </div>
                    <div class="avatar-option"
                        :class="{'selected': selectedAvatar === '/static/img/lego-avatar-rose.svg'}"
                        @click="selectedAvatar = '/static/img/lego-avatar-rose.svg'">
                        <img src="/static/img/lego-avatar-rose.svg"
                            alt="Rose Lego">
                        <span class="color-name">Rose</span>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button @click="saveAvatar()" class="btn btn-primary">
                    <i class="fas fa-save"></i> Save Avatar
                </button>
                <button @click="showAvatarCustomizer = false"
                    class="btn btn-secondary">
                    Cancel
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}
